{"version":3,"sources":["../node_modules/redux-undo/lib/index.js","../node_modules/redux-undo/lib/actions.js","../node_modules/redux-undo/lib/helpers.js","../node_modules/redux-undo/lib/debug.js","../../../../src/core/actions/helpers.ts","../../../../src/core/utils/mapNode.ts","../../../../src/core/actions/value.ts","../../../../../src/core/components/hooks/renderOptions.ts","../../../../../src/core/reducer/value/tree.ts","../../../../../src/core/reducer/values/index.ts","../../../../../src/core/reducer/value/index.ts","../../../../../src/core/reducer/focus/index.ts","../../../../src/core/reducer/index.ts","../../../../../src/core/reducer/display/index.ts","../../../../../src/core/reducer/settings/index.ts","../../../../../src/core/reducer/hover/index.ts","../node_modules/redux-undo/lib/reducer.js","../../../../../src/core/actions/cell/drag.ts","../../../src/core/reduxConnect.tsx","../../../../src/core/actions/display.ts","../../../../../src/core/selector/editable/index.ts","../../../src/core/const.ts","../node_modules/react-dnd-html5-backend/dist/esm/utils/js_utils.js","../node_modules/react-dnd-html5-backend/dist/esm/EnterLeaveCounter.js","../node_modules/react-dnd-html5-backend/dist/esm/BrowserDetector.js","../node_modules/react-dnd-html5-backend/dist/esm/MonotonicInterpolant.js","../node_modules/react-dnd-html5-backend/dist/esm/OffsetUtils.js","../node_modules/react-dnd-html5-backend/dist/esm/NativeTypes.js","../node_modules/react-dnd-html5-backend/dist/esm/NativeDragSources/nativeTypesConfig.js","../node_modules/react-dnd-html5-backend/dist/esm/NativeDragSources/getDataFromDataTransfer.js","../node_modules/react-dnd-html5-backend/dist/esm/NativeDragSources/NativeDragSource.js","../node_modules/react-dnd-html5-backend/dist/esm/NativeDragSources/index.js","../node_modules/react-dnd-html5-backend/dist/esm/OptionsReader.js","../node_modules/react-dnd-html5-backend/dist/esm/HTML5BackendImpl.js","../../../src/core/defaultOptions.ts","../node_modules/react-dnd-html5-backend/dist/esm/index.js","../../../../src/core/selector/setting.ts","../../../../../src/core/components/hooks/options.ts","../../../../../src/core/actions/cell/core.ts","../../../../../src/core/actions/cell/insert.ts","../../../../src/core/utils/cloneWithNewIds.ts","../../../../src/core/actions/setting.ts","../../../src/core/EditorStore.ts","../../../src/core/store.ts"],"names":["Object","defineProperty","exports","value","enumerable","get","_actions","ActionTypes","ActionCreators","_helpers","parseActions","isHistory","includeAction","excludeAction","combineFilters","groupByActionTypes","newHistory","_reducer","obj","require","__esModule","UNDO","REDO","JUMP_TO_FUTURE","JUMP_TO_PAST","JUMP","CLEAR_HISTORY","undo","type","redo","jumpToFuture","index","jumpToPast","jump","clearHistory","rawActions","defaultValue","arguments","length","undefined","Array","isArray","history","present","future","past","actions","action","indexOf","_len","filters","_key","reduce","prev","curr","currentState","previousHistory","group","_latestUnfiltered","limit","_toConsumableArray","arr","i","arr2","_arrayWithoutHoles","iter","Symbol","iterator","prototype","toString","call","from","_iterableToArray","TypeError","_nonIterableSpread","__DEBUG__","displayBuffer","set","debug","start","state","header","next","msgs","console","colorFormat","colors","end","nextState","_displayBuffer","_console","_console2","_console3","_console4","_console5","groupCollapsed","apply","log","groupEnd","_console6","_console7","_console8","_console9","_console10","printBuffer","args","concat","text","color","_a","newCells","__assign","_typeof","constructor","reducer","rawConfig","initialState","config","_objectSpread","filter","groupBy","undoType","redoType","jumpToPastType","jumpToFutureType","jumpType","neverSkipReducer","ignoreInitialState","syncFilter","initTypes","clearHistoryType","skipReducer","res","slices","_len2","_key2","createHistoryAction","createHistory","actionTypeAmongClearHistoryType","some","actionType","filtered","filteredState","groupedState","insert","cache","_getRequireWildcardCache","has","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","hasOwnProperty","desc","_interopRequireWildcard","WeakMap","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","sym","push","target","source","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","configurable","writable","lengthWithoutFuture","isHistoryOverflow","pastSliced","slice","newPast","newPresent","newFuture","n","PositionEnum","memoize","fn","result","_defineProperties","props","descriptor","EnterLeaveCounter","isNodeInDocument","instance","Constructor","_classCallCheck","this","protoProps","staticProps","enteringNode","_this","previousLength","entered","itemsA","itemsB","Set","insertItem","item","add","union","node","contains","leavingNode","items","isFirefox","test","navigator","userAgent","isSafari","Boolean","window","safari","MonotonicInterpolant","xs","ys","indexes","sort","a","b","dx","dy","dys","dxs","ms","_i","c1s","_i2","m2","mNext","dxNext","common","m","c2s","c3s","_i3","c1","invDx","_common","x","mid","low","high","xHere","Math","floor","diff","max","diffSq","getNodeClientOffset","el","nodeType","parentElement","_el$getBoundingClient","getBoundingClientRect","top","left","y","getEventClientOffset","e","clientX","clientY","getDragPreviewOffset","sourceNode","dragPreview","clientOffset","anchorPoint","offsetPoint","isImage","_document$documentEle","nodeName","document","documentElement","isImageNode","dragPreviewNodeOffsetFromClient","offsetFromDragPreview","sourceWidth","offsetWidth","sourceHeight","offsetHeight","anchorX","anchorY","_getDragPreviewSize","dragPreviewWidth","width","dragPreviewHeight","height","devicePixelRatio","getDragPreviewSize","offsetX","offsetY","isManualOffsetY","interpolate","calculateYOffset","_nativeTypesConfig","FILE","URL","TEXT","HTML","getDataFromDataTransfer","dataTransfer","typesToTry","resultSoFar","typeToTry","getData","nativeTypesConfig","NativeTypes","exposeProperties","files","_dataTransfer","matchesTypes","html","_dataTransfer2","urls","split","_dataTransfer3","_dataTransfer4","NativeDragSource","initializeExposedProperties","property","warn","_this2","newProperties","monitor","handle","getSourceId","matchNativeItemType","dataTransferTypes","types","nativeItemType","t","OptionsReader","globalContext","options","optionsArgs","_this$globalContext","_this$optionsArgs","rootElement","HTML5BackendImpl","manager","Map","sourceId","sourceNodes","isDraggingNativeItem","endDrag","currentNativeHandle","registry","removeSource","currentNativeSource","body","currentDragSourceNode","clearCurrentDragSourceNode","isDragging","dragStartSourceIds","defaultPrevented","beginDrag","publishSource","getSourceClientOffset","nativeType","setDragImage","sourcePreviewNodes","_this$getCurrentSourc","getCurrentSourcePreviewNodeOptions","dragPreviewOffset","setData","err","setCurrentDragSourceNode","captureDraggingState","publishDragSource","setTimeout","beginDragNativeItem","hasAttribute","preventDefault","dragEnterTargetIds","enterLeaveCounter","enter","altKeyPressed","altKey","hover","targetId","canDropOnTarget","dropEffect","getCurrentDropEffect","dragOverTargetIds","lastClientOffset","hoverRafId","requestAnimationFrame","leave","endDragNativeItem","_this$currentNativeSo","dropTargetIds","loadDataTransfer","reset","drop","dragDrop","tagName","isContentEditable","getActions","getMonitor","getRegistry","_this$dragStartSource","_this$dragOverTargetI","size","sourcePreviewNodeOptions","sourceNodeOptions","root","__isReactDndBackendSetUp","Error","addEventListeners","_this$window","removeEventListeners","asyncEndDragFrameId","cancelAnimationFrame","delete","_this3","handleDragStart","handleSelectStart","setAttribute","addEventListener","removeEventListener","_this4","handleDragEnter","handleDragOver","handleDrop","handleTopDragStart","handleTopDragStartCapture","handleTopDragEndCapture","handleTopDragEnter","handleTopDragEnterCapture","handleTopDragLeaveCapture","handleTopDragOver","handleTopDragOverCapture","handleTopDrop","handleTopDropCapture","getCurrentSourceNodeOptions","itemType","getItemType","createNativeDragSource","addSource","_this5","mouseMoveTimeoutTimer","_this5$rootElement","endDragIfSourceWasRemovedFromDOM","_this$window2","clearTimeout","unshift","context","r","l"],"mappings":"6GAEAA,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAETH,OAAOC,eAAeC,EAAS,cAAe,CAC5CE,YAAY,EACZC,IAAK,WACH,OAAOC,EAASC,eAGpBP,OAAOC,eAAeC,EAAS,iBAAkB,CAC/CE,YAAY,EACZC,IAAK,WACH,OAAOC,EAASE,kBAGpBR,OAAOC,eAAeC,EAAS,eAAgB,CAC7CE,YAAY,EACZC,IAAK,WACH,OAAOI,EAASC,gBAGpBV,OAAOC,eAAeC,EAAS,YAAa,CAC1CE,YAAY,EACZC,IAAK,WACH,OAAOI,EAASE,aAGpBX,OAAOC,eAAeC,EAAS,gBAAiB,CAC9CE,YAAY,EACZC,IAAK,WACH,OAAOI,EAASG,iBAGpBZ,OAAOC,eAAeC,EAAS,gBAAiB,CAC9CE,YAAY,EACZC,IAAK,WACH,OAAOI,EAASI,iBAGpBb,OAAOC,eAAeC,EAAS,iBAAkB,CAC/CE,YAAY,EACZC,IAAK,WACH,OAAOI,EAASK,kBAGpBd,OAAOC,eAAeC,EAAS,qBAAsB,CACnDE,YAAY,EACZC,IAAK,WACH,OAAOI,EAASM,sBAGpBf,OAAOC,eAAeC,EAAS,aAAc,CAC3CE,YAAY,EACZC,IAAK,WACH,OAAOI,EAASO,cAGpBhB,OAAOC,eAAeC,EAAS,UAAW,CACxCE,YAAY,EACZC,IAAK,WACH,OAAOY,EAAQ,WAInB,IAMgCC,EAN5BZ,EAAWa,EAAQ,MAEnBV,EAAWU,EAAQ,MAEnBF,GAE4BC,EAFMC,EAAQ,QAEOD,EAAIE,WAAaF,EAAM,CAAE,QAAWA,I,kCCtEzFlB,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAETD,EAAQM,eAAiBN,EAAQK,iBAAc,EAC/C,IAAIA,EAAc,CAChBc,KAAM,oBACNC,KAAM,oBACNC,eAAgB,8BAChBC,aAAc,4BACdC,KAAM,oBACNC,cAAe,8BAEjBxB,EAAQK,YAAcA,EACtB,IAAIC,EAAiB,CACnBmB,KAAM,WACJ,MAAO,CACLC,KAAMrB,EAAYc,OAGtBQ,KAAM,WACJ,MAAO,CACLD,KAAMrB,EAAYe,OAGtBQ,aAAc,SAAsBC,GAClC,MAAO,CACLH,KAAMrB,EAAYgB,eAClBQ,MAAOA,IAGXC,WAAY,SAAoBD,GAC9B,MAAO,CACLH,KAAMrB,EAAYiB,aAClBO,MAAOA,IAGXE,KAAM,SAAcF,GAClB,MAAO,CACLH,KAAMrB,EAAYkB,KAClBM,MAAOA,IAGXG,aAAc,WACZ,MAAO,CACLN,KAAMrB,EAAYmB,iBAIxBxB,EAAQM,eAAiBA,G,kCCnCzB,SAASE,EAAayB,GACpB,IAAIC,EAAeC,UAAUC,OAAS,QAAsBC,IAAjBF,UAAU,GAAmBA,UAAU,GAAK,GAEvF,OAAIG,MAAMC,QAAQN,GACTA,EACwB,kBAAfA,EACT,CAACA,GAGHC,EAtBTpC,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAETD,EAAQQ,aAAeA,EACvBR,EAAQS,UAsBR,SAAmB+B,GACjB,MAAkC,qBAApBA,EAAQC,SAAqD,qBAAnBD,EAAQE,QAAkD,qBAAjBF,EAAQG,MAAwBL,MAAMC,QAAQC,EAAQE,SAAWJ,MAAMC,QAAQC,EAAQG,OAtB1L3C,EAAQU,cA0BR,SAAuBuB,GACrB,IAAIW,EAAUpC,EAAayB,GAC3B,OAAO,SAAUY,GACf,OAAOD,EAAQE,QAAQD,EAAOnB,OAAS,IA5B3C1B,EAAQW,cAiCR,SAAuBsB,GACrB,IAAIW,EAAUpC,EAAayB,GAC3B,OAAO,SAAUY,GACf,OAAOD,EAAQE,QAAQD,EAAOnB,MAAQ,IAnC1C1B,EAAQY,eAwCR,WACE,IAAK,IAAImC,EAAOZ,UAAUC,OAAQY,EAAU,IAAIV,MAAMS,GAAOE,EAAO,EAAGA,EAAOF,EAAME,IAClFD,EAAQC,GAAQd,UAAUc,GAG5B,OAAOD,EAAQE,QAAO,SAAUC,EAAMC,GACpC,OAAO,SAAUP,EAAQQ,EAAcC,GACrC,OAAOH,EAAKN,EAAQQ,EAAcC,IAAoBF,EAAKP,EAAQQ,EAAcC,OAElF,WACD,OAAO,MAjDXtD,EAAQa,mBAqDR,SAA4BoB,GAC1B,IAAIW,EAAUpC,EAAayB,GAC3B,OAAO,SAAUY,GACf,OAAOD,EAAQE,QAAQD,EAAOnB,OAAS,EAAImB,EAAOnB,KAAO,OAvD7D1B,EAAQc,WA2DR,SAAoB6B,EAAMF,EAASC,GACjC,IAAIa,EAAQpB,UAAUC,OAAS,QAAsBC,IAAjBF,UAAU,GAAmBA,UAAU,GAAK,KAChF,MAAO,CACLQ,KAAMA,EACNF,QAASA,EACTC,OAAQA,EACRa,MAAOA,EACPC,kBAAmBf,EACnBZ,MAAOc,EAAKP,OACZqB,MAAOd,EAAKP,OAASM,EAAON,OAAS,K,kCCrEzC,SAASsB,EAAmBC,GAAO,OAMnC,SAA4BA,GAAO,GAAIrB,MAAMC,QAAQoB,GAAM,CAAE,IAAK,IAAIC,EAAI,EAAGC,EAAO,IAAIvB,MAAMqB,EAAIvB,QAASwB,EAAID,EAAIvB,OAAQwB,IAAOC,EAAKD,GAAKD,EAAIC,GAAM,OAAOC,GANnHC,CAAmBH,IAI7D,SAA0BI,GAAQ,GAAIC,OAAOC,YAAYnE,OAAOiE,IAAkD,uBAAzCjE,OAAOoE,UAAUC,SAASC,KAAKL,GAAgC,OAAOzB,MAAM+B,KAAKN,GAJrFO,CAAiBX,IAEtF,WAAgC,MAAM,IAAIY,UAAU,mDAF0CC,GAQ9F,IAAIC,EAEAC,EAlBJ5E,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAETD,EAAQ2E,IA4HR,SAAaC,GACXH,EAAYG,GA5Hd5E,EAAQ6E,MA+ER,SAAehC,EAAQiC,QAxDrBJ,EAAgB,CACdK,OAAQ,GACR5B,KAAM,GACNN,OAAQ,GACRmC,KAAM,GACNC,KAAM,KAsDJR,IACES,QAAQ3B,OACVmB,EAAcK,OAAS,CAAC,eAAgB,qBAAsB,SAAUlC,EAAOnB,MAC/EgD,EAAc7B,OAASsC,EAAY,SAAUC,EAAevC,GAC5D6B,EAAcvB,KAAOgC,EAAY,eAAgBC,EAAkBN,KAEnEJ,EAAcK,OAAS,CAAC,oBAAqBlC,EAAOnB,MACpDgD,EAAc7B,OAAS,CAAC,SAAUA,GAClC6B,EAAcvB,KAAO,CAAC,eAAgB2B,MAzF5C9E,EAAQqF,IAgGR,SAAaC,GACPb,IACES,QAAQ3B,MACVmB,EAAcM,KAAOG,EAAY,eAAgBC,EAAkBE,GAEnEZ,EAAcM,KAAO,CAAC,eAAgBM,GApE5C,WACE,IAAIC,EAAiBb,EACjBK,EAASQ,EAAeR,OACxB5B,EAAOoC,EAAepC,KACtB6B,EAAOO,EAAeP,KACtBnC,EAAS0C,EAAe1C,OACxBoC,EAAOM,EAAeN,KAE1B,GAAIC,QAAQ3B,MAAO,CACjB,IAAIiC,EAAUC,EAAWC,EAAWC,EAAWC,GAE9CJ,EAAWN,SAASW,eAAeC,MAAMN,EAAU9B,EAAmBqB,KAEtEU,EAAYP,SAASa,IAAID,MAAML,EAAW/B,EAAmBP,KAE7DuC,EAAYR,SAASa,IAAID,MAAMJ,EAAWhC,EAAmBb,KAE7D8C,EAAYT,SAASa,IAAID,MAAMH,EAAWjC,EAAmBsB,KAE7DY,EAAYV,SAASa,IAAID,MAAMF,EAAWlC,EAAmBuB,IAE9DC,QAAQc,eACH,CACL,IAAIC,EAAWC,EAAWC,EAAWC,EAAWC,GAE/CJ,EAAYf,SAASa,IAAID,MAAMG,EAAWvC,EAAmBqB,KAE7DmB,EAAYhB,SAASa,IAAID,MAAMI,EAAWxC,EAAmBP,KAE7DgD,EAAYjB,SAASa,IAAID,MAAMK,EAAWzC,EAAmBb,KAE7DuD,EAAYlB,SAASa,IAAID,MAAMM,EAAW1C,EAAmBsB,KAE7DqB,EAAanB,SAASa,IAAID,MAAMO,EAAY3C,EAAmBuB,KAsChEqB,KAvGJtG,EAAQ+F,IA6GR,WACE,GAAItB,EAAW,CACb,IAAK,IAAI1B,EAAOZ,UAAUC,OAAQmE,EAAO,IAAIjE,MAAMS,GAAOE,EAAO,EAAGA,EAAOF,EAAME,IAC/EsD,EAAKtD,GAAQd,UAAUc,GAGzByB,EAAcO,KAAOP,EAAcO,KAAKuB,OAAO,GAAGA,OAAOD,EAAM,CAAC,UAtGpE,IAAInB,EACS,UADTA,EAEM,UAFNA,EAGS,UAuDb,SAASD,EAAYsB,EAAMC,EAAO1F,GAChC,MAAO,CAAC,KAAKwF,OAAOC,GAAO,UAAUD,OAAOE,EAAO,uBAAwB1F,K,kCC/E7E,+CAEa,EAAc,WACvB,MAAK,CACD,KAAE,cACN,KAAM,cACN,OAAQ,CAAC,cAAY,cAAY,kB,iSCUxB,EAAU,SAAV,EAAW,EAAY,EAAgB,G,YAClD,QADkD,aAC9C,YAAM,GAAO,CACf,GAAqB,QAAjB2F,EAAA,EAAO,kBAAU,oBAAjB,EAAoB,EAAM,GAAQ,OAAO,EAC7C,IAIM,GACU,QAJV,EAAkC,QAAjB,EAAU,QAD3B,EAAa,EAAO,OAAS,EAAO,OAAO,EAAM,GAAS,SAC/B,IAAV,OAAU,EAAV,EAAY,aAAK,eAAE,KACxC,SAAC,GAAM,SAAQ,EAAG,EAAQ,EAAnB,aAGO,IAAd,OAAc,EAAd,EAAgB,QAAS,EACtB,OACM,GAAU,CACb,MAAO,IAET,EACN,OAAO,EAAO,WACV,EAAO,WAAW,EAAY,GAC9B,EAEA,GAAkB,QAAlB,IAAO,mBAAW,oBAAlB,EAAqB,EAAM,GAAQ,OAAO,EAC1C,IAAE,EACA,EAGA,GACU,QAJV,EAAiC,QAAhB,EAAU,QAD3B,EAAa,EAAO,QAAU,EAAO,QAAQ,EAAM,GAAS,SACjC,IAAV,OAAU,EAAV,EAAY,YAAI,eAAE,KACvC,SAAC,GAAM,SAAQ,EAAG,EAAQ,EAAnB,aAGO,IAAd,OAAc,EAAd,EAAgB,QAAS,EACtB,OACM,GAAU,CACb,KAAM,IAER,EACN,OAAO,EAAO,YACV,EAAO,YAAY,EAAY,GAC/B,I,kCC/CR,kFAEa,EAAe,eAQf,EAAc,SAAC,GAAuC,MAAC,CAClE,KAAM,EACN,GAAI,IAAI,KACR,MAAK,EACL,IAAK,iB,kCChBP,mIAKa,EAAuB,wBAClC,KAQW,EAAmB,WAAM,gCAOzB,EAAkB,SAAgC,GAC3D,IACI,EADU,IACO,GACjB,EAAa,iBAAO,GAI1B,OAHK,YAAW,EAAW,QAAS,KAClC,EAAW,QAAU,GAEhB,EAAW,U,42BCsIP,EAAQ,SAAC,EAAoB,EAAQ,QAA5B,mBAA4B,aAC9C,IAAE,EACQ,IAAV,GAAgC,IAAjB,EAAM,OAAe,CAXH,CAC/B,iBACA,KAAE,CACJ,CACQ,GAAF,cACE,MAAC,OAMiD,EAE1D,OAAM,EAAO,MACT,KAAC,IAEGC,EAAK,YAAY,EAAU,GAC3B,MACJ,KAAC,IACD,KAAC,IACD,KAAC,IACD,KAAC,IACG,EAAK,EAAS,QAAO,SAAC,GAAY,SAAE,KAAO,EAAO,KAAhB,MAClC,MAEJ,KAAC,IACG,EAAK,EACR,QAAO,SAAC,GAAY,SAAE,KAAO,EAAO,KAAhB,MACpB,KAAI,SAAC,GACJ,SAAO,UAAY,EAAE,GACjB,C,OACO,EAAO,MAAI,CAAE,GAAI,EAAO,IAAI,KAAM,OAAQ,O,OAC1C,GAAC,CAAE,GAAI,EAAO,IAAI,OAAO,MAEhC,CAAC,MAEN,OAAO,IAAS,IACb,MAEJ,KAAC,IACG,EAAK,EACR,QAAO,SAAC,GAAoB,OAAR,EAAE,KAAO,EAAO,KAAhB,MACpB,KAAI,SAAC,GACI,OAAR,EAAO,UAAY,EAAE,GACjB,C,OACO,GAAC,CAAY,GAAN,EAAO,IAAI,OAAO,K,OACzB,EAAO,MAAI,CAAE,GAAI,EAAO,IAAI,KAAM,OAAQ,QAEjD,CAAC,MAEN,OAAO,IAAS,IACb,MAEJ,KAAC,IACD,KAAC,IACH,EAAW,EACR,QAAO,SAAC,GAAY,SAAE,KAAO,EAAO,KAAhB,MACpB,KAAI,SAAC,GACJ,OAAI,EAAO,UAAY,EAAE,GAChB,CACL,CACE,GAAI,EAAO,IAAI,KACf,KAAM,CACJ,CACE,GAAI,EAAO,IAAI,OAAO,GACtB,MAAO,C,OAEA,EAAO,MAAI,CACd,OACE,EAAO,OAAS,IACZ,QACA,OACN,GAAI,EAAO,IAAI,KACf,KAAM,I,OAGH,GAAC,CACJ,GAAI,EAAO,IAAI,OAAO,GACtB,OAAQ,KACR,mBAAoB,EAAO,IAAI,KAC/B,KAAM,SAQb,CAAC,MAET,OAAO,IAAS,IACnB,MAEF,KAAK,IACH,EAAW,EAAS,QAAO,SAAC,G,IAAE,EAAE,KAAa,OAAC,EAAO,IAAI,SAAS,MAIpE,IAAI,EAAe,EAAS,KAAI,SAAC,GAAM,OA7N9B,SAAC,EAAS,EAAe,GAClC,OAAF,YACG,SAAC,EAAa,G,cACP,EAAS,WACb,OAAO,YAAoB,OACtB,GAAK,CACR,KAAM,EAAK,EAAM,KAAM,EAAQ,EAAQ,OAI3C,OAAQ,EAAO,MACb,KAAK,IACH,GAAI,EAAO,KAAO,EAAM,GAAI,CAC1B,IAAM,EAAU,IAChB,OAAI,EAAO,KACT,OACK,GAAO,CACV,YAAW,OACc,QAAnB,IAAQ,mBAAW,QAAI,KAAG,OAC7B,EAAO,MAAO,EAAO,QAAO,MAIjC,OACK,GAAO,CACV,QAAS,EAAO,UAItB,OAAO,IACH,KAAD,IACH,GAAI,EAAO,KAAO,EAAM,GAAI,CAEpB,EAAU,IAAhB,IAEM,EAAW,KAAyB,QAAhB,IAAQ,gBAAQ,QAAI,IACxC,EAA6B,OAAhB,EAAO,KAI1B,OAHI,EAAO,MAAQ,IACC,OAAX,QAAW,IAAX,YAAc,EAAO,OAE9B,OACK,GAAO,CACE,SAAJ,OACS,OAAX,QAAW,IAAX,IAAe,IACd,EAED,IADD,KAAG,EAAC,EAAO,MAAO,EAAO,KAAkC,MAK5D,OAAD,IAEH,KAAD,IACK,OAAJ,EAAO,UAAY,EAAM,GACpB,CACO,GAAR,EAAO,IAAI,KACH,KAAN,EACJ,CACE,CACE,GAAI,EAAO,IAAI,OAAO,GACtB,MAAO,C,OACA,EAAO,MAAI,CAAE,GAAI,EAAO,IAAI,KAAM,OAAQ,SAGnD,CACE,GAAI,EAAO,IAAI,OAAO,GACtB,MAAO,QAAM,KAAQ,CAAE,GAAI,EAAO,IAAI,OAAO,QAEhD,OACI,GAAM,CAAE,QAAS,OACtB,EAAQ,IAIP,IAEH,KAAD,IACK,OAAJ,EAAO,UAAY,EAAM,GACpB,CACL,GAAI,EAAO,IAAI,KAEf,KAAM,EACJ,CACE,CACE,GAAI,EAAO,IAAI,OAAO,GACtB,MAAO,CAAAC,IAAA,GAAM,KAAQ,CAAE,GAAI,EAAO,IAAI,OAAO,OAE/C,CACE,GAAI,EAAO,IAAI,OAAO,GACR,MAAP,C,OACA,EAAO,MAAI,CAAE,GAAI,EAAO,IAAI,KAAM,OAAQ,UAGpD,OACI,GAAM,CAAE,QAAS,OACtB,EAAQ,IAIP,IACT,KAAK,IACH,OAAI,EAAO,UAAY,EAAM,GAC3B,OACK,GAAK,CACR,KAAI,SACY,QAAV,IAAM,YAAI,QAAI,KAAG,IACrB,CACE,GAAI,EAAO,IAAI,OAAO,GACtB,MAAO,C,OACA,EAAO,MAAI,CAAE,GAAI,EAAO,IAAI,KAAM,OAAQ,WAIrD,KAEG,IAET,QACE,OAAO,KApHZ,CAsHE,EAAG,IAqGiC,CAAK,EAAG,EAAR,MACvC,OAAK,YAAc,IAGjB,EAAM,SAAC,EAAQ,EAAG,GACpB,OAAF,YACG,SAAC,EAAY,GACR,IAAE,EAAS,WAAM,cAChB,GAAK,CACA,MAAD,EAAM,EAAM,MAAO,EAAQ,EAFf,MAKjB,OAAI,EAAO,MACP,KAAD,IACK,OAAJ,EAAO,UAAY,EAAM,GACpB,IAET,OACK,GAAK,CACR,MAAO,EAAK,G,OAEH,EAAO,MAAI,CAAE,GAAI,EAAO,IAAI,KAAM,OAAQ,Q,EAC5C,EAAM,QAAK,UAEX,GAAM,CAAE,QAAS,OACtB,EAAQ,KAIR,KAAD,IACK,OAAJ,EAAO,UAAY,EAAM,GACpB,IAET,OACK,GAAK,CACR,MAAO,EAAK,SAEL,EAAM,QAAK,I,OACT,EAAO,MAAI,CAAE,GAAI,EAAO,IAAI,KAAM,OAAQ,S,UAE5C,GAAM,CAAE,QAAS,OACtB,EAAQ,KAWR,QACJ,OAAO,KA/CZ,CAiDE,EAAG,KAGG,EAAO,SAAC,EAAe,EAAG,GACrC,YADmB,mBAAkB,aACrC,YAGG,SAAC,EAAc,GAEd,OAAQ,EAAO,MACb,KAAK,IACH,OAAO,EACJ,KAAI,SAAC,GACJ,SAAO,UAAY,EAAE,GACjB,CACE,CACE,MAAO,C,OACA,EAAO,MAAI,CAAE,GAAI,EAAO,IAAI,KAAM,OAAQ,QAEjD,GAAI,EAAO,IAAI,OAAO,I,OAGnB,GAAC,CACJ,GAAI,EAAO,IAAI,OAAO,MAG1B,CAAC,MAEN,OAAO,IAAS,IAChB,KAAI,SAAC,GAAM,SAAI,EAAG,EAAP,MAChB,KAAK,IACH,OAAO,EACJ,KAAI,SAAC,GACJ,SAAO,UAAY,EAAE,GACjB,C,OAEO,GAAC,CACJ,GAAI,EAAO,IAAI,OAAO,KAExB,CACE,MAAO,C,OACA,EAAO,MAAI,CAAE,GAAI,EAAO,IAAI,KAAM,OAAQ,QAEjD,GAAI,EAAO,IAAI,OAAO,KAG1B,CAAC,MAEN,OAAO,IAAS,IAChB,KAAI,SAAC,GAAM,SAAI,EAAG,EAAP,MAChB,KAAK,IAaH,OAXY,IAAV,EACI,EACD,SACM,IAAK,IACR,CACE,MAAO,C,OACA,EAAO,MAAI,CAAE,GAAI,EAAO,IAAI,KAAM,OAAQ,QAEjD,GAAI,EAAO,IAAI,OAAO,MAEzB,IACQ,KAAI,SAAC,GAAM,SAAI,EAAG,EAAP,MAG5B,QACE,OA3DiB,EAAM,KAAI,SAAC,GAAM,SAAI,EAAG,EAAP,OADvC,CA8DE,EAAG,K,gNClWL,KACD,OAAF,MAAE,EAAE,GAGC,IAAM,EAAS,KCnBD,SAAC,EAAc,GAChC,GACK,iBADC,EAAO,KAEX,OAAO,EAAO,MAGlB,IAAM,GAAe,OAAL,QAAK,IAAL,OAAK,EAAL,EAAO,MACnB,YAAuB,EAAK,EAAM,KAAM,EAAQ,IAChD,GAEF,OAAF,OACK,GAAK,CACR,KAAM,MDO4B,CAClC,OAAM,SAAqB,EAAQ,EAAc,G,MAE7C,QAAe,QAAf,EAAC,SAAc,eAAE,cAInB,CACE,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,KACA,QAAQ,EAAO,OAAS,GAI9B,kBAAkB,EAClB,YAAY,I,s4BErCR,EAAe,SAAC,EAAc,G,QAC5B,EAAiE,QAAtD,EAAa,QAAd,EAAK,OAAL,QAAK,IAAL,OAAK,EAAL,EAAO,eAAO,eAAE,QAAO,SAAC,GAAM,OAAC,EAAY,SAAb,aAAyB,QAAI,GACzE,OAAqB,IAAnB,EAAQ,OACH,KAET,OACK,GAAK,CACJ,QAAG,K,mOCVL,EAAU,YAAgB,CAC5B,OAAI,EACJ,QCDmB,SACrB,EAIA,GAEE,YANF,WACE,KAAM,IACN,KAAM,IAIA,EAAO,MACT,KAAC,IACH,cACK,GAAK,CACR,KAAM,EAAO,OAGb,KAAC,IACH,cACK,GAAK,CACR,gBAAiB,EAAO,kBAExB,KAAC,IACH,cACK,GAAK,CACR,KAAM,EAAM,KACZ,gBAAiB,OAGrB,KAAK,IACH,cACK,GAAK,CACR,KAAM,EAAO,KACb,gBAAiB,EAAO,iBAAmB,EAAM,kBAErD,QACE,OAAO,ID/BX,MDUmB,SACnB,EACA,G,QAME,YAPF,gBAOQ,EAAO,MACT,IAAC,cACH,OAAO,EAAa,EAAO,EAAO,KAEpC,KAAK,IAQH,MAAO,CACL,QAPgB,QAAhB,EAAO,MACW,QAAd,EAAK,OAAL,QAAK,IAAL,OAAK,EAAL,EAAO,eAAO,eAAE,SAAS,EAAO,KAC9B,EAAa,EAAO,CAAC,EAAO,KAAK,QAClC,SAAoB,QAAd,EAAK,OAAL,QAAK,IAAL,OAAK,EAAL,EAAO,eAAO,QAAI,KAAG,IAAE,EAAO,KAAE,GACvC,CAAC,EAAO,IAIZ,aAAc,EAAO,cAAe,IAAI,MAAO,UAAY,MAI3D,KAAC,IACG,OAAC,KACL,KAAC,IACH,OAAO,EAAa,EAAO,CAAC,EAAO,KAGjC,QACI,OAAC,IC1CX,SEZsB,SACtB,EAGA,GAMA,YATA,QAAI,EAAJ,CACQ,YAQA,EAAO,OACR,IACH,OACK,GAAK,CACR,KAAM,EAAO,OAGR,GFJX,MGImB,SACnB,EACA,GAEA,YAHA,gBAGQ,EAAO,MACb,KAAK,IACH,MAAO,CACL,OAAQ,EAAO,QACf,SAAU,EAAO,UAGrB,KAAK,IACH,OAAO,KAET,QACE,OAAO,IHlBX,YAAa,WAAM,eAKN,gBAAgB,CAAE,UAAW,IAEtC,SAAU,EAAa,EAAc,GACvC,MAAK,CACD,UAAO,CACH,YAAO,GACP,MAAC,KACD,MAAC,KACD,QAAG,CACC,KAAF,OACE,KAAF,GAEF,SAAI,CACR,KAAI,GAEN,OAAQ,CACN,KAAM,GACN,QAAS,EACT,OAAQ,Q,kCIrChB,SAASC,EAAQ9F,GAAwT,OAAtO8F,EAArD,oBAAX9C,QAAoD,kBAApBA,OAAOC,SAAmC,SAAiBjD,GAAO,cAAcA,GAA2B,SAAiBA,GAAO,OAAOA,GAAyB,oBAAXgD,QAAyBhD,EAAI+F,cAAgB/C,QAAUhD,IAAQgD,OAAOE,UAAY,gBAAkBlD,GAAiB8F,EAAQ9F,GAExVlB,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAETD,EAAO,QA2FP,SAAkBgH,GAChB,IAAIC,EAAY9E,UAAUC,OAAS,QAAsBC,IAAjBF,UAAU,GAAmBA,UAAU,GAAK,GACpFyC,EAAMD,IAAIsC,EAAUrC,OAEpB,IAiCIsC,EAjCAC,EAASC,EAAc,CACzB3D,WAAOpB,EACPgF,OAAQ,WACN,OAAO,GAETC,QAAS,WACP,OAAO,MAETC,SAAUnH,EAASC,YAAYc,KAC/BqG,SAAUpH,EAASC,YAAYe,KAC/BqG,eAAgBrH,EAASC,YAAYiB,aACrCoG,iBAAkBtH,EAASC,YAAYgB,eACvCsG,SAAUvH,EAASC,YAAYkB,KAC/BqG,kBAAkB,EAClBC,oBAAoB,EACpBC,YAAY,GACXb,EAAW,CACZc,WAAW,EAAIxH,EAASC,cAAcyG,EAAUc,UAAW,CAAC,sBAC5DC,kBAAkB,EAAIzH,EAASC,cAAcyG,EAAUe,iBAAkB,CAAC5H,EAASC,YAAYmB,kBAI7FyG,EAAcd,EAAOS,iBAAmB,SAAUM,EAAKrF,GACzD,IAAK,IAAIE,EAAOZ,UAAUC,OAAQ+F,EAAS,IAAI7F,MAAMS,EAAO,EAAIA,EAAO,EAAI,GAAIE,EAAO,EAAGA,EAAOF,EAAME,IACpGkF,EAAOlF,EAAO,GAAKd,UAAUc,GAG/B,OAAOmE,EAAc,GAAIc,EAAK,CAC5BzF,QAASuE,EAAQlB,WAAM,EAAQ,CAACoC,EAAIzF,QAASI,GAAQ2D,OAAO2B,OAE5D,SAAUD,GACZ,OAAOA,GAGT,OAAO,WACL,IAAIpD,EAAQ3C,UAAUC,OAAS,QAAsBC,IAAjBF,UAAU,GAAmBA,UAAU,GAAK+E,EAC5ErE,EAASV,UAAUC,OAAS,QAAsBC,IAAjBF,UAAU,GAAmBA,UAAU,GAAK,GACjFyC,EAAMC,MAAMhC,EAAQiC,GAGpB,IAFA,IA2BIoD,EA3BA1F,EAAUsC,EAELsD,EAAQjG,UAAUC,OAAQ+F,EAAS,IAAI7F,MAAM8F,EAAQ,EAAIA,EAAQ,EAAI,GAAIC,EAAQ,EAAGA,EAAQD,EAAOC,IAC1GF,EAAOE,EAAQ,GAAKlG,UAAUkG,GAGhC,IAAKnB,EAAc,CAGjB,GAFAtC,EAAMmB,IAAI,iCAEI1D,IAAVyC,EAAqB,CACvB,IAAIwD,EAAsB,CACxB5G,KAAM,+BAEJmD,EAAQmC,EAAQlB,WAAM,EAAQ,CAAChB,EAAOwD,GAAqB9B,OAAO2B,IAItE,OAHA3F,EAAU+F,EAAc1D,EAAOsC,EAAOU,oBACtCjD,EAAMmB,IAAI,4CACVnB,EAAMS,IAAI7C,GACHA,GACE,EAAIjC,EAASE,WAAWqE,IACjCtC,EAAU0E,EAAeC,EAAOU,mBAAqB/C,GAAQ,EAAIvE,EAASO,YAAYgE,EAAMnC,KAAMmC,EAAMrC,QAASqC,EAAMpC,QACvHkC,EAAMmB,IAAI,wDAAyDmB,KAEnE1E,EAAU0E,EAAeqB,EAAczD,EAAOqC,EAAOU,oBACrDjD,EAAMmB,IAAI,4DAA6DmB,IAM3E,OAAQrE,EAAOnB,MACb,UAAKW,EACH,OAAOG,EAET,KAAK2E,EAAOI,SAIV,OAHAW,EAAMnG,EAAKS,GAAU,GACrBoC,EAAMmB,IAAI,gBACVnB,EAAMS,IAAI6C,GACHD,EAAYnC,WAAM,EAAQ,CAACoC,EAAKrF,GAAQ2D,OAAO2B,IAExD,KAAKhB,EAAOK,SAIV,OAHAU,EAAMnG,EAAKS,EAAS,GACpBoC,EAAMmB,IAAI,gBACVnB,EAAMS,IAAI6C,GACHD,EAAYnC,WAAM,EAAQ,CAACoC,EAAKrF,GAAQ2D,OAAO2B,IAExD,KAAKhB,EAAOM,eAIV,OAHAS,EAAMpG,EAAWU,EAASK,EAAOhB,OACjC+C,EAAMmB,IAAI,yBAAyBS,OAAO3D,EAAOhB,QACjD+C,EAAMS,IAAI6C,GACHD,EAAYnC,WAAM,EAAQ,CAACoC,EAAKrF,GAAQ2D,OAAO2B,IAExD,KAAKhB,EAAOO,iBAIV,OAHAQ,EAAMtG,EAAaY,EAASK,EAAOhB,OACnC+C,EAAMmB,IAAI,2BAA2BS,OAAO3D,EAAOhB,QACnD+C,EAAMS,IAAI6C,GACHD,EAAYnC,WAAM,EAAQ,CAACoC,EAAKrF,GAAQ2D,OAAO2B,IAExD,KAAKhB,EAAOQ,SAIV,OAHAO,EAAMnG,EAAKS,EAASK,EAAOhB,OAC3B+C,EAAMmB,IAAI,mBAAmBS,OAAO3D,EAAOhB,QAC3C+C,EAAMS,IAAI6C,GACHD,EAAYnC,WAAM,EAAQ,CAACoC,EAAKrF,GAAQ2D,OAAO2B,IAExD,KAAKK,EAAgC3F,EAAOnB,KAAMyF,EAAOa,kBAIvD,OAHAE,EAAMK,EAAc/F,EAAQC,QAAS0E,EAAOU,oBAC5CjD,EAAMmB,IAAI,wBACVnB,EAAMS,IAAI6C,GACHD,EAAYnC,WAAM,EAAQ,CAACoC,EAAKrF,GAAQ2D,OAAO2B,IAExD,QAGE,GAFAD,EAAMlB,EAAQlB,WAAM,EAAQ,CAACtD,EAAQC,QAASI,GAAQ2D,OAAO2B,IAEzDhB,EAAOY,UAAUU,MAAK,SAAUC,GAClC,OAAOA,IAAe7F,EAAOnB,QAI7B,OAFAkD,EAAMmB,IAAI,oCACVnB,EAAMS,IAAI6B,GACHA,EAGT,GAAI1E,EAAQgB,oBAAsB0E,EAGhC,OAAO1F,EAKT,IAAImG,EAAoC,oBAAlBxB,EAAOE,SAA0BF,EAAOE,OAAOxE,EAAQqF,EAAK1F,GAElF,GAAImG,EAAU,CAEZ,IAAIC,GAAgB,EAAIrI,EAASO,YAAY0B,EAAQG,KAAMuF,EAAK1F,EAAQE,OAAQF,EAAQe,OAQxF,OANK4D,EAAOW,aACVc,EAAcpF,kBAAoBhB,EAAQgB,mBAG5CoB,EAAMmB,IAAI,iDACVnB,EAAMS,IAAIuD,GACHA,EAKT,IAAIrF,EAAQ4D,EAAOG,QAAQzE,EAAQqF,EAAK1F,GAExC,GAAa,MAATe,GAAiBA,IAAUf,EAAQe,MAAO,CAE5C,IAAIsF,GAAe,EAAItI,EAASO,YAAY0B,EAAQG,KAAMuF,EAAK1F,EAAQE,OAAQF,EAAQe,OAGvF,OAFAqB,EAAMmB,IAAI,uDACVnB,EAAMS,IAAIwD,GACHA,EAOT,OAHArG,EAAUsG,EAAOtG,EAAS0F,EAAKf,EAAO1D,MAAOF,GAC7CqB,EAAMmB,IAAI,mCACVnB,EAAMS,IAAI7C,GACHA,KA1Pf,IAAIoC,EAQJ,SAAiC5D,GAAO,GAAIA,GAAOA,EAAIE,WAAc,OAAOF,EAAO,GAAY,OAARA,GAAiC,WAAjB8F,EAAQ9F,IAAoC,oBAARA,EAAsB,MAAO,CAAE,QAAWA,GAAS,IAAI+H,EAAQC,IAA4B,GAAID,GAASA,EAAME,IAAIjI,GAAQ,OAAO+H,EAAM5I,IAAIa,GAAQ,IAAIkI,EAAS,GAAQC,EAAwBrJ,OAAOC,gBAAkBD,OAAOsJ,yBAA0B,IAAK,IAAIC,KAAOrI,EAAO,GAAIlB,OAAOoE,UAAUoF,eAAelF,KAAKpD,EAAKqI,GAAM,CAAE,IAAIE,EAAOJ,EAAwBrJ,OAAOsJ,yBAAyBpI,EAAKqI,GAAO,KAAUE,IAASA,EAAKpJ,KAAOoJ,EAAK5E,KAAQ7E,OAAOC,eAAemJ,EAAQG,EAAKE,GAAgBL,EAAOG,GAAOrI,EAAIqI,GAAYH,EAAM,QAAclI,EAAS+H,GAASA,EAAMpE,IAAI3D,EAAKkI,GAAW,OAAOA,EARztBM,CAAwBvI,EAAQ,OAExCb,EAAWa,EAAQ,MAEnBV,EAAWU,EAAQ,MAEvB,SAAS+H,IAA6B,GAAuB,oBAAZS,QAAwB,OAAO,KAAM,IAAIV,EAAQ,IAAIU,QAA6F,OAAlFT,EAA2B,WAAsC,OAAOD,GAAiBA,EAI1M,SAASW,EAAQC,EAAQC,GAAkB,IAAIC,EAAO/J,OAAO+J,KAAKF,GAAS,GAAI7J,OAAOgK,sBAAuB,CAAE,IAAIC,EAAUjK,OAAOgK,sBAAsBH,GAAaC,IAAgBG,EAAUA,EAAQ1C,QAAO,SAAU2C,GAAO,OAAOlK,OAAOsJ,yBAAyBO,EAAQK,GAAK9J,eAAgB2J,EAAKI,KAAKnE,MAAM+D,EAAME,GAAY,OAAOF,EAE9U,SAASzC,EAAc8C,GAAU,IAAK,IAAItG,EAAI,EAAGA,EAAIzB,UAAUC,OAAQwB,IAAK,CAAE,IAAIuG,EAAyB,MAAhBhI,UAAUyB,GAAazB,UAAUyB,GAAK,GAAQA,EAAI,EAAK8F,EAAQ5J,OAAOqK,IAAS,GAAMC,SAAQ,SAAUf,GAAOgB,EAAgBH,EAAQb,EAAKc,EAAOd,OAAsBvJ,OAAOwK,0BAA6BxK,OAAOyK,iBAAiBL,EAAQpK,OAAOwK,0BAA0BH,IAAmBT,EAAQ5J,OAAOqK,IAASC,SAAQ,SAAUf,GAAOvJ,OAAOC,eAAemK,EAAQb,EAAKvJ,OAAOsJ,yBAAyBe,EAAQd,OAAe,OAAOa,EAE7gB,SAASG,EAAgBrJ,EAAKqI,EAAKpJ,GAAiK,OAApJoJ,KAAOrI,EAAOlB,OAAOC,eAAeiB,EAAKqI,EAAK,CAAEpJ,MAAOA,EAAOC,YAAY,EAAMsK,cAAc,EAAMC,UAAU,IAAkBzJ,EAAIqI,GAAOpJ,EAAgBe,EAE3M,SAAS0C,EAAmBC,GAAO,OAMnC,SAA4BA,GAAO,GAAIrB,MAAMC,QAAQoB,GAAM,CAAE,IAAK,IAAIC,EAAI,EAAGC,EAAO,IAAIvB,MAAMqB,EAAIvB,QAASwB,EAAID,EAAIvB,OAAQwB,IAAOC,EAAKD,GAAKD,EAAIC,GAAM,OAAOC,GANnHC,CAAmBH,IAI7D,SAA0BI,GAAQ,GAAIC,OAAOC,YAAYnE,OAAOiE,IAAkD,uBAAzCjE,OAAOoE,UAAUC,SAASC,KAAKL,GAAgC,OAAOzB,MAAM+B,KAAKN,GAJrFO,CAAiBX,IAEtF,WAAgC,MAAM,IAAIY,UAAU,mDAF0CC,GAQ9F,SAAS+D,EAAczD,EAAO+C,GAI5B,IAAIrF,GAAU,EAAIjC,EAASO,YAAY,GAAIgE,EAAO,IAMlD,OAJI+C,IACFrF,EAAQgB,kBAAoB,MAGvBhB,EAMT,SAASsG,EAAOtG,EAASsC,EAAOrB,EAAOF,GACrC,IAAImH,EAAsBlI,EAAQG,KAAKP,OAAS,EAChDwC,EAAMmB,IAAI,YAAajB,GACvBF,EAAMmB,IAAI,aAActC,EAAQiH,GAChC,IAAI/H,EAAOH,EAAQG,KACfa,EAAoBhB,EAAQgB,kBAC5BmH,EAAoBlH,GAASA,GAASiH,EACtCE,EAAajI,EAAKkI,MAAMF,EAAoB,EAAI,GAChDG,EAA+B,MAArBtH,EAA4B,GAAGgD,OAAO9C,EAAmBkH,GAAa,CAACpH,IAAsBoH,EAC3G,OAAO,EAAIrK,EAASO,YAAYgK,EAAShG,EAAO,GAAIvB,GAItD,SAAS3B,EAAaY,EAASX,GAC7B,GAAIA,EAAQ,GAAKA,GAASW,EAAQE,OAAON,OAAQ,OAAOI,EACxD,IAAIG,EAAOH,EAAQG,KACfD,EAASF,EAAQE,OACjBc,EAAoBhB,EAAQgB,kBAC5BsH,EAAU,GAAGtE,OAAO9C,EAAmBf,GAAO,CAACa,GAAoBE,EAAmBhB,EAAOmI,MAAM,EAAGhJ,KACtGkJ,EAAarI,EAAOb,GACpBmJ,EAAYtI,EAAOmI,MAAMhJ,EAAQ,GACrC,OAAO,EAAItB,EAASO,YAAYgK,EAASC,EAAYC,GAIvD,SAASlJ,EAAWU,EAASX,GAC3B,GAAIA,EAAQ,GAAKA,GAASW,EAAQG,KAAKP,OAAQ,OAAOI,EACtD,IAAIG,EAAOH,EAAQG,KACfD,EAASF,EAAQE,OACjBc,EAAoBhB,EAAQgB,kBAC5BsH,EAAUnI,EAAKkI,MAAM,EAAGhJ,GACxBmJ,EAAY,GAAGxE,OAAO9C,EAAmBf,EAAKkI,MAAMhJ,EAAQ,IAAK,CAAC2B,GAAoBE,EAAmBhB,IACzGqI,EAAapI,EAAKd,GACtB,OAAO,EAAItB,EAASO,YAAYgK,EAASC,EAAYC,GAIvD,SAASjJ,EAAKS,EAASyI,GACrB,OAAIA,EAAI,EAAUrJ,EAAaY,EAASyI,EAAI,GACxCA,EAAI,EAAUnJ,EAAWU,EAASA,EAAQG,KAAKP,OAAS6I,GACrDzI,EAIT,SAASgG,EAAgCE,EAAYV,GACnD,OAAOA,EAAiBlF,QAAQ4F,IAAe,EAAIA,GAAcA,I,kCC9FnE,mYASa,EAAkB,kBAGlB,EAAoB,oBAuBpB,EAAY,SACvB,EACA,EACA,EACA,G,WADA,aAGA,IAAM,EACM,IAAV,EACI,EAAM,GACmC,QAAzC,IAAM,YAAY,KAAK,IAAI,EAAG,EAAQ,WAAG,QAAI,EAAM,GACzD,MAAO,CACL,KAAM,EACN,GAAI,IAAI,KACR,OAAQ,EAAK,GACb,QAAO,EACP,MAAK,EACL,SAAQ,IAgBC,EAAkB,SAC7B,EACA,EACA,GACG,SAAU,EAAM,EAAO,EAAO,IAA9B,UAcQ,EAAmB,SAC9B,EACA,EACA,GACG,SAAU,EAAM,EAAO,EAAO,IAA9B,WAcQ,EAAiB,SAC5B,EACA,EACA,GACG,SAAU,EAAM,EAAO,EAAO,IAA9B,QAcQ,EAAiB,SAC5B,EACA,EACA,GACG,SAAU,EAAM,EAAO,EAAO,IAA9B,QAaQ,EAAsB,SAAC,EAAmB,GACnD,OAAF,EAAU,EAAM,EAAO,EAAG,IAAa,cAa5B,EAAuB,SAAC,EAAmB,GACpD,OAAF,EAAU,EAAM,EAAO,EAAG,IAAa,eAiB5B,EAAW,SAAC,GAA+B,MAAC,CACvD,KAjKuB,YAkKvB,GAAI,IAAI,KACR,GAAE,IAYS,EAAa,WAAwB,MAAC,CACjD,KAAM,EACN,GAAI,IAAI,OAiBG,EAAiB,WAA4B,MAAC,CACzD,KAlM8B,mBAmM9B,GAAI,IAAI,Q,gsBCpMG,EAAe,IAAM,cAAc,MAEnC,EAAgB,SAAC,GAAE,MAAK,QAAK,EAAK,IAAjB,WAAwB,OACpD,kBAAC,IAAQ,GAAC,MAAO,EAAO,QAAS,GAAkB,KAIxC,GADW,YAA2B,GACxB,YACzB,IAGW,EAAc,YAA8B,I,iCCrBzD,0bAAO,IAAM,EAAgC,gCAChC,EAAmB,mBAEnB,EAAuB,UACvB,EAAsB,SACtB,EAAoB,OACpB,EAAsB,SACtB,EAAwB,WACxB,EAAmB,mBAQnB,EAAuB,EAsB9B,EACJ,SAAC,EAAoB,GACrB,kBAA4B,MAAC,CAC3B,KAAM,EACN,GAAI,IAAI,KACR,KAAI,EACJ,gBAAe,KAGN,EAA4B,SACvC,GACoC,MAAC,CACrC,KAAM,EACN,GAAI,IAAI,KACR,gBAAe,IAMJ,EAAU,SACrB,EACA,GACyB,MAAC,CAC1B,KAAM,EACN,GAAI,IAAI,KACR,KAAI,EACJ,gBAAe,IAWJ,GALa,EAAe,GAKjB,EAAe,IAmB1B,GAdc,EAAe,GAKhB,EAAe,GAKf,EAAe,GAIlB,SAAC,GAAgC,MAAC,CACvD,KAAM,EACN,KAAI,M,6kCC5FA,EAAW,SAAX,EACJ,EACA,EACA,G,aAAA,c,IAEA,IAAmB,WAAK,8BAAE,CAArB,IAAM,EAAI,QACb,GAAI,EAAK,KAAO,EACd,MAAO,CACL,KAAI,EACJ,UAAS,GAIb,GAAI,YAAM,IAAS,EAAK,OAEtB,GADM,EAAQ,EAAS,EAAK,MAAO,EAAM,GAAG,GAAI,EAAK,IAAS,IAE5D,OAAO,OAEJ,IAAK,YAAM,IAAS,EAAK,KAAM,CACpC,IAAM,EACN,GADM,EAAQ,EAAS,EAAK,KAAM,EAAM,GAAG,GAAI,EAAK,IAAS,IAE3D,OAAO,I,iGAIX,OAAK,MAcI,EAAkB,SAAC,EAAkB,G,MAO9C,GAHG,EAAM,UAAU,cACnB,EAAM,UAAU,YAAc,IAE5B,EAAM,UAAU,YAAY,GAE1B,OAAG,EAAM,UAAU,YAAY,GAEnC,IAAI,EAAS,EACb,C,OAE6B,QAAtB,IAAM,UAAU,cAAM,eAAE,SAAO,CAC9B,QAAI,KAGZ,GAIA,OAFA,EAAI,UAAU,YAAY,GAAU,EAE/B,GAGI,EAAe,SAAC,GAAgB,QACzC,OAAsB,QAAxB,EAAgB,QAAhB,EAAK,OAAL,QAAK,IAAL,OAAK,EAAL,EAAO,iBAAS,eAAE,cAAM,eAAE,U,iCCnE5B,IAAY,EAHZ,oEAGA,SAAY,GACV,oBACEwC,EAAF,oBACEA,EAAF,cACEA,EAAF,cACEA,EAAF,0BACEA,EAAF,4BANF,CAAY,MAAY,KAYjB,IAAM,GAAe,G,8GCdrB,SAASC,EAAQC,GACtB,IAAIC,EAAS,KAUb,OARe,WAKb,OAJc,MAAVA,IACFA,EAASD,KAGJC,GCPX,SAASC,EAAkBpB,EAAQqB,GAAS,IAAK,IAAI3H,EAAI,EAAGA,EAAI2H,EAAMnJ,OAAQwB,IAAK,CAAE,IAAI4H,EAAaD,EAAM3H,GAAI4H,EAAWtL,WAAasL,EAAWtL,aAAc,EAAOsL,EAAWhB,cAAe,EAAU,UAAWgB,IAAYA,EAAWf,UAAW,GAAM3K,OAAOC,eAAemK,EAAQsB,EAAWnC,IAAKmC,IAI7S,SAASnB,EAAgBrJ,EAAKqI,EAAKpJ,GAAiK,OAApJoJ,KAAOrI,EAAOlB,OAAOC,eAAeiB,EAAKqI,EAAK,CAAEpJ,MAAOA,EAAOC,YAAY,EAAMsK,cAAc,EAAMC,UAAU,IAAkBzJ,EAAIqI,GAAOpJ,EAAgBe,E,0JAGpM,IAAIyK,EAAiC,WAC1C,SAASA,EAAkBC,IAV7B,SAAyBC,EAAUC,GAAe,KAAMD,aAAoBC,GAAgB,MAAM,IAAIrH,UAAU,qCAW5GsH,CAAgBC,KAAML,GAEtBpB,EAAgByB,KAAM,UAAW,IAEjCzB,EAAgByB,KAAM,wBAAoB,GAE1CA,KAAKJ,iBAAmBA,EAb5B,IAAsBE,EAAaG,EAAYC,EA4C7C,OA5CoBJ,EAgBPH,GAhBoBM,EAgBD,CAAC,CAC/B1C,IAAK,QACLpJ,MAAO,SAAegM,GACpB,IAAIC,EAAQJ,KAERK,EAAiBL,KAAKM,QAAQhK,OAOlC,OADA0J,KAAKM,QDRJ,SAAeC,EAAQC,GAC5B,IAAI3H,EAAM,IAAI4H,IAEVC,EAAa,SAAoBC,GACnC,OAAO9H,EAAI+H,IAAID,IAGjBJ,EAAOjC,QAAQoC,GACfF,EAAOlC,QAAQoC,GACf,IAAInB,EAAS,GAIb,OAHA1G,EAAIyF,SAAQ,SAAUf,GACpB,OAAOgC,EAAOpB,KAAKZ,MAEdgC,ECLYsB,CAAMb,KAAKM,QAAQ/E,QAJd,SAAuBuF,GACzC,OAAOV,EAAMR,iBAAiBkB,MAAWA,EAAKC,UAAYD,EAAKC,SAASZ,OAGjB,CAACA,IAChC,IAAnBE,GAAwBL,KAAKM,QAAQhK,OAAS,IAEtD,CACDiH,IAAK,QACLpJ,MAAO,SAAe6M,GACpB,IDnBkBC,EAAON,ECmBrBN,EAAiBL,KAAKM,QAAQhK,OAElC,OADA0J,KAAKM,SDpBaW,ECoBKjB,KAAKM,QAAQ/E,OAAOyE,KAAKJ,kBDpBvBe,ECoB0CK,EDnBhEC,EAAM1F,QAAO,SAAUzD,GAC5B,OAAOA,IAAM6I,MCmBJN,EAAiB,GAA6B,IAAxBL,KAAKM,QAAQhK,SAE3C,CACDiH,IAAK,QACLpJ,MAAO,WACL6L,KAAKM,QAAU,QAxCyDd,EAAkBM,EAAY1H,UAAW6H,GAAiBC,GAAaV,EAAkBM,EAAaI,GA4C3KP,EAvCmC,GCRjCuB,EAAY7B,GAAQ,WAC7B,MAAO,WAAW8B,KAAKC,UAAUC,cAExBC,EAAWjC,GAAQ,WAC5B,OAAOkC,QAAQC,OAAOC,WCHxB,SAASjC,EAAkBpB,EAAQqB,GAAS,IAAK,IAAI3H,EAAI,EAAGA,EAAI2H,EAAMnJ,OAAQwB,IAAK,CAAE,IAAI4H,EAAaD,EAAM3H,GAAI4H,EAAWtL,WAAasL,EAAWtL,aAAc,EAAOsL,EAAWhB,cAAe,EAAU,UAAWgB,IAAYA,EAAWf,UAAW,GAAM3K,OAAOC,eAAemK,EAAQsB,EAAWnC,IAAKmC,IAI7S,SAASnB,EAAgBrJ,EAAKqI,EAAKpJ,GAAiK,OAApJoJ,KAAOrI,EAAOlB,OAAOC,eAAeiB,EAAKqI,EAAK,CAAEpJ,MAAOA,EAAOC,YAAY,EAAMsK,cAAc,EAAMC,UAAU,IAAkBzJ,EAAIqI,GAAOpJ,EAAgBe,EAEpM,IAAIwM,EAAoC,WAC7C,SAASA,EAAqBC,EAAIC,IATpC,SAAyB/B,EAAUC,GAAe,KAAMD,aAAoBC,GAAgB,MAAM,IAAIrH,UAAU,qCAU5GsH,CAAgBC,KAAM0B,GAEtBnD,EAAgByB,KAAM,UAAM,GAE5BzB,EAAgByB,KAAM,UAAM,GAE5BzB,EAAgByB,KAAM,WAAO,GAE7BzB,EAAgByB,KAAM,WAAO,GAE7BzB,EAAgByB,KAAM,WAAO,GAM7B,IAJA,IAAI1J,EAASqL,EAAGrL,OAEZuL,EAAU,GAEL/J,EAAI,EAAGA,EAAIxB,EAAQwB,IAC1B+J,EAAQ1D,KAAKrG,GAGf+J,EAAQC,MAAK,SAAUC,EAAGC,GACxB,OAAOL,EAAGI,GAAKJ,EAAGK,IAAM,EAAI,KAS9B,IANA,IAGIC,EACAC,EAJAC,EAAM,GACNC,EAAM,GACNC,EAAK,GAIAC,EAAK,EAAGA,EAAKhM,EAAS,EAAGgM,IAChCL,EAAKN,EAAGW,EAAK,GAAKX,EAAGW,GACrBJ,EAAKN,EAAGU,EAAK,GAAKV,EAAGU,GACrBF,EAAIjE,KAAK8D,GACTE,EAAIhE,KAAK+D,GACTG,EAAGlE,KAAK+D,EAAKD,GAMf,IAFA,IAAIM,EAAM,CAACF,EAAG,IAELG,EAAM,EAAGA,EAAMJ,EAAI9L,OAAS,EAAGkM,IAAO,CAC7C,IAAIC,EAAKJ,EAAGG,GACRE,EAAQL,EAAGG,EAAM,GAErB,GAAIC,EAAKC,GAAS,EAChBH,EAAIpE,KAAK,OACJ,CACL8D,EAAKG,EAAII,GACT,IAAIG,EAASP,EAAII,EAAM,GACnBI,EAASX,EAAKU,EAClBJ,EAAIpE,KAAK,EAAIyE,IAAWA,EAASD,GAAUF,GAAMG,EAASX,GAAMS,KAIpEH,EAAIpE,KAAKkE,EAAGA,EAAG/L,OAAS,IAMxB,IAJA,IAEIuM,EAFAC,EAAM,GACNC,EAAM,GAGDC,EAAM,EAAGA,EAAMT,EAAIjM,OAAS,EAAG0M,IAAO,CAC7CH,EAAIR,EAAGW,GACP,IAAIC,EAAKV,EAAIS,GACTE,EAAQ,EAAId,EAAIY,GAEhBG,EAAUF,EAAKV,EAAIS,EAAM,GAAKH,EAAIA,EAEtCC,EAAI3E,MAAM0E,EAAII,EAAKE,GAAWD,GAC9BH,EAAI5E,KAAKgF,EAAUD,EAAQA,GAG7BlD,KAAK2B,GAAKA,EACV3B,KAAK4B,GAAKA,EACV5B,KAAKuC,IAAMA,EACXvC,KAAK8C,IAAMA,EACX9C,KAAK+C,IAAMA,EAlFf,IAAsBjD,EAAaG,EAAYC,EA8H7C,OA9HoBJ,EAqFP4B,GArFoBzB,EAqFE,CAAC,CAClC1C,IAAK,cACLpJ,MAAO,SAAqBiP,GAC1B,IAAIzB,EAAK3B,KAAK2B,GACVC,EAAK5B,KAAK4B,GACVW,EAAMvC,KAAKuC,IACXO,EAAM9C,KAAK8C,IACXC,EAAM/C,KAAK+C,IAEXjL,EAAI6J,EAAGrL,OAAS,EAEpB,GAAI8M,IAAMzB,EAAG7J,GACX,OAAO8J,EAAG9J,GAQZ,IAJA,IAEIuL,EAFAC,EAAM,EACNC,EAAOR,EAAIzM,OAAS,EAGjBgN,GAAOC,GAAM,CAElB,IAAIC,EAAQ7B,EADZ0B,EAAMI,KAAKC,MAAM,IAAOJ,EAAMC,KAG9B,GAAIC,EAAQJ,EACVE,EAAMD,EAAM,MACP,MAAIG,EAAQJ,GAGjB,OAAOxB,EAAGyB,GAFVE,EAAOF,EAAM,GAQjB,IAAIM,EAAOP,EAAIzB,EAFf7J,EAAI2L,KAAKG,IAAI,EAAGL,IAGZM,EAASF,EAAOA,EACpB,OAAO/B,EAAG9J,GAAKyK,EAAIzK,GAAK6L,EAAOb,EAAIhL,GAAK+L,EAASd,EAAIjL,GAAK6L,EAAOE,OA1HOrE,EAAkBM,EAAY1H,UAAW6H,GAAiBC,GAAaV,EAAkBM,EAAaI,GA8H3KwB,EA1HsC,GCLxC,SAASoC,EAAoBhD,GAClC,IAAIiD,EAFa,IAERjD,EAAKkD,SAA4BlD,EAAOA,EAAKmD,cAEtD,IAAKF,EACH,OAAO,KAGT,IAAIG,EAAwBH,EAAGI,wBAC3BC,EAAMF,EAAsBE,IAGhC,MAAO,CACLhB,EAHSc,EAAsBG,KAI/BC,EAAGF,GAGA,SAASG,EAAqBC,GACnC,MAAO,CACLpB,EAAGoB,EAAEC,QACLH,EAAGE,EAAEE,SAyBF,SAASC,EAAqBC,EAAYC,EAAaC,EAAcC,EAAaC,GAGvF,IAAIC,EAxBN,SAAqBnE,GACnB,IAAIoE,EAEJ,MAAyB,QAAlBpE,EAAKqE,WAAuBjE,OAAwE,QAAtDgE,EAAwBE,SAASC,uBAAuD,IAA1BH,GAAoCA,EAAsBnE,SAASD,KAqBxKwE,CAAYT,GAEtBU,EAAkCzB,EADhBmB,EAAUL,EAAaC,GAEzCW,EAAwB,CAC1BpC,EAAG0B,EAAa1B,EAAImC,EAAgCnC,EACpDkB,EAAGQ,EAAaR,EAAIiB,EAAgCjB,GAElDmB,EAAcb,EAAWc,YACzBC,EAAef,EAAWgB,aAC1BC,EAAUd,EAAYc,QACtBC,EAAUf,EAAYe,QAEtBC,EA9BN,SAA4Bd,EAASJ,EAAaY,EAAaE,GAC7D,IAAIK,EAAmBf,EAAUJ,EAAYoB,MAAQR,EACjDS,EAAoBjB,EAAUJ,EAAYsB,OAASR,EAOvD,OALIrE,KAAc2D,IAChBiB,GAAqB1E,OAAO4E,iBAC5BJ,GAAoBxE,OAAO4E,kBAGtB,CACLJ,iBAAkBA,EAClBE,kBAAmBA,GAmBKG,CAAmBpB,EAASJ,EAAaY,EAAaE,GAC5EK,EAAmBD,EAAoBC,iBACvCE,EAAoBH,EAAoBG,kBA4BxCI,EAAUtB,EAAYsB,QACtBC,EAAUvB,EAAYuB,QAEtBC,EAA8B,IAAZD,GAAiBA,EACvC,MAAO,CACLnD,EAHgC,IAAZkD,GAAiBA,EAGhBA,EAbF,IAAI5E,EAAqB,CAAC,EAAG,GAAK,GAAI,CACzD8D,EAAsBpC,EACtBoC,EAAsBpC,EAAIqC,EAAcO,EACxCR,EAAsBpC,EAAI4C,EAAmBP,IACzBgB,YAAYZ,GAUhCvB,EAAGkC,EAAkBD,EAhCA,WACrB,IAIIjC,EAJe,IAAI5C,EAAqB,CAAC,EAAG,GAAK,GAAI,CACzD8D,EAAsBlB,EACtBkB,EAAsBlB,EAAIqB,EAAeO,EACzCV,EAAsBlB,EAAI4B,EAAoBP,IACzBc,YAAYX,GAOjC,OALIxE,KAAc2D,IAEhBX,IAAM9C,OAAO4E,iBAAmB,GAAKF,GAGhC5B,EAoBwBoC,IClG5B,ICAHC,EDAOC,EAAO,kBACPC,EAAM,iBACNC,EAAO,kBACPC,EAAO,kBEHX,SAASC,EAAwBC,EAAcC,EAAY9Q,GAChE,IAAImJ,EAAS2H,EAAW9P,QAAO,SAAU+P,EAAaC,GACpD,OAAOD,GAAeF,EAAaI,QAAQD,KAC1C,IACH,OAAiB,MAAV7H,EAAiBA,EAASnJ,EDFnC,SAASmI,EAAgBrJ,EAAKqI,EAAKpJ,GAAiK,OAApJoJ,KAAOrI,EAAOlB,OAAOC,eAAeiB,EAAKqI,EAAK,CAAEpJ,MAAOA,EAAOC,YAAY,EAAMsK,cAAc,EAAMC,UAAU,IAAkBzJ,EAAIqI,GAAOpJ,EAAgBe,EAIpM,IAAIoS,GAA8C/I,EAAzBoI,EAAqB,GAAwCY,EAAkB,CAC7GC,iBAAkB,CAChBC,MAAO,SAAeR,GACpB,OAAOzQ,MAAM4B,UAAU2G,MAAMzG,KAAK2O,EAAaQ,QAEjDxG,MAAO,SAAegG,GACpB,OAAOA,EAAahG,OAEtBgG,aAAc,SAAsBS,GAClC,OAAOA,IAGXC,aAAc,CAAC,WACbpJ,EAAgBoI,EAAoBY,EAAkB,CACxDC,iBAAkB,CAChBI,KAAM,SAAcX,EAAcU,GAChC,OAAOX,EAAwBC,EAAcU,EAAc,KAE7DV,aAAc,SAAsBY,GAClC,OAAOA,IAGXF,aAAc,CAAC,OAAQ,eACrBpJ,EAAgBoI,EAAoBY,EAAiB,CACvDC,iBAAkB,CAChBM,KAAM,SAAcb,EAAcU,GAChC,OAAOX,EAAwBC,EAAcU,EAAc,IAAII,MAAM,OAEvEd,aAAc,SAAsBe,GAClC,OAAOA,IAGXL,aAAc,CAAC,MAAO,mBACpBpJ,EAAgBoI,EAAoBY,EAAkB,CACxDC,iBAAkB,CAChB7M,KAAM,SAAcsM,EAAcU,GAChC,OAAOX,EAAwBC,EAAcU,EAAc,KAE7DV,aAAc,SAAsBgB,GAClC,OAAOA,IAGXN,aAAc,CAAC,OAAQ,gBACrBhB,GE/CJ,SAASnH,EAAkBpB,EAAQqB,GAAS,IAAK,IAAI3H,EAAI,EAAGA,EAAI2H,EAAMnJ,OAAQwB,IAAK,CAAE,IAAI4H,EAAaD,EAAM3H,GAAI4H,EAAWtL,WAAasL,EAAWtL,aAAc,EAAOsL,EAAWhB,cAAe,EAAU,UAAWgB,IAAYA,EAAWf,UAAW,GAAM3K,OAAOC,eAAemK,EAAQsB,EAAWnC,IAAKmC,IAI7S,SAASnB,EAAgBrJ,EAAKqI,EAAKpJ,GAAiK,OAApJoJ,KAAOrI,EAAOlB,OAAOC,eAAeiB,EAAKqI,EAAK,CAAEpJ,MAAOA,EAAOC,YAAY,EAAMsK,cAAc,EAAMC,UAAU,IAAkBzJ,EAAIqI,GAAOpJ,EAAgBe,EAEpM,IAAIgT,EAAgC,WACzC,SAASA,EAAiB7M,IAT5B,SAAyBwE,EAAUC,GAAe,KAAMD,aAAoBC,GAAgB,MAAM,IAAIrH,UAAU,qCAU5GsH,CAAgBC,KAAMkI,GAEtB3J,EAAgByB,KAAM,YAAQ,GAE9BzB,EAAgByB,KAAM,cAAU,GAEhCA,KAAK3E,OAASA,EACd2E,KAAKW,KAAO,GACZX,KAAKmI,8BAdT,IAAsBrI,EAAaG,EAAYC,EAwE7C,OAxEoBJ,EAiBPoI,GAjBoBjI,EAiBF,CAAC,CAC9B1C,IAAK,8BACLpJ,MAAO,WACL,IAAIiM,EAAQJ,KAEZhM,OAAO+J,KAAKiC,KAAK3E,OAAOmM,kBAAkBlJ,SAAQ,SAAU8J,GAC1DpU,OAAOC,eAAemM,EAAMO,KAAMyH,EAAU,CAC1C1J,cAAc,EACdtK,YAAY,EACZC,IAAK,WAGH,OADA+E,QAAQiP,KAAK,mCAAmC3N,OAAO0N,EAAU,4BAC1D,aAKd,CACD7K,IAAK,mBACLpJ,MAAO,SAA0B8S,GAC/B,IAAIqB,EAAStI,KAEb,GAAIiH,EAAc,CAChB,IAAIsB,EAAgB,GACpBvU,OAAO+J,KAAKiC,KAAK3E,OAAOmM,kBAAkBlJ,SAAQ,SAAU8J,GAC1DG,EAAcH,GAAY,CACxBjU,MAAOmU,EAAOjN,OAAOmM,iBAAiBY,GAAUnB,EAAcqB,EAAOjN,OAAOsM,cAC5EjJ,cAAc,EACdtK,YAAY,MAGhBJ,OAAOyK,iBAAiBuB,KAAKW,KAAM4H,MAGtC,CACDhL,IAAK,UACLpJ,MAAO,WACL,OAAO,IAER,CACDoJ,IAAK,YACLpJ,MAAO,WACL,OAAO6L,KAAKW,OAEb,CACDpD,IAAK,aACLpJ,MAAO,SAAoBqU,EAASC,GAClC,OAAOA,IAAWD,EAAQE,gBAE3B,CACDnL,IAAK,UACLpJ,MAAO,iBApEmEqL,EAAkBM,EAAY1H,UAAW6H,GAAiBC,GAAaV,EAAkBM,EAAaI,GAwE3KgI,EApEkC,GCDpC,SAASS,EAAoB1B,GAClC,IAAKA,EACH,OAAO,KAGT,IAAI2B,EAAoBpS,MAAM4B,UAAU2G,MAAMzG,KAAK2O,EAAa4B,OAAS,IACzE,OAAO7U,OAAO+J,KAAKuJ,GAAmB/L,QAAO,SAAUuN,GAErD,OADmBxB,EAAkBwB,GAAgBnB,aACjChL,MAAK,SAAUoM,GACjC,OAAOH,EAAkB5R,QAAQ+R,IAAM,QAExC,IAAM,KChBX,SAASvJ,EAAkBpB,EAAQqB,GAAS,IAAK,IAAI3H,EAAI,EAAGA,EAAI2H,EAAMnJ,OAAQwB,IAAK,CAAE,IAAI4H,EAAaD,EAAM3H,GAAI4H,EAAWtL,WAAasL,EAAWtL,aAAc,EAAOsL,EAAWhB,cAAe,EAAU,UAAWgB,IAAYA,EAAWf,UAAW,GAAM3K,OAAOC,eAAemK,EAAQsB,EAAWnC,IAAKmC,IAI7S,SAASnB,EAAgBrJ,EAAKqI,EAAKpJ,GAAiK,OAApJoJ,KAAOrI,EAAOlB,OAAOC,eAAeiB,EAAKqI,EAAK,CAAEpJ,MAAOA,EAAOC,YAAY,EAAMsK,cAAc,EAAMC,UAAU,IAAkBzJ,EAAIqI,GAAOpJ,EAAgBe,EAEpM,IAAI8T,EAA6B,WACtC,SAASA,EAAcC,EAAeC,IATxC,SAAyBrJ,EAAUC,GAAe,KAAMD,aAAoBC,GAAgB,MAAM,IAAIrH,UAAU,qCAU5GsH,CAAgBC,KAAMgJ,GAEtBzK,EAAgByB,KAAM,gBAAiB,MAEvCzB,EAAgByB,KAAM,qBAAiB,GAEvCzB,EAAgByB,KAAM,mBAAe,GAErCA,KAAKiJ,cAAgBA,EACrBjJ,KAAKmJ,YAAcD,EAfvB,IAAsBpJ,EAAaG,EAAYC,EAmD7C,OAnDoBJ,EAkBPkJ,GAlBoB/I,EAkBL,CAAC,CAC3B1C,IAAK,SACLlJ,IAAK,WACH,OAAI2L,KAAKiJ,cACAjJ,KAAKiJ,cACe,qBAAXzH,OACTA,YADF,IAMR,CACDjE,IAAK,WACLlJ,IAAK,WACH,IAAI+U,EAEJ,OAAmD,QAA9CA,EAAsBpJ,KAAKiJ,qBAAmD,IAAxBG,GAAkCA,EAAoBhE,SACxGpF,KAAKiJ,cAAc7D,SACjBpF,KAAKwB,OACPxB,KAAKwB,OAAO4D,cAEnB,IAGH,CACD7H,IAAK,cACLlJ,IAAK,WACH,IAAIgV,EAEJ,OAAmD,QAA1CA,EAAoBrJ,KAAKmJ,mBAA+C,IAAtBE,OAA+B,EAASA,EAAkBC,cAAgBtJ,KAAKwB,YA/ClEhC,EAAkBM,EAAY1H,UAAW6H,GAAiBC,GAAaV,EAAkBM,EAAaI,GAmD3K8I,EA/C+B,GCRxC,SAASpL,EAAQC,EAAQC,GAAkB,IAAIC,EAAO/J,OAAO+J,KAAKF,GAAS,GAAI7J,OAAOgK,sBAAuB,CAAE,IAAIC,EAAUjK,OAAOgK,sBAAsBH,GAAaC,IAAkBG,EAAUA,EAAQ1C,QAAO,SAAU2C,GAAO,OAAOlK,OAAOsJ,yBAAyBO,EAAQK,GAAK9J,eAAkB2J,EAAKI,KAAKnE,MAAM+D,EAAME,GAAY,OAAOF,EAElV,SAASzC,EAAc8C,GAAU,IAAK,IAAItG,EAAI,EAAGA,EAAIzB,UAAUC,OAAQwB,IAAK,CAAE,IAAIuG,EAAyB,MAAhBhI,UAAUyB,GAAazB,UAAUyB,GAAK,GAAQA,EAAI,EAAK8F,EAAQ5J,OAAOqK,IAAS,GAAMC,SAAQ,SAAUf,GAAOgB,EAAgBH,EAAQb,EAAKc,EAAOd,OAAsBvJ,OAAOwK,0BAA6BxK,OAAOyK,iBAAiBL,EAAQpK,OAAOwK,0BAA0BH,IAAmBT,EAAQ5J,OAAOqK,IAASC,SAAQ,SAAUf,GAAOvJ,OAAOC,eAAemK,EAAQb,EAAKvJ,OAAOsJ,yBAAyBe,EAAQd,OAAe,OAAOa,EAI7gB,SAASoB,EAAkBpB,EAAQqB,GAAS,IAAK,IAAI3H,EAAI,EAAGA,EAAI2H,EAAMnJ,OAAQwB,IAAK,CAAE,IAAI4H,EAAaD,EAAM3H,GAAI4H,EAAWtL,WAAasL,EAAWtL,aAAc,EAAOsL,EAAWhB,cAAe,EAAU,UAAWgB,IAAYA,EAAWf,UAAW,GAAM3K,OAAOC,eAAemK,EAAQsB,EAAWnC,IAAKmC,IAI7S,SAASnB,EAAgBrJ,EAAKqI,EAAKpJ,GAAiK,OAApJoJ,KAAOrI,EAAOlB,OAAOC,eAAeiB,EAAKqI,EAAK,CAAEpJ,MAAOA,EAAOC,YAAY,EAAMsK,cAAc,EAAMC,UAAU,IAAkBzJ,EAAIqI,GAAOpJ,EAAgBe,EAOpM,IAAIqU,EAAgC,WAGzC,SAASA,EAAiBC,EAASP,EAAeC,GAChD,IAAI9I,EAAQJ,MAjBhB,SAAyBH,EAAUC,GAAe,KAAMD,aAAoBC,GAAgB,MAAM,IAAIrH,UAAU,qCAmB5GsH,CAAgBC,KAAMuJ,GAEtBhL,EAAgByB,KAAM,eAAW,GAEjCzB,EAAgByB,KAAM,eAAW,GAEjCzB,EAAgByB,KAAM,eAAW,GAEjCzB,EAAgByB,KAAM,gBAAY,GAElCzB,EAAgByB,KAAM,yBAAqB,GAE3CzB,EAAgByB,KAAM,qBAAsB,IAAIyJ,KAEhDlL,EAAgByB,KAAM,2BAA4B,IAAIyJ,KAEtDlL,EAAgByB,KAAM,cAAe,IAAIyJ,KAEzClL,EAAgByB,KAAM,oBAAqB,IAAIyJ,KAE/ClL,EAAgByB,KAAM,qBAAsB,MAE5CzB,EAAgByB,KAAM,gBAAiB,IAEvCzB,EAAgByB,KAAM,qBAAsB,IAE5CzB,EAAgByB,KAAM,sBAAuB,MAE7CzB,EAAgByB,KAAM,sBAAuB,MAE7CzB,EAAgByB,KAAM,wBAAyB,MAE/CzB,EAAgByB,KAAM,iBAAiB,GAEvCzB,EAAgByB,KAAM,wBAAyB,MAE/CzB,EAAgByB,KAAM,sBAAuB,MAE7CzB,EAAgByB,KAAM,oBAAqB,MAE3CzB,EAAgByB,KAAM,mBAAoB,MAE1CzB,EAAgByB,KAAM,aAAc,MAEpCzB,EAAgByB,KAAM,yBAAyB,SAAU0J,GACvD,IAAIrL,EAAS+B,EAAMuJ,YAAYtV,IAAIqV,GAEnC,OAAOrL,GAAUyF,EAAoBzF,IAAW,QAGlDE,EAAgByB,KAAM,qBAAqB,WACpCI,EAAMwJ,yBAIXxJ,EAAMtJ,QAAQ+S,UAEVzJ,EAAM0J,qBACR1J,EAAM2J,SAASC,aAAa5J,EAAM0J,qBAGpC1J,EAAM0J,oBAAsB,KAC5B1J,EAAM6J,oBAAsB,SAG9B1L,EAAgByB,KAAM,oBAAoB,SAAUc,GAElD,OAAOS,QAAQT,GAAQV,EAAMgF,UAAYhF,EAAMgF,SAAS8E,MAAQ9J,EAAMgF,SAAS8E,KAAKnJ,SAASD,OAG/FvC,EAAgByB,KAAM,oCAAoC,WACxD,IAAIc,EAAOV,EAAM+J,sBAEL,MAARrJ,GAAgBV,EAAMR,iBAAiBkB,IAIvCV,EAAMgK,8BAAgChK,EAAMoI,QAAQ6B,cACtDjK,EAAMtJ,QAAQ+S,aAIlBtL,EAAgByB,KAAM,6BAA6B,WACjDI,EAAMgK,6BAENhK,EAAMkK,mBAAqB,MAG7B/L,EAAgByB,KAAM,sBAAsB,SAAUwE,GACpD,IAAIA,EAAE+F,iBAAN,CAIA,IAAID,EAAqBlK,EAAMkK,mBAC/BlK,EAAMkK,mBAAqB,KAC3B,IAAIxF,EAAeP,EAAqBC,GAEpCpE,EAAMoI,QAAQ6B,cAChBjK,EAAMtJ,QAAQ+S,UAIhBzJ,EAAMtJ,QAAQ0T,UAAUF,GAAsB,GAAI,CAChDG,eAAe,EACfC,sBAAuBtK,EAAMsK,sBAC7B5F,aAAcA,IAGhB,IAAImC,EAAezC,EAAEyC,aACjB0D,EAAahC,EAAoB1B,GAErC,GAAI7G,EAAMoI,QAAQ6B,aAAc,CAC9B,GAAIpD,GAAqD,oBAA9BA,EAAa2D,aAA6B,CAInE,IAAIlB,EAAWtJ,EAAMoI,QAAQE,cAEzB9D,EAAaxE,EAAMuJ,YAAYtV,IAAIqV,GAEnC7E,EAAczE,EAAMyK,mBAAmBxW,IAAIqV,IAAa9E,EAE5D,GAAIC,EAAa,CACf,IAAIiG,EAAwB1K,EAAM2K,qCAc9BC,EAAoBrG,EAAqBC,EAAYC,EAAaC,EARpD,CAChBe,QANYiF,EAAsBjF,QAOlCC,QANYgF,EAAsBhF,SAQlB,CAChBQ,QARYwE,EAAsBxE,QASlCC,QARYuE,EAAsBvE,UAWpCU,EAAa2D,aAAa/F,EAAamG,EAAkB5H,EAAG4H,EAAkB1G,IAIlF,IAEmB,OAAjB2C,QAA0C,IAAjBA,GAAmCA,EAAagE,QAAQ,mBAAoB,IACrG,MAAOC,IAKT9K,EAAM+K,yBAAyB3G,EAAEpG,QAGJgC,EAAM2K,qCACeK,qBAsBhDhL,EAAMtJ,QAAQuU,oBAddC,YAAW,WACT,OAAOlL,EAAMtJ,QAAQuU,sBACpB,QAcA,GAAIV,EAETvK,EAAMmL,oBAAoBZ,OACrB,IAAI1D,IAAiBA,EAAa4B,QAAUrE,EAAEpG,SAAWoG,EAAEpG,OAAOoN,eAAiBhH,EAAEpG,OAAOoN,aAAa,cAI9G,OAGAhH,EAAEiH,sBAINlN,EAAgByB,KAAM,2BAA2B,WAC3CI,EAAMgK,8BAAgChK,EAAMoI,QAAQ6B,cAItDjK,EAAMtJ,QAAQ+S,aAIlBtL,EAAgByB,KAAM,6BAA6B,SAAUwE,GAK3D,GAJApE,EAAMsL,mBAAqB,GAERtL,EAAMuL,kBAAkBC,MAAMpH,EAAEpG,UAE9BgC,EAAMoI,QAAQ6B,aAAnC,CAIA,IAAIpD,EAAezC,EAAEyC,aACjB0D,EAAahC,EAAoB1B,GAEjC0D,GAEFvK,EAAMmL,oBAAoBZ,EAAY1D,OAI1C1I,EAAgByB,KAAM,sBAAsB,SAAUwE,GACpD,IAAIkH,EAAqBtL,EAAMsL,oBAC/BtL,EAAMsL,mBAAqB,GAEtBtL,EAAMoI,QAAQ6B,gBAKnBjK,EAAMyL,cAAgBrH,EAAEsH,OAIpBJ,EAAmBpV,OAAS,GAC9B8J,EAAMtJ,QAAQiV,MAAML,EAAoB,CACtC5G,aAAcP,EAAqBC,KAIzBkH,EAAmB/O,MAAK,SAAUqP,GAC9C,OAAO5L,EAAMoI,QAAQyD,gBAAgBD,QAKrCxH,EAAEiH,iBAEEjH,EAAEyC,eACJzC,EAAEyC,aAAaiF,WAAa9L,EAAM+L,6BAKxC5N,EAAgByB,KAAM,4BAA4B,WAChDI,EAAMgM,kBAAoB,MAG5B7N,EAAgByB,KAAM,qBAAqB,SAAUwE,GACnD,IAAI4H,EAAoBhM,EAAMgM,kBAG9B,GAFAhM,EAAMgM,kBAAoB,IAErBhM,EAAMoI,QAAQ6B,aASjB,OANA7F,EAAEiH,sBAEEjH,EAAEyC,eACJzC,EAAEyC,aAAaiF,WAAa,SAMhC9L,EAAMyL,cAAgBrH,EAAEsH,OACxB1L,EAAMiM,iBAAmB9H,EAAqBC,GAErB,OAArBpE,EAAMkM,YAAwD,qBAA1BC,wBACtCnM,EAAMkM,WAAaC,uBAAsB,WACnCnM,EAAMoI,QAAQ6B,cAChBjK,EAAMtJ,QAAQiV,MAAMK,GAAqB,GAAI,CAC3CtH,aAAc1E,EAAMiM,mBAIxBjM,EAAMkM,WAAa,UAIRF,GAAqB,IAAIzP,MAAK,SAAUqP,GACrD,OAAO5L,EAAMoI,QAAQyD,gBAAgBD,OAKrCxH,EAAEiH,iBAEEjH,EAAEyC,eACJzC,EAAEyC,aAAaiF,WAAa9L,EAAM+L,yBAE3B/L,EAAMwJ,uBAGfpF,EAAEiH,kBAEFjH,EAAEiH,iBAEEjH,EAAEyC,eACJzC,EAAEyC,aAAaiF,WAAa,YAKlC3N,EAAgByB,KAAM,6BAA6B,SAAUwE,GACvDpE,EAAMwJ,wBACRpF,EAAEiH,iBAGcrL,EAAMuL,kBAAkBa,MAAMhI,EAAEpG,SAM9CgC,EAAMwJ,wBACR0B,YAAW,WACT,OAAOlL,EAAMqM,sBACZ,MAIPlO,EAAgByB,KAAM,wBAAwB,SAAUwE,GAIpD,IAAIkI,GAHNtM,EAAMuM,cAAgB,GAElBvM,EAAMwJ,yBAGRpF,EAAEiH,iBACsD,QAAvDiB,EAAwBtM,EAAM6J,2BAA2D,IAA1ByC,GAA4CA,EAAsBE,iBAAiBpI,EAAEyC,eAC5I0B,EAAoBnE,EAAEyC,eAI/BzC,EAAEiH,iBAGJrL,EAAMuL,kBAAkBkB,WAG1BtO,EAAgByB,KAAM,iBAAiB,SAAUwE,GAC/C,IAAImI,EAAgBvM,EAAMuM,cAC1BvM,EAAMuM,cAAgB,GAEtBvM,EAAMtJ,QAAQiV,MAAMY,EAAe,CACjC7H,aAAcP,EAAqBC,KAGrCpE,EAAMtJ,QAAQgW,KAAK,CACjBZ,WAAY9L,EAAM+L,yBAGhB/L,EAAMwJ,uBACRxJ,EAAMqM,oBACGrM,EAAMoI,QAAQ6B,cACvBjK,EAAMtJ,QAAQ+S,aAIlBtL,EAAgByB,KAAM,qBAAqB,SAAUwE,GACnD,IAAIpG,EAASoG,EAAEpG,OAGgB,oBAApBA,EAAO2O,WAKK,UAAnB3O,EAAO4O,SAA0C,WAAnB5O,EAAO4O,SAA2C,aAAnB5O,EAAO4O,SAA0B5O,EAAO6O,oBAMzGzI,EAAEiH,iBACFrN,EAAO2O,gBAGT/M,KAAKkJ,QAAU,IAAIF,EAAcC,EAAeC,GAChDlJ,KAAKlJ,QAAU0S,EAAQ0D,aACvBlN,KAAKwI,QAAUgB,EAAQ2D,aACvBnN,KAAK+J,SAAWP,EAAQ4D,cACxBpN,KAAK2L,kBAAoB,IAAIhM,EAAkBK,KAAKJ,kBApZxD,IAAsBE,EAAaG,EAAYC,EA6sB7C,OA7sBoBJ,EA2ZPyJ,GA3ZoBtJ,EA2ZF,CAAC,CAC9B1C,IAAK,UACLpJ,MAAO,WACL,IAAIkZ,EAAuBC,EAE3B,MAAO,CACLzC,mBAAoB7K,KAAK6K,mBAAmB0C,KAC5CC,yBAA0BxN,KAAKwN,yBAAyBD,KACxDE,kBAAmBzN,KAAKyN,kBAAkBF,KAC1C5D,YAAa3J,KAAK2J,YAAY4D,KAC9BjD,oBAA2E,QAArD+C,EAAwBrN,KAAKsK,0BAA0D,IAA1B+C,OAAmC,EAASA,EAAsB/W,SAAW,EAChKqW,cAAe3M,KAAK2M,cAAcrW,OAClCoV,mBAAoB1L,KAAK0L,mBAAmBpV,OAC5C8V,mBAAyE,QAApDkB,EAAwBtN,KAAKoM,yBAAyD,IAA1BkB,OAAmC,EAASA,EAAsBhX,SAAW,KAIjK,CACDiH,IAAK,SACLlJ,IAAK,WACH,OAAO2L,KAAKkJ,QAAQ1H,SAErB,CACDjE,IAAK,WACLlJ,IAAK,WACH,OAAO2L,KAAKkJ,QAAQ9D,WAMrB,CACD7H,IAAK,cACLlJ,IAAK,WACH,OAAO2L,KAAKkJ,QAAQI,cAErB,CACD/L,IAAK,QACLpJ,MAAO,WACL,IAAIuZ,EAAO1N,KAAKsJ,YAEhB,QAAa/S,IAATmX,EAAJ,CAIA,GAAIA,EAAKC,yBACP,MAAM,IAAIC,MAAM,oDAGlBF,EAAKC,0BAA2B,EAChC3N,KAAK6N,kBAAkBH,MAExB,CACDnQ,IAAK,WACLpJ,MAAO,WACL,IAWM2Z,EAXFJ,EAAO1N,KAAKsJ,iBAEH/S,IAATmX,IAIJA,EAAKC,0BAA2B,EAChC3N,KAAK+N,qBAAqB/N,KAAKsJ,aAC/BtJ,KAAKoK,6BAEDpK,KAAKgO,sBAG0B,QAAhCF,EAAe9N,KAAKwB,cAAqC,IAAjBsM,GAAmCA,EAAaG,qBAAqBjO,KAAKgO,yBAGtH,CACDzQ,IAAK,qBACLpJ,MAAO,SAA4BuV,EAAU5I,EAAMoI,GACjD,IAAIZ,EAAStI,KAIb,OAFAA,KAAKwN,yBAAyB3U,IAAI6Q,EAAUR,GAC5ClJ,KAAK6K,mBAAmBhS,IAAI6Q,EAAU5I,GAC/B,WACLwH,EAAOuC,mBAAmBqD,OAAOxE,GAEjCpB,EAAOkF,yBAAyBU,OAAOxE,MAG1C,CACDnM,IAAK,oBACLpJ,MAAO,SAA2BuV,EAAU5I,EAAMoI,GAChD,IAAIiF,EAASnO,KAEbA,KAAK2J,YAAY9Q,IAAI6Q,EAAU5I,GAC/Bd,KAAKyN,kBAAkB5U,IAAI6Q,EAAUR,GAErC,IAAIkF,EAAkB,SAAyB5J,GAC7C,OAAO2J,EAAOC,gBAAgB5J,EAAGkF,IAG/B2E,EAAoB,SAA2B7J,GACjD,OAAO2J,EAAOE,kBAAkB7J,IAMlC,OAHA1D,EAAKwN,aAAa,YAAa,QAC/BxN,EAAKyN,iBAAiB,YAAaH,GACnCtN,EAAKyN,iBAAiB,cAAeF,GAC9B,WACLF,EAAOxE,YAAYuE,OAAOxE,GAE1ByE,EAAOV,kBAAkBS,OAAOxE,GAEhC5I,EAAK0N,oBAAoB,YAAaJ,GACtCtN,EAAK0N,oBAAoB,cAAeH,GACxCvN,EAAKwN,aAAa,YAAa,YAGlC,CACD/Q,IAAK,oBACLpJ,MAAO,SAA2B6X,EAAUlL,GAC1C,IAAI2N,EAASzO,KAET0O,EAAkB,SAAyBlK,GAC7C,OAAOiK,EAAOC,gBAAgBlK,EAAGwH,IAG/B2C,EAAiB,SAAwBnK,GAC3C,OAAOiK,EAAOE,eAAenK,EAAGwH,IAG9B4C,EAAa,SAAoBpK,GACnC,OAAOiK,EAAOG,WAAWpK,EAAGwH,IAM9B,OAHAlL,EAAKyN,iBAAiB,YAAaG,GACnC5N,EAAKyN,iBAAiB,WAAYI,GAClC7N,EAAKyN,iBAAiB,OAAQK,GACvB,WACL9N,EAAK0N,oBAAoB,YAAaE,GACtC5N,EAAK0N,oBAAoB,WAAYG,GACrC7N,EAAK0N,oBAAoB,OAAQI,MAGpC,CACDrR,IAAK,oBACLpJ,MAAO,SAA2BiK,GAE3BA,EAAOmQ,mBAIZnQ,EAAOmQ,iBAAiB,YAAavO,KAAK6O,oBAC1CzQ,EAAOmQ,iBAAiB,YAAavO,KAAK8O,2BAA2B,GACrE1Q,EAAOmQ,iBAAiB,UAAWvO,KAAK+O,yBAAyB,GACjE3Q,EAAOmQ,iBAAiB,YAAavO,KAAKgP,oBAC1C5Q,EAAOmQ,iBAAiB,YAAavO,KAAKiP,2BAA2B,GACrE7Q,EAAOmQ,iBAAiB,YAAavO,KAAKkP,2BAA2B,GACrE9Q,EAAOmQ,iBAAiB,WAAYvO,KAAKmP,mBACzC/Q,EAAOmQ,iBAAiB,WAAYvO,KAAKoP,0BAA0B,GACnEhR,EAAOmQ,iBAAiB,OAAQvO,KAAKqP,eACrCjR,EAAOmQ,iBAAiB,OAAQvO,KAAKsP,sBAAsB,MAE5D,CACD/R,IAAK,uBACLpJ,MAAO,SAA8BiK,GAE9BA,EAAOoQ,sBAIZpQ,EAAOoQ,oBAAoB,YAAaxO,KAAK6O,oBAC7CzQ,EAAOoQ,oBAAoB,YAAaxO,KAAK8O,2BAA2B,GACxE1Q,EAAOoQ,oBAAoB,UAAWxO,KAAK+O,yBAAyB,GACpE3Q,EAAOoQ,oBAAoB,YAAaxO,KAAKgP,oBAC7C5Q,EAAOoQ,oBAAoB,YAAaxO,KAAKiP,2BAA2B,GACxE7Q,EAAOoQ,oBAAoB,YAAaxO,KAAKkP,2BAA2B,GACxE9Q,EAAOoQ,oBAAoB,WAAYxO,KAAKmP,mBAC5C/Q,EAAOoQ,oBAAoB,WAAYxO,KAAKoP,0BAA0B,GACtEhR,EAAOoQ,oBAAoB,OAAQxO,KAAKqP,eACxCjR,EAAOoQ,oBAAoB,OAAQxO,KAAKsP,sBAAsB,MAE/D,CACD/R,IAAK,8BACLpJ,MAAO,WACL,IAAIuV,EAAW1J,KAAKwI,QAAQE,cACxB+E,EAAoBzN,KAAKyN,kBAAkBpZ,IAAIqV,GACnD,OAAOpO,EAAc,CACnB4Q,WAAYlM,KAAK6L,cAAgB,OAAS,QACzC4B,GAAqB,MAEzB,CACDlQ,IAAK,uBACLpJ,MAAO,WACL,OAAI6L,KAAK4J,uBAEA,OAGF5J,KAAKuP,8BAA8BrD,aAE3C,CACD3O,IAAK,qCACLpJ,MAAO,WACL,IAAIuV,EAAW1J,KAAKwI,QAAQE,cAE5B,OAAOpN,EAAc,CACnBuK,QAAS,GACTC,QAAS,GACTsF,sBAAsB,GAJOpL,KAAKwN,yBAAyBnZ,IAAIqV,IAKlC,MAEhC,CACDnM,IAAK,uBACLpJ,MAAO,WACL,IAAIqb,EAAWxP,KAAKwI,QAAQiH,cAC5B,OAAOzb,OAAO+J,KAAKwJ,GAAa5K,MAAK,SAAUY,GAC7C,OAAOgK,EAAYhK,KAASiS,OAG/B,CACDjS,IAAK,sBACLpJ,MAAO,SAA6ByB,EAAMqR,GACxCjH,KAAKoK,6BACLpK,KAAKiK,oBF5nBJ,SAAgCrU,EAAMqR,GAC3C,IAAI1H,EAAS,IAAI2I,EAAiBZ,EAAkB1R,IAEpD,OADA2J,EAAOqN,iBAAiB3F,GACjB1H,EEynBwBmQ,CAAuB9Z,EAAMqR,GACxDjH,KAAK8J,oBAAsB9J,KAAK+J,SAAS4F,UAAU/Z,EAAMoK,KAAKiK,qBAC9DjK,KAAKlJ,QAAQ0T,UAAU,CAACxK,KAAK8J,wBAE9B,CACDvM,IAAK,2BACLpJ,MAAO,SAAkC2M,GACvC,IAAI8O,EAAS5P,KAEbA,KAAKoK,6BACLpK,KAAKmK,sBAAwBrJ,EAkB7Bd,KAAK6P,sBAAwBvE,YAAW,WACtC,IAAIwE,EAEJ,OAAqD,QAA7CA,EAAqBF,EAAOtG,mBAAgD,IAAvBwG,OAAgC,EAASA,EAAmBvB,iBAAiB,YAAaqB,EAAOG,kCAAkC,KAhBzK,OAmB1B,CACDxS,IAAK,6BACLpJ,MAAO,WAKD,IAAI6b,EAJR,QAAIhQ,KAAKmK,wBACPnK,KAAKmK,sBAAwB,KAEzBnK,KAAKsJ,cAG2B,QAAjC0G,EAAgBhQ,KAAKwB,cAAsC,IAAlBwO,GAAoCA,EAAcC,aAAajQ,KAAK6P,4BAAyBtZ,GACvIyJ,KAAKsJ,YAAYkF,oBAAoB,YAAaxO,KAAK+P,kCAAkC,IAG3F/P,KAAK6P,sBAAwB,MACtB,KAKV,CACDtS,IAAK,kBACLpJ,MAAO,SAAyBqQ,EAAGkF,GAC7BlF,EAAE+F,mBAIDvK,KAAKsK,qBACRtK,KAAKsK,mBAAqB,IAG5BtK,KAAKsK,mBAAmB4F,QAAQxG,MAEjC,CACDnM,IAAK,kBACLpJ,MAAO,SAAyBqQ,EAAGwH,GACjChM,KAAK0L,mBAAmBwE,QAAQlE,KAEjC,CACDzO,IAAK,iBACLpJ,MAAO,SAAwBqQ,EAAGwH,GACD,OAA3BhM,KAAKoM,oBACPpM,KAAKoM,kBAAoB,IAG3BpM,KAAKoM,kBAAkB8D,QAAQlE,KAEhC,CACDzO,IAAK,aACLpJ,MAAO,SAAoBqQ,EAAGwH,GAC5BhM,KAAK2M,cAAcuD,QAAQlE,QAzsB6CxM,EAAkBM,EAAY1H,UAAW6H,GAAiBC,GAAaV,EAAkBM,EAAaI,GA6sB3KqJ,EApsBkC,GCZ9B,EAAqC,CAC9C,qBAAmB,EACnB,uBAAqB,EAErB,iBAAgB,KAChB,WAAU,GACV,UAAS,KACT,aAAY,KACZ,aAAW,EACX,YAAW,CAAC,EAAG,IAAM,GAAK,KAC1B,iBAAe,EACf,aAAW,EACX,eAAa,EACb,eAAa,EACb,eAAa,EACb,gBAAc,EAEd,WClBsB,SAAuBC,EAAS2G,EAASjH,GACjE,OAAO,IAAIK,EAAiBC,EAAS2G,EAASjH,IDkB5C,oB,OAAmB,EACnB,kBAAgB,EAChB,WAAU,GACV,MAAK,KACP,mBAAmB,EACnB,gCAAgC,EAC9B,6BAA2B,EAC3B,gBAAe,gBAEjB,cAAe,IAGJ,EAAkD,CAC7D,YAAa,GACb,YAAa,O,uUEnCF,EAAU,SAAC,GACtB,OAD6C,qBACpC,M,4OCkBE,EAAiB,WAAM,kCAEvB,EAAiB,wBAAuB,KAcxC,EAAY,SAA0B,GAC/C,IACI,EATwB,wBASP,GACjB,EAAa,iBAAO,GAI1B,OAHK,YAAW,EAAW,QAAS,KAClC,EAAW,QAAU,GAEhB,EAAW,SAOP,EAAkB,WAG3B,IAAI,EAAe,EAAU,gBAC7B,MAAK,CACL,EAAG,SAAC,G,MACF,OAA0B,QAAnB,EAAY,OAAZ,QAAY,IAAZ,OAAY,EAAZ,EAAe,UAAI,QAAI,KAQvB,EAAU,WACrB,OAAO,YAAY,IAMR,EAAoC,WAC7C,OAAK,YAAqB,YAAgB,iBAMjC,EAAyB,SACpC,GAEA,IAAM,EAAgB,cAChB,EAAQ,IAAM,SAClB,WAAM,cACD,GAAa,CAChB,YAAa,YAFT,OAIN,CAAC,EAAe,KAAK,UAAU,KAEjC,MAA2B,qBAAhB,GAA8C,MAAf,EACjC,CAAC,SAAc,GAEf,CAAC,IAAqB,SAAU,K,itBC3F9B,EAAuB,uBACvB,EAAmB,mBACnB,EAAc,cACd,EAAc,cACd,EAAa,aACb,EAAY,YACZ,EAAgB,gBAUhB,EAAoB,SAC/B,EACA,EACA,GAC4B,YAF5B,IAAM,IAAN,WACA,gBAC6B,CACzB,KAAE,EACF,OAAI,KACJ,GAAF,EACE,QAAG,EACP,KAAI,IAYO,EACX,SAAC,GACC,OAAF,SACE,EACA,GAIyB,UACzB,KAAM,EACN,GAAI,IAAI,KACR,GAAE,EACF,KAAI,GAJqB,KAchB,EAAc,SAAC,GAAoC,MAAC,CAC/D,KAAM,EACN,GAAI,IAAI,KACR,IAAG,IAUQ,EACX,SAAC,GACD,gBAAC,GAA+B,YAA/B,aAAgC,CAC/B,KAAM,EACN,GAAI,IAAI,KACR,GAAE,EACF,KAAI,KAeK,EAAY,SACvB,EACA,EACA,GACoB,YAFpB,mBACA,qBACqB,CACrB,KAAM,EACN,GAAI,IAAI,KACR,GAAE,EACF,aAAY,EACZ,KAAI,IAWO,EAAW,SAAC,GAA+B,MAAC,CACvD,KAAM,EACN,GAAI,IAAI,KACR,GAAE,IAUS,EAAe,WAA0B,MAAC,CACrD,KAAM,EACN,GAAI,IAAI,Q,26BC5GG,EAAoB,oBACpB,EAAoB,oBACpB,EAAsB,sBACtB,EAAuB,uBACvB,EAA0B,0BAC1B,EAA2B,2BAE3B,EAAqB,qBACrB,EAAyB,yBA8BzB,EAAY,SACvB,EACA,G,MAEE,OAAE,MAAM,QAAQ,GACT,CACC,GAAF,cACE,MAAC,EAAW,KAAI,SAAC,GAAM,SAAW,EAAX,OAG1B,YAAoB,KACrB,kBACD,GAAU,CACT,MAAmB,QAAhB,IAAW,aAAK,eAAE,KAAI,SAAC,GAAM,SAAW,EAAX,UAI3B,EAAa,SACxB,EACA,G,0BAEQ,EAAsB,EAAX,YAAE,EAAS,EAAL,KACnB,EACJ,EAAY,SACkB,iBAAtB,EAAY,OAChB,EAAY,OACZ,EAAY,OAAO,IACnB,EAAS,GAAY,EAAY,MAAK,SAAC,GAAM,SAAE,KAAF,KAE7C,GACY,QAAhB,IAAY,YAAI,eAAE,QAAS,EACvB,EAAY,KACqB,QAAjC,EAA6B,QAA7B,EAAM,OAAN,QAAM,IAAN,OAAM,EAAN,EAAQ,6BAAqB,oBAA7B,UAAiC,QAAI,GACrC,EAAW,UACd,GAG0C,QAFzC,EACwC,QADxC,EAAiB,QAAjB,EAAW,OAAX,QAAW,IAAX,OAAW,EAAX,EAAa,YAAI,QACQ,QAAzB,EAAM,OAAN,QAAM,IAAN,OAAM,EAAN,EAAQ,yBAAiB,oBAAzB,EAA4B,UAAY,QACd,QAA1B,EAAM,OAAN,QAAM,IAAN,OAAM,EAAN,EAAQ,0BAAkB,oBAA1B,EAA6B,UAAY,QACzC,KAAI,GACkB,QAApB,IAAY,gBAAQ,QAAI,IAE5B,OAAK,YAAqB,CACtB,GAAc,QAAd,IAAY,UAAE,QAAI,cAClB,QAAK,EAAY,QACjB,YAAS,EAAY,YACrB,OAAI,EAAY,OAChB,KAAE,EAAY,MAAQ,GAEtB,mBAAgB,EAAY,mBAC5B,OAAI,EACJ,CACE,GAAI,EAAO,GACX,QAAS,EAAO,cAElB,EACA,KAAa,OAAX,QAAW,IAAX,OAAW,EAAX,EAAa,KAAI,SAAC,GAChB,OAAN,EAAUkH,EAAG,CACX,KAAI,EACJ,YAAa,YAAoB,EAAa,CAC5C,SAAQ,EACR,KAAM,YACJ,CACE,SAAQ,GAEV,UAKJ,SAAM,KAIR,EACJ,SAAuB,GACrB,OAAF,SAAC,GACD,gBACE,EACA,EACA,EACA,kBAAc,eAEd,IAAM,EAAO,EAAW,EAAa,GAC/B,GAAS,EAAY,GAC3B,OAAO,EAAe,EAAf,CACL,EACA,EAAM,OAED,GAAa,CAChB,YAAyB,OAAb,QAAa,IAAb,OAAa,EAAb,EAAe,aAAc,IAE3C,MAIA,EACJ,SAAuB,GACvB,gBACE,EACA,EACA,EACA,G,QAFM,EAAO,KAAE,EAAM,SAAE,EAAkB,qBAAE,EAAW,mBAEtD,UAAc,eAEd,IAAM,EAA4B,QAApB,EAAa,OAAb,QAAa,IAAb,OAAa,EAAb,EAAe,aAAK,QAAI,EAClC,EAAI,EACR,OAAQ,GACN,KAAK,EACC,KAAD,EAOL,KAAK,EACL,KAAK,GACE,GAAU,IAAuB,EAAQ,IAC5C,EAAI,GAON,IAAE,EAAe,CACnB,KAAI,EACJ,GAAI,IAAI,KACR,KAAM,EACN,QACY,IAAV,EAAc,EAA0C,QAAhC,IAAY,KAAK,IAAI,EAAQ,WAAG,QAAI,EAC9D,MAAOC,EAIP,IAAG,EACH,YAAa,EAAc,aAG7B,OAAO,SAAC,GACN,EAAS,IAEQ,OAAb,QAAa,IAAb,OAAa,EAAb,EAAe,cACjB,EAAS,eACT,YAAW,W,cACT,EACE,YAEgC,QAA9B,EAA0B,QAA1B,EAAqB,QAArB,EAAc,QAAd,EAAS,QAAT,IAAK,YAAI,eAAG,UAAE,eAAE,aAAK,eAAG,UAAE,eAAE,UAAE,QAAI,EAAa,IAAI,MACnD,MAGH,OAQE,EAAkB,EAAO,GAKzB,EAAkB,EAAO,GAKzB,EAAoB,EAAO,GAK3B,EAAmB,EAAO,GAK1B,EAAuB,EAAO,GAK9B,EAAwB,EAAO,GAE/B,EAAqB,EAAO,GAE5B,EAAwB,EAAO,GAK/B,EAAgB,SAAC,EAAY,GACxC,IAAM,EAAO,YAAM,GACf,CACE,GAAI,cACJ,KAAM,CAAC,IAET,EACJ,OAAO,EAAc,EAAM,IAEhB,EAAgB,SAAC,EAAY,G,QAClC,EAAiB,YAAgB,GAkBvC,OAhBe,EAAe,EAAf,CACb,EACA,CACE,YAAa,GACb,GAA8B,QAA1B,EAAO,OAAP,QAAO,IAAP,OAAO,EAAP,EAAS,yBAAiB,QAAI,EAAK,GACvC,mBAAoB,EAAK,mBACzB,OAAQ,EAAK,OACb,OAAQ,KACR,SAAqB,QAAX,IAAK,cAAM,eAAE,IAEzB,CACE,MAAO,EACP,YAAY,M,qVChRL,EAAkB,SAAC,GAC5B,OAAK,YAAQ,EAAM,CACf,QAAK,SAAC,GAAM,cACX,GAAC,CAEJ,UAAW,OAAD,QAAC,IAAD,OAAC,EAAD,EAAG,UAAW,KAAK,MAAM,KAAK,UAAU,EAAE,WAAa,GACjE,GAAI,iBAEN,OAAQ,SAAC,GAAM,cACV,GAAC,CACJ,GAAI,oBAKG,EAAc,SAAC,GAC1B,IAAM,EAAO,YAAM,GACf,CACE,GAAI,cACJ,KAAM,CAAC,IAET,EACF,OAAK,EAAgB,K,iCCzBzB,oEAAO,IAAM,EAAW,WAMX,EAAU,SAAC,GAAgC,MAAC,CACvD,KAAM,EACN,KAAI,K,2oBCAO,EAAgB,wBAA2B,MAexD,aAIE,WAAY,GAAZ,WAAc,sBAAU,MAAG,GAAE,EAAE,EAAK,QAAE,EAAY,eAS3C,0BAAuB,SAAC,GAC7B,OAAO,YAAgB,EAAK,MAAM,WAAY,IAGzC,aAAU,SAAC,G,MAChB,OAAqD,QAA9C,cAAgB,EAAK,MAAM,WAAY,UAAO,eAAE,MAbvD,KAAK,MAAQ,GCbF,SACb,EACA,gBAAI,EAAJ,IAGE,IAAI,GACH,KACiB,kBAAX,QACP,OAAO,qCACH,OAAO,qCAAqC,IAC5C,IAEN,OAAO,YACL,IACA,EACA,EAAE,IAAe,sBAAI,IAAU,IAAE,MAAK,MDFhB,CAAY,EAAc,GAChD,KAAK,WAAa,EActB,OAXS,oBAAP,SAAe,GACb,KAAK,MAAM,SAAS,YAAQ,KAUhC,EApBA,GAsBa,EAAgC,WAC3C,MAAC,CAAE,GAAI,cAAY,KAAM,KAEZ","file":"static/js/6.b06dc11b.chunk.js","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"ActionTypes\", {\n  enumerable: true,\n  get: function get() {\n    return _actions.ActionTypes;\n  }\n});\nObject.defineProperty(exports, \"ActionCreators\", {\n  enumerable: true,\n  get: function get() {\n    return _actions.ActionCreators;\n  }\n});\nObject.defineProperty(exports, \"parseActions\", {\n  enumerable: true,\n  get: function get() {\n    return _helpers.parseActions;\n  }\n});\nObject.defineProperty(exports, \"isHistory\", {\n  enumerable: true,\n  get: function get() {\n    return _helpers.isHistory;\n  }\n});\nObject.defineProperty(exports, \"includeAction\", {\n  enumerable: true,\n  get: function get() {\n    return _helpers.includeAction;\n  }\n});\nObject.defineProperty(exports, \"excludeAction\", {\n  enumerable: true,\n  get: function get() {\n    return _helpers.excludeAction;\n  }\n});\nObject.defineProperty(exports, \"combineFilters\", {\n  enumerable: true,\n  get: function get() {\n    return _helpers.combineFilters;\n  }\n});\nObject.defineProperty(exports, \"groupByActionTypes\", {\n  enumerable: true,\n  get: function get() {\n    return _helpers.groupByActionTypes;\n  }\n});\nObject.defineProperty(exports, \"newHistory\", {\n  enumerable: true,\n  get: function get() {\n    return _helpers.newHistory;\n  }\n});\nObject.defineProperty(exports, \"default\", {\n  enumerable: true,\n  get: function get() {\n    return _reducer[\"default\"];\n  }\n});\n\nvar _actions = require(\"./actions\");\n\nvar _helpers = require(\"./helpers\");\n\nvar _reducer = _interopRequireDefault(require(\"./reducer\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ActionCreators = exports.ActionTypes = void 0;\nvar ActionTypes = {\n  UNDO: '@@redux-undo/UNDO',\n  REDO: '@@redux-undo/REDO',\n  JUMP_TO_FUTURE: '@@redux-undo/JUMP_TO_FUTURE',\n  JUMP_TO_PAST: '@@redux-undo/JUMP_TO_PAST',\n  JUMP: '@@redux-undo/JUMP',\n  CLEAR_HISTORY: '@@redux-undo/CLEAR_HISTORY'\n};\nexports.ActionTypes = ActionTypes;\nvar ActionCreators = {\n  undo: function undo() {\n    return {\n      type: ActionTypes.UNDO\n    };\n  },\n  redo: function redo() {\n    return {\n      type: ActionTypes.REDO\n    };\n  },\n  jumpToFuture: function jumpToFuture(index) {\n    return {\n      type: ActionTypes.JUMP_TO_FUTURE,\n      index: index\n    };\n  },\n  jumpToPast: function jumpToPast(index) {\n    return {\n      type: ActionTypes.JUMP_TO_PAST,\n      index: index\n    };\n  },\n  jump: function jump(index) {\n    return {\n      type: ActionTypes.JUMP,\n      index: index\n    };\n  },\n  clearHistory: function clearHistory() {\n    return {\n      type: ActionTypes.CLEAR_HISTORY\n    };\n  }\n};\nexports.ActionCreators = ActionCreators;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.parseActions = parseActions;\nexports.isHistory = isHistory;\nexports.includeAction = includeAction;\nexports.excludeAction = excludeAction;\nexports.combineFilters = combineFilters;\nexports.groupByActionTypes = groupByActionTypes;\nexports.newHistory = newHistory;\n\n// parseActions helper: takes a string (or array)\n//                      and makes it an array if it isn't yet\nfunction parseActions(rawActions) {\n  var defaultValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n  if (Array.isArray(rawActions)) {\n    return rawActions;\n  } else if (typeof rawActions === 'string') {\n    return [rawActions];\n  }\n\n  return defaultValue;\n} // isHistory helper: check for a valid history object\n\n\nfunction isHistory(history) {\n  return typeof history.present !== 'undefined' && typeof history.future !== 'undefined' && typeof history.past !== 'undefined' && Array.isArray(history.future) && Array.isArray(history.past);\n} // includeAction helper: whitelist actions to be added to the history\n\n\nfunction includeAction(rawActions) {\n  var actions = parseActions(rawActions);\n  return function (action) {\n    return actions.indexOf(action.type) >= 0;\n  };\n} // excludeAction helper: blacklist actions from being added to the history\n\n\nfunction excludeAction(rawActions) {\n  var actions = parseActions(rawActions);\n  return function (action) {\n    return actions.indexOf(action.type) < 0;\n  };\n} // combineFilters helper: combine multiple filters to one\n\n\nfunction combineFilters() {\n  for (var _len = arguments.length, filters = new Array(_len), _key = 0; _key < _len; _key++) {\n    filters[_key] = arguments[_key];\n  }\n\n  return filters.reduce(function (prev, curr) {\n    return function (action, currentState, previousHistory) {\n      return prev(action, currentState, previousHistory) && curr(action, currentState, previousHistory);\n    };\n  }, function () {\n    return true;\n  });\n}\n\nfunction groupByActionTypes(rawActions) {\n  var actions = parseActions(rawActions);\n  return function (action) {\n    return actions.indexOf(action.type) >= 0 ? action.type : null;\n  };\n}\n\nfunction newHistory(past, present, future) {\n  var group = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n  return {\n    past: past,\n    present: present,\n    future: future,\n    group: group,\n    _latestUnfiltered: present,\n    index: past.length,\n    limit: past.length + future.length + 1\n  };\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.set = set;\nexports.start = start;\nexports.end = end;\nexports.log = log;\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nvar __DEBUG__;\n\nvar displayBuffer;\nvar colors = {\n  prevState: '#9E9E9E',\n  action: '#03A9F4',\n  nextState: '#4CAF50'\n};\n/* istanbul ignore next: debug messaging is not tested */\n\nfunction initBuffer() {\n  displayBuffer = {\n    header: [],\n    prev: [],\n    action: [],\n    next: [],\n    msgs: []\n  };\n}\n/* istanbul ignore next: debug messaging is not tested */\n\n\nfunction printBuffer() {\n  var _displayBuffer = displayBuffer,\n      header = _displayBuffer.header,\n      prev = _displayBuffer.prev,\n      next = _displayBuffer.next,\n      action = _displayBuffer.action,\n      msgs = _displayBuffer.msgs;\n\n  if (console.group) {\n    var _console, _console2, _console3, _console4, _console5;\n\n    (_console = console).groupCollapsed.apply(_console, _toConsumableArray(header));\n\n    (_console2 = console).log.apply(_console2, _toConsumableArray(prev));\n\n    (_console3 = console).log.apply(_console3, _toConsumableArray(action));\n\n    (_console4 = console).log.apply(_console4, _toConsumableArray(next));\n\n    (_console5 = console).log.apply(_console5, _toConsumableArray(msgs));\n\n    console.groupEnd();\n  } else {\n    var _console6, _console7, _console8, _console9, _console10;\n\n    (_console6 = console).log.apply(_console6, _toConsumableArray(header));\n\n    (_console7 = console).log.apply(_console7, _toConsumableArray(prev));\n\n    (_console8 = console).log.apply(_console8, _toConsumableArray(action));\n\n    (_console9 = console).log.apply(_console9, _toConsumableArray(next));\n\n    (_console10 = console).log.apply(_console10, _toConsumableArray(msgs));\n  }\n}\n/* istanbul ignore next: debug messaging is not tested */\n\n\nfunction colorFormat(text, color, obj) {\n  return [\"%c\".concat(text), \"color: \".concat(color, \"; font-weight: bold\"), obj];\n}\n/* istanbul ignore next: debug messaging is not tested */\n\n\nfunction start(action, state) {\n  initBuffer();\n\n  if (__DEBUG__) {\n    if (console.group) {\n      displayBuffer.header = ['%credux-undo', 'font-style: italic', 'action', action.type];\n      displayBuffer.action = colorFormat('action', colors.action, action);\n      displayBuffer.prev = colorFormat('prev history', colors.prevState, state);\n    } else {\n      displayBuffer.header = ['redux-undo action', action.type];\n      displayBuffer.action = ['action', action];\n      displayBuffer.prev = ['prev history', state];\n    }\n  }\n}\n/* istanbul ignore next: debug messaging is not tested */\n\n\nfunction end(nextState) {\n  if (__DEBUG__) {\n    if (console.group) {\n      displayBuffer.next = colorFormat('next history', colors.nextState, nextState);\n    } else {\n      displayBuffer.next = ['next history', nextState];\n    }\n\n    printBuffer();\n  }\n}\n/* istanbul ignore next: debug messaging is not tested */\n\n\nfunction log() {\n  if (__DEBUG__) {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    displayBuffer.msgs = displayBuffer.msgs.concat([].concat(args, ['\\n']));\n  }\n}\n/* istanbul ignore next: debug messaging is not tested */\n\n\nfunction set(debug) {\n  __DEBUG__ = debug;\n}","import { createId } from '../utils/createId';\nexport var generateIds = function () {\n    return {\n        cell: createId(),\n        item: createId(),\n        others: [createId(), createId(), createId()],\n    };\n};\n//# sourceMappingURL=helpers.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { isRow } from '../types';\n/**\n * map a node recursivly\n * @param node the node to map\n * @param mapper mapRow and mapCell callbck. Return the transformed row or cell\n * @param depth initialy 0\n */\nexport var mapNode = function (node, mapper, depth) {\n    var _a, _b, _c, _d;\n    if (depth === void 0) { depth = 0; }\n    if (isRow(node)) {\n        if ((_a = mapper.skipMapRow) === null || _a === void 0 ? void 0 : _a.call(mapper, node, depth))\n            return node;\n        var mappedNode = mapper.mapRow ? mapper.mapRow(node, depth) : node;\n        var mappedChildren = (_b = mappedNode === null || mappedNode === void 0 ? void 0 : mappedNode.cells) === null || _b === void 0 ? void 0 : _b.map(function (c) { return mapNode(c, mapper, depth + 1); });\n        var fullMapped = (mappedChildren === null || mappedChildren === void 0 ? void 0 : mappedChildren.length) > 0\n            ? __assign(__assign({}, mappedNode), { cells: mappedChildren }) : mappedNode;\n        return mapper.mapRowDown\n            ? mapper.mapRowDown(fullMapped, depth)\n            : fullMapped;\n    }\n    else {\n        if ((_c = mapper.skipMapCell) === null || _c === void 0 ? void 0 : _c.call(mapper, node, depth))\n            return node;\n        var mappedNode = mapper.mapCell ? mapper.mapCell(node, depth) : node;\n        var mappedChildren = (_d = mappedNode === null || mappedNode === void 0 ? void 0 : mappedNode.rows) === null || _d === void 0 ? void 0 : _d.map(function (c) { return mapNode(c, mapper, depth + 1); });\n        var fullMapped = (mappedChildren === null || mappedChildren === void 0 ? void 0 : mappedChildren.length) > 0\n            ? __assign(__assign({}, mappedNode), { rows: mappedChildren }) : mappedNode;\n        return mapper.mapCellDown\n            ? mapper.mapCellDown(fullMapped, depth)\n            : fullMapped;\n    }\n};\n//# sourceMappingURL=mapNode.js.map","import { generateIds } from './helpers';\nexport var UPDATE_VALUE = 'UPDATE_VALUE';\nexport var updateValue = function (value) { return ({\n    type: UPDATE_VALUE,\n    ts: new Date(),\n    value: value,\n    ids: generateIds(),\n}); };\n//# sourceMappingURL=value.js.map","import { createContext, useContext, useRef } from 'react';\nimport deepEquals from '../../utils/deepEquals';\nimport { DEFAULT_RENDER_OPTIONS } from '../../defaultOptions';\nexport var RenderOptionsContext = createContext(DEFAULT_RENDER_OPTIONS);\n/**\n * @returns the options object of the current Editor.\n *\n * this object is memoized, alltough its better to use `useOption` instead if you want to use a single option\n */\nexport var useRenderOptions = function () { return useContext(RenderOptionsContext); };\n/**\n * get a single (memoized) option value\n * @param key the option key\n * @returns the option value\n */\nexport var useRenderOption = function (key) {\n    var options = useRenderOptions();\n    var option = options[key];\n    var lastOption = useRef(option);\n    if (!deepEquals(lastOption.current, option)) {\n        lastOption.current = option;\n    }\n    return lastOption.current;\n};\n//# sourceMappingURL=renderOptions.js.map","/* eslint-disable @typescript-eslint/ban-types */\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { CELL_INSERT_ABOVE, CELL_INSERT_BELOW, CELL_INSERT_INLINE_LEFT, CELL_INSERT_INLINE_RIGHT, CELL_INSERT_LEFT_OF, CELL_INSERT_RIGHT_OF, CELL_REMOVE, CELL_RESIZE, CELL_UPDATE_DATA, CELL_UPDATE_IS_DRAFT, CELL_INSERT_AT_END, CELL_INSERT_AS_NEW_ROW, } from '../../actions/cell';\nimport { createId } from '../../utils/createId';\nimport { removeUndefinedProps } from '../../utils/removeUndefinedProps';\nimport { flatten, optimizeCell, optimizeCells, optimizeRow, optimizeRows, } from './helper/optimize';\nimport { resizeCells } from './helper/sizing';\nvar cell = function (s, a, depth) {\n    return optimizeCell((function (state, action) {\n        var _a, _b;\n        var _c, _d, _e;\n        var reduce = function () {\n            return removeUndefinedProps(__assign(__assign({}, state), { rows: rows(state.rows, action, depth + 1) }));\n        };\n        switch (action.type) {\n            case CELL_UPDATE_IS_DRAFT:\n                if (action.id === state.id) {\n                    var reduced = reduce();\n                    if (action.lang) {\n                        return __assign(__assign({}, reduced), { isDraftI18n: __assign(__assign({}, ((_c = reduced.isDraftI18n) !== null && _c !== void 0 ? _c : {})), (_a = {}, _a[action.lang] = action.isDraft, _a)) });\n                    }\n                    else {\n                        return __assign(__assign({}, reduced), { isDraft: action.isDraft });\n                    }\n                }\n                return reduce();\n            case CELL_UPDATE_DATA:\n                if (action.id === state.id) {\n                    // If this cell is being updated, set the data\n                    var reduced = reduce();\n                    // copy because we mutate afterwards with delete\n                    var newI18nData = __assign({}, ((_d = reduced.dataI18n) !== null && _d !== void 0 ? _d : {}));\n                    var emptyValue = action.data === null;\n                    if (action.lang && emptyValue) {\n                        newI18nData === null || newI18nData === void 0 ? true : delete newI18nData[action.lang];\n                    }\n                    return __assign(__assign({}, reduced), { dataI18n: __assign(__assign({}, (newI18nData !== null && newI18nData !== void 0 ? newI18nData : {})), (!emptyValue\n                            ? (_b = {}, _b[action.lang] = action.data, _b) : {})) });\n                }\n                return reduce();\n            case CELL_INSERT_ABOVE:\n                if (action.hoverId === state.id) {\n                    return {\n                        id: action.ids.cell,\n                        rows: rows([\n                            {\n                                id: action.ids.others[0],\n                                cells: [\n                                    __assign(__assign({}, action.item), { id: action.ids.item, inline: null }),\n                                ],\n                            },\n                            {\n                                id: action.ids.others[1],\n                                cells: [__assign(__assign({}, reduce()), { id: action.ids.others[2] })],\n                            },\n                        ], __assign(__assign({}, action), { hoverId: null }), depth + 1),\n                    };\n                }\n                return reduce();\n            case CELL_INSERT_BELOW:\n                if (action.hoverId === state.id) {\n                    return {\n                        id: action.ids.cell,\n                        rows: rows([\n                            {\n                                id: action.ids.others[0],\n                                cells: [__assign(__assign({}, reduce()), { id: action.ids.others[1] })],\n                            },\n                            {\n                                id: action.ids.others[2],\n                                cells: [\n                                    __assign(__assign({}, action.item), { id: action.ids.item, inline: null }),\n                                ],\n                            },\n                        ], __assign(__assign({}, action), { hoverId: null }), depth + 1),\n                    };\n                }\n                return reduce();\n            case CELL_INSERT_AS_NEW_ROW: {\n                if (action.hoverId === state.id) {\n                    return __assign(__assign({}, state), { rows: __spreadArray(__spreadArray([], __read(((_e = state.rows) !== null && _e !== void 0 ? _e : [])), false), [\n                            {\n                                id: action.ids.others[1],\n                                cells: [\n                                    __assign(__assign({}, action.item), { id: action.ids.item, inline: null }),\n                                ],\n                            },\n                        ], false) });\n                }\n                return reduce();\n            }\n            default:\n                return reduce();\n        }\n    })(s, a));\n};\nvar createEmptyCell = function () { return ({\n    id: createId(),\n    rows: [\n        {\n            id: createId(),\n            cells: [],\n        },\n    ],\n}); };\nexport var cells = function (state, action, depth) {\n    if (state === void 0) { state = []; }\n    if (depth === void 0) { depth = 0; }\n    var newCells = depth === 0 && state.length === 0 ? [createEmptyCell()] : state;\n    switch (action.type) {\n        case CELL_RESIZE:\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            newCells = resizeCells(newCells, action);\n            break;\n        case CELL_INSERT_AT_END:\n        case CELL_INSERT_AS_NEW_ROW:\n        case CELL_INSERT_BELOW:\n        case CELL_INSERT_ABOVE:\n            newCells = newCells.filter(function (c) { return c.id !== action.item.id; }); // this removes the cell if it already exists\n            break;\n        case CELL_INSERT_LEFT_OF:\n            newCells = newCells\n                .filter(function (c) { return c.id !== action.item.id; }) // this removes the cell if it already exists\n                .map(function (c) {\n                return action.hoverId === c.id\n                    ? [\n                        __assign(__assign({}, action.item), { id: action.ids.item, inline: null }),\n                        __assign(__assign({}, c), { id: action.ids.others[0] }),\n                    ]\n                    : [c];\n            })\n                .reduce(flatten, []);\n            break;\n        case CELL_INSERT_RIGHT_OF:\n            newCells = newCells\n                .filter(function (c) { return c.id !== action.item.id; }) // this removes the cell if it already exists\n                .map(function (c) {\n                return action.hoverId === c.id\n                    ? [\n                        __assign(__assign({}, c), { id: action.ids.others[0] }),\n                        __assign(__assign({}, action.item), { id: action.ids.item, inline: null }),\n                    ]\n                    : [c];\n            })\n                .reduce(flatten, []);\n            break;\n        case CELL_INSERT_INLINE_RIGHT:\n        case CELL_INSERT_INLINE_LEFT:\n            newCells = newCells\n                .filter(function (c) { return c.id !== action.item.id; }) // this removes the cell if it already exists\n                .map(function (c) {\n                if (action.hoverId === c.id) {\n                    return [\n                        {\n                            id: action.ids.cell,\n                            rows: [\n                                {\n                                    id: action.ids.others[0],\n                                    cells: [\n                                        __assign(__assign({}, action.item), { inline: action.type === CELL_INSERT_INLINE_RIGHT\n                                                ? 'right'\n                                                : 'left', id: action.ids.item, size: 0 }),\n                                        __assign(__assign({}, c), { id: action.ids.others[1], inline: null, hasInlineNeighbour: action.ids.item, size: 0 }),\n                                    ],\n                                },\n                            ],\n                        },\n                    ];\n                }\n                return [c];\n            })\n                .reduce(flatten, []);\n            break;\n        case CELL_REMOVE:\n            newCells = newCells.filter(function (_a) {\n                var id = _a.id;\n                return !action.ids.includes(id);\n            });\n            break;\n    }\n    var reducedCells = newCells.map(function (c) { return cell(c, action, depth); });\n    return optimizeCells(reducedCells);\n};\nvar row = function (s, a, depth) {\n    return optimizeRow((function (state, action) {\n        var reduce = function () { return (__assign(__assign({}, state), { cells: cells(state.cells, action, depth + 1) })); };\n        switch (action.type) {\n            case CELL_INSERT_LEFT_OF:\n                if (action.hoverId !== state.id) {\n                    return reduce();\n                }\n                return __assign(__assign({}, state), { cells: cells(__spreadArray([\n                        __assign(__assign({}, action.item), { id: action.ids.item, inline: null })\n                    ], __read(state.cells), false), __assign(__assign({}, action), { hoverId: null }), depth + 1) });\n            case CELL_INSERT_RIGHT_OF:\n                if (action.hoverId !== state.id) {\n                    return reduce();\n                }\n                return __assign(__assign({}, state), { cells: cells(__spreadArray(__spreadArray([], __read(state.cells), false), [\n                        __assign(__assign({}, action.item), { id: action.ids.item, inline: null }),\n                    ], false), __assign(__assign({}, action), { hoverId: null }), depth + 1) });\n            /*case CELL_DRAG_HOVER:\n              if (action.hoverId === state.id) {\n                return { ...reduce(), hoverPosition: action.position };\n              }\n              return reduce();\n              */\n            default:\n                return reduce();\n        }\n    })(s, a));\n};\nexport var rows = function (s, a, depth) {\n    if (s === void 0) { s = []; }\n    if (depth === void 0) { depth = 0; }\n    return optimizeRows(\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    (function (state, action) {\n        var reduce = function () { return state.map(function (r) { return row(r, action, depth); }); };\n        switch (action.type) {\n            case CELL_INSERT_ABOVE:\n                return state\n                    .map(function (r) {\n                    return action.hoverId === r.id\n                        ? [\n                            {\n                                cells: [\n                                    __assign(__assign({}, action.item), { id: action.ids.item, inline: null }),\n                                ],\n                                id: action.ids.others[0],\n                            },\n                            __assign(__assign({}, r), { id: action.ids.others[1] }),\n                        ]\n                        : [r];\n                })\n                    .reduce(flatten, [])\n                    .map(function (r) { return row(r, action, depth); });\n            case CELL_INSERT_BELOW:\n                return state\n                    .map(function (r) {\n                    return action.hoverId === r.id\n                        ? [\n                            __assign(__assign({}, r), { id: action.ids.others[0] }),\n                            {\n                                cells: [\n                                    __assign(__assign({}, action.item), { id: action.ids.item, inline: null }),\n                                ],\n                                id: action.ids.others[1],\n                            },\n                        ]\n                        : [r];\n                })\n                    .reduce(flatten, [])\n                    .map(function (r) { return row(r, action, depth); });\n            case CELL_INSERT_AT_END: {\n                var newRows = depth !== 0\n                    ? state\n                    : __spreadArray(__spreadArray([], __read(state), false), [\n                        {\n                            cells: [\n                                __assign(__assign({}, action.item), { id: action.ids.item, inline: null }),\n                            ],\n                            id: action.ids.others[1],\n                        },\n                    ], false);\n                return newRows.map(function (r) { return row(r, action, depth); });\n            }\n            default:\n                return reduce();\n        }\n    })(s, a));\n};\n//# sourceMappingURL=tree.js.map","import undoable from 'redux-undo';\nimport { set } from 'redux-undo/lib/debug';\nimport { CELL_REMOVE, CELL_RESIZE, CELL_UPDATE_DATA, } from '../../actions/cell/core';\nimport { CELL_INSERT_ABOVE, CELL_INSERT_AS_NEW_ROW, CELL_INSERT_AT_END, CELL_INSERT_BELOW, CELL_INSERT_INLINE_LEFT, CELL_INSERT_INLINE_RIGHT, CELL_INSERT_LEFT_OF, CELL_INSERT_RIGHT_OF, } from '../../actions/cell/insert';\nimport { UPDATE_VALUE } from '../../actions/value';\nimport { isProduction } from '../../const';\nimport { value } from '../value';\nif (!isProduction) {\n    set(true);\n}\nexport var values = undoable(value, {\n    filter: function filterState(action, currentState, previousHistory) {\n        var _a;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if ((_a = action) === null || _a === void 0 ? void 0 : _a.notUndoable) {\n            return false;\n        }\n        var undoable = [\n            UPDATE_VALUE,\n            CELL_UPDATE_DATA,\n            CELL_REMOVE,\n            CELL_RESIZE,\n            CELL_INSERT_ABOVE,\n            CELL_INSERT_BELOW,\n            CELL_INSERT_LEFT_OF,\n            CELL_INSERT_RIGHT_OF,\n            CELL_INSERT_INLINE_LEFT,\n            CELL_INSERT_INLINE_RIGHT,\n            CELL_INSERT_AT_END,\n            CELL_INSERT_AS_NEW_ROW,\n        ].indexOf(action.type) >= 0;\n        return undoable;\n    },\n    neverSkipReducer: true,\n    syncFilter: true,\n});\n//# sourceMappingURL=index.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { setAllSizesAndOptimize } from './helper/setAllSizesAndOptimize';\nimport { rows } from './tree';\nexport var value = function (state, action) {\n    switch (action.type) {\n        case 'UPDATE_VALUE': {\n            return action.value;\n        }\n    }\n    var newRows = (state === null || state === void 0 ? void 0 : state.rows)\n        ? setAllSizesAndOptimize(rows(state.rows, action, 0))\n        : [];\n    return __assign(__assign({}, state), { rows: newRows });\n};\n//# sourceMappingURL=index.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { CELL_FOCUS, CELL_BLUR, CELL_BLUR_ALL } from '../../actions/cell';\nvar stateWithout = function (state, idsToRemove) {\n    var _a, _b;\n    var nodeIds = (_b = (_a = state === null || state === void 0 ? void 0 : state.nodeIds) === null || _a === void 0 ? void 0 : _a.filter(function (n) { return !idsToRemove.includes(n); })) !== null && _b !== void 0 ? _b : [];\n    if (nodeIds.length === 0) {\n        return null;\n    }\n    return __assign(__assign({}, state), { nodeIds: nodeIds });\n};\nexport var focus = function (state, action) {\n    var _a, _b;\n    if (state === void 0) { state = null; }\n    switch (action.type) {\n        case 'CELL_REMOVE': {\n            return stateWithout(state, action.ids);\n        }\n        case CELL_FOCUS: {\n            var nodeIds = action.mode === 'add'\n                ? ((_a = state === null || state === void 0 ? void 0 : state.nodeIds) === null || _a === void 0 ? void 0 : _a.includes(action.id))\n                    ? stateWithout(state, [action.id]).nodeIds\n                    : __spreadArray(__spreadArray([], __read(((_b = state === null || state === void 0 ? void 0 : state.nodeIds) !== null && _b !== void 0 ? _b : [])), false), [action.id], false)\n                : [action.id];\n            return {\n                nodeIds: nodeIds,\n                scrollToCell: action.scrollToCell ? new Date().getTime() : null,\n            };\n        }\n        case CELL_BLUR_ALL:\n            return null;\n        case CELL_BLUR: {\n            return stateWithout(state, [action.id]);\n        }\n        default:\n            return state;\n    }\n};\n//# sourceMappingURL=index.js.map","import { combineReducers } from 'redux';\nimport { values } from './values';\nimport { display } from './display';\nimport { focus } from './focus';\nimport { hover } from './hover';\nimport { settings } from './settings';\nvar reducer = combineReducers({\n    values: values,\n    display: display,\n    focus: focus,\n    settings: settings,\n    hover: hover,\n    __nodeCache: function () { return null; }, // always empty __nodeCache\n});\nexport { reducer };\nexport default combineReducers({ reactPage: reducer });\nexport function initialState(value, lang) {\n    return {\n        reactPage: {\n            __nodeCache: {},\n            hover: null,\n            focus: null,\n            display: {\n                mode: 'edit',\n                zoom: 1,\n            },\n            settings: {\n                lang: lang,\n            },\n            values: {\n                past: [],\n                present: value,\n                future: [],\n            },\n        },\n    };\n}\n//# sourceMappingURL=index.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { CELL_BLUR_ALL } from '../../actions/cell';\nimport { DEFAULT_DISPLAY_MODE, DISPLAY_SET_ZOOM, SET_DISPLAY_MODE, SET_DISPLAY_REFERENCE_NODE_ID, } from '../../actions/display';\nexport var display = function (state, action) {\n    if (state === void 0) { state = {\n        mode: DEFAULT_DISPLAY_MODE,\n        zoom: 1,\n    }; }\n    switch (action.type) {\n        case DISPLAY_SET_ZOOM: {\n            return __assign(__assign({}, state), { zoom: action.zoom });\n        }\n        case SET_DISPLAY_REFERENCE_NODE_ID:\n            return __assign(__assign({}, state), { referenceNodeId: action.referenceNodeId });\n        case CELL_BLUR_ALL: {\n            return __assign(__assign({}, state), { mode: state.mode, referenceNodeId: null });\n        }\n        case SET_DISPLAY_MODE:\n            return __assign(__assign({}, state), { mode: action.mode, referenceNodeId: action.referenceNodeId || state.referenceNodeId });\n        default:\n            return state;\n    }\n};\n//# sourceMappingURL=index.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { SET_LANG } from '../../actions/setting';\nexport var settings = function (state, action) {\n    if (state === void 0) { state = {\n        lang: null,\n    }; }\n    switch (action.type) {\n        case SET_LANG:\n            return __assign(__assign({}, state), { lang: action.lang });\n        default:\n            return state;\n    }\n};\n//# sourceMappingURL=index.js.map","import { CELL_DRAG_HOVER, CLEAR_CLEAR_HOVER, } from '../../actions/cell';\nexport var hover = function (state, action) {\n    if (state === void 0) { state = null; }\n    switch (action.type) {\n        case CELL_DRAG_HOVER: {\n            return {\n                nodeId: action.hoverId,\n                position: action.position,\n            };\n        }\n        case CLEAR_CLEAR_HOVER:\n            return null;\n        default:\n            return state;\n    }\n};\n//# sourceMappingURL=index.js.map","\"use strict\";\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = undoable;\n\nvar debug = _interopRequireWildcard(require(\"./debug\"));\n\nvar _actions = require(\"./actions\");\n\nvar _helpers = require(\"./helpers\");\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function _getRequireWildcardCache() { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nfunction createHistory(state, ignoreInitialState) {\n  // ignoreInitialState essentially prevents the user from undoing to the\n  // beginning, in the case that the undoable reducer handles initialization\n  // in a way that can't be redone simply\n  var history = (0, _helpers.newHistory)([], state, []);\n\n  if (ignoreInitialState) {\n    history._latestUnfiltered = null;\n  }\n\n  return history;\n} // insert: insert `state` into history, which means adding the current state\n//         into `past`, setting the new `state` as `present` and erasing\n//         the `future`.\n\n\nfunction insert(history, state, limit, group) {\n  var lengthWithoutFuture = history.past.length + 1;\n  debug.log('inserting', state);\n  debug.log('new free: ', limit - lengthWithoutFuture);\n  var past = history.past,\n      _latestUnfiltered = history._latestUnfiltered;\n  var isHistoryOverflow = limit && limit <= lengthWithoutFuture;\n  var pastSliced = past.slice(isHistoryOverflow ? 1 : 0);\n  var newPast = _latestUnfiltered != null ? [].concat(_toConsumableArray(pastSliced), [_latestUnfiltered]) : pastSliced;\n  return (0, _helpers.newHistory)(newPast, state, [], group);\n} // jumpToFuture: jump to requested index in future history\n\n\nfunction jumpToFuture(history, index) {\n  if (index < 0 || index >= history.future.length) return history;\n  var past = history.past,\n      future = history.future,\n      _latestUnfiltered = history._latestUnfiltered;\n  var newPast = [].concat(_toConsumableArray(past), [_latestUnfiltered], _toConsumableArray(future.slice(0, index)));\n  var newPresent = future[index];\n  var newFuture = future.slice(index + 1);\n  return (0, _helpers.newHistory)(newPast, newPresent, newFuture);\n} // jumpToPast: jump to requested index in past history\n\n\nfunction jumpToPast(history, index) {\n  if (index < 0 || index >= history.past.length) return history;\n  var past = history.past,\n      future = history.future,\n      _latestUnfiltered = history._latestUnfiltered;\n  var newPast = past.slice(0, index);\n  var newFuture = [].concat(_toConsumableArray(past.slice(index + 1)), [_latestUnfiltered], _toConsumableArray(future));\n  var newPresent = past[index];\n  return (0, _helpers.newHistory)(newPast, newPresent, newFuture);\n} // jump: jump n steps in the past or forward\n\n\nfunction jump(history, n) {\n  if (n > 0) return jumpToFuture(history, n - 1);\n  if (n < 0) return jumpToPast(history, history.past.length + n);\n  return history;\n} // helper to dynamically match in the reducer's switch-case\n\n\nfunction actionTypeAmongClearHistoryType(actionType, clearHistoryType) {\n  return clearHistoryType.indexOf(actionType) > -1 ? actionType : !actionType;\n} // redux-undo higher order reducer\n\n\nfunction undoable(reducer) {\n  var rawConfig = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  debug.set(rawConfig.debug);\n\n  var config = _objectSpread({\n    limit: undefined,\n    filter: function filter() {\n      return true;\n    },\n    groupBy: function groupBy() {\n      return null;\n    },\n    undoType: _actions.ActionTypes.UNDO,\n    redoType: _actions.ActionTypes.REDO,\n    jumpToPastType: _actions.ActionTypes.JUMP_TO_PAST,\n    jumpToFutureType: _actions.ActionTypes.JUMP_TO_FUTURE,\n    jumpType: _actions.ActionTypes.JUMP,\n    neverSkipReducer: false,\n    ignoreInitialState: false,\n    syncFilter: false\n  }, rawConfig, {\n    initTypes: (0, _helpers.parseActions)(rawConfig.initTypes, ['@@redux-undo/INIT']),\n    clearHistoryType: (0, _helpers.parseActions)(rawConfig.clearHistoryType, [_actions.ActionTypes.CLEAR_HISTORY])\n  }); // Allows the user to call the reducer with redux-undo specific actions\n\n\n  var skipReducer = config.neverSkipReducer ? function (res, action) {\n    for (var _len = arguments.length, slices = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n      slices[_key - 2] = arguments[_key];\n    }\n\n    return _objectSpread({}, res, {\n      present: reducer.apply(void 0, [res.present, action].concat(slices))\n    });\n  } : function (res) {\n    return res;\n  };\n  var initialState;\n  return function () {\n    var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n    var action = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    debug.start(action, state);\n    var history = state;\n\n    for (var _len2 = arguments.length, slices = new Array(_len2 > 2 ? _len2 - 2 : 0), _key2 = 2; _key2 < _len2; _key2++) {\n      slices[_key2 - 2] = arguments[_key2];\n    }\n\n    if (!initialState) {\n      debug.log('history is uninitialized');\n\n      if (state === undefined) {\n        var createHistoryAction = {\n          type: '@@redux-undo/CREATE_HISTORY'\n        };\n        var start = reducer.apply(void 0, [state, createHistoryAction].concat(slices));\n        history = createHistory(start, config.ignoreInitialState);\n        debug.log('do not set initialState on probe actions');\n        debug.end(history);\n        return history;\n      } else if ((0, _helpers.isHistory)(state)) {\n        history = initialState = config.ignoreInitialState ? state : (0, _helpers.newHistory)(state.past, state.present, state.future);\n        debug.log('initialHistory initialized: initialState is a history', initialState);\n      } else {\n        history = initialState = createHistory(state, config.ignoreInitialState);\n        debug.log('initialHistory initialized: initialState is not a history', initialState);\n      }\n    }\n\n    var res;\n\n    switch (action.type) {\n      case undefined:\n        return history;\n\n      case config.undoType:\n        res = jump(history, -1);\n        debug.log('perform undo');\n        debug.end(res);\n        return skipReducer.apply(void 0, [res, action].concat(slices));\n\n      case config.redoType:\n        res = jump(history, 1);\n        debug.log('perform redo');\n        debug.end(res);\n        return skipReducer.apply(void 0, [res, action].concat(slices));\n\n      case config.jumpToPastType:\n        res = jumpToPast(history, action.index);\n        debug.log(\"perform jumpToPast to \".concat(action.index));\n        debug.end(res);\n        return skipReducer.apply(void 0, [res, action].concat(slices));\n\n      case config.jumpToFutureType:\n        res = jumpToFuture(history, action.index);\n        debug.log(\"perform jumpToFuture to \".concat(action.index));\n        debug.end(res);\n        return skipReducer.apply(void 0, [res, action].concat(slices));\n\n      case config.jumpType:\n        res = jump(history, action.index);\n        debug.log(\"perform jump to \".concat(action.index));\n        debug.end(res);\n        return skipReducer.apply(void 0, [res, action].concat(slices));\n\n      case actionTypeAmongClearHistoryType(action.type, config.clearHistoryType):\n        res = createHistory(history.present, config.ignoreInitialState);\n        debug.log('perform clearHistory');\n        debug.end(res);\n        return skipReducer.apply(void 0, [res, action].concat(slices));\n\n      default:\n        res = reducer.apply(void 0, [history.present, action].concat(slices));\n\n        if (config.initTypes.some(function (actionType) {\n          return actionType === action.type;\n        })) {\n          debug.log('reset history due to init action');\n          debug.end(initialState);\n          return initialState;\n        }\n\n        if (history._latestUnfiltered === res) {\n          // Don't handle this action. Do not call debug.end here,\n          // because this action should not produce side effects to the console\n          return history;\n        }\n        /* eslint-disable-next-line no-case-declarations */\n\n\n        var filtered = typeof config.filter === 'function' && !config.filter(action, res, history);\n\n        if (filtered) {\n          // if filtering an action, merely update the present\n          var filteredState = (0, _helpers.newHistory)(history.past, res, history.future, history.group);\n\n          if (!config.syncFilter) {\n            filteredState._latestUnfiltered = history._latestUnfiltered;\n          }\n\n          debug.log('filter ignored action, not storing it in past');\n          debug.end(filteredState);\n          return filteredState;\n        }\n        /* eslint-disable-next-line no-case-declarations */\n\n\n        var group = config.groupBy(action, res, history);\n\n        if (group != null && group === history.group) {\n          // if grouping with the previous action, only update the present\n          var groupedState = (0, _helpers.newHistory)(history.past, res, history.future, history.group);\n          debug.log('groupBy grouped the action with the previous action');\n          debug.end(groupedState);\n          return groupedState;\n        } // If the action wasn't filtered or grouped, insert normally\n\n\n        history = insert(history, res, config.limit, group);\n        debug.log('inserted new state into history');\n        debug.end(history);\n        return history;\n    }\n  };\n}","/**\n * @module src/editor/actions/cell/drag\n */\nimport { PositionEnum } from '../../const';\nexport var CELL_DRAG_HOVER = 'CELL_DRAG_HOVER';\nexport var CELL_DRAG = 'CELL_DRAG';\nexport var CELL_DRAG_CANCEL = 'CELL_DRAG_CANCEL';\nexport var CLEAR_CLEAR_HOVER = 'CLEAR_CLEAR_HOVER';\n/**\n * Creates a redux action for when a cell hovers another item.\n *\n * @example\n * // const store = redux.createStore()\n * store.dispatch(cellHover(drag, hover, level, position))\n *\n * @param {PartialCell} drag The cell that is currently being dragged.\n * @param {Cell} hover The cell that is being hovered by the dragged cell.\n * @param {number} level Set the level if the dragged cells should hover over an ancestor of hover.\n * @param {string} position Can be left, right, above, below.\n * @return {Action}\n */\nexport var cellHover = function (drag, hover, level, position) {\n    var _a;\n    if (level === void 0) { level = 0; }\n    var hoverId = level === 0\n        ? hover.id\n        : (_a = hover.ancestorIds[Math.max(0, level - 1)]) !== null && _a !== void 0 ? _a : hover.id;\n    return {\n        type: CELL_DRAG_HOVER,\n        ts: new Date(),\n        dragId: drag.id,\n        hoverId: hoverId,\n        level: level,\n        position: position,\n    };\n};\n/**\n * Creates a redux action for when a cell is hovering another cell on the left.\n *\n * @example\n * // const store = redux.createStore()\n * store.dispatch(cellHoverLeftOf(drag, hover, level))\n *\n * @param {PartialCell} drag The cell that is currently being dragged.\n * @param {Cell} hover The cell that is being hovered by the dragged cell.\n * @param {number} level Set the level if the dragged cells should hover over an ancestor of hover.\n * @return {Action}\n */\nexport var cellHoverLeftOf = function (drag, hover, level) { return cellHover(drag, hover, level, PositionEnum.LEFT_OF); };\n/**\n * Creates a redux action for when a cell is hovering another cell on the right.\n *\n * @example\n * // const store = redux.createStore()\n * store.dispatch(cellHoverRightOf(drag, hover, level))\n *\n * @param {PartialCell} drag The cell that is currently being dragged.\n * @param {Cell} hover The cell that is being hovered by the dragged cell.\n * @param {number} level Set the level if the dragged cells should hover over an ancestor of hover.\n * @return {Action}\n */\nexport var cellHoverRightOf = function (drag, hover, level) { return cellHover(drag, hover, level, PositionEnum.RIGHT_OF); };\n/**\n * Creates a redux action for when a cell is hovering another cell above.\n *\n * @example\n * // const store = redux.createStore()\n * store.dispatch(cellHoverAbove(drag, hover, level))\n *\n * @param {PartialCell} drag The cell that is currently being dragged.\n * @param {Cell} hover The cell that is being hovered by the dragged cell.\n * @param {number} level Set the level if the dragged cells should hover over an ancestor of hover.\n * @return {Action}\n */\nexport var cellHoverAbove = function (drag, hover, level) { return cellHover(drag, hover, level, PositionEnum.ABOVE); };\n/**\n * Creates a redux action for when a cell is hovering another cell below.\n *\n * @example\n * // const store = redux.createStore()\n * store.dispatch(cellHoverBelow(drag, hover, level))\n *\n * @param {PartialCell} drag The cell that is currently being dragged.\n * @param {Cell} hover The cell that is being hovered by the dragged cell.\n * @param {number} level Set the level if the dragged cells should hover over an ancestor of hover.\n * @return {Action}\n */\nexport var cellHoverBelow = function (drag, hover, level) { return cellHover(drag, hover, level, PositionEnum.BELOW); };\n/**\n * Creates a redux action for when a cell is hovering another cell on the left, but inline (css floating).\n *\n * @example\n * // const store = redux.createStore()\n * store.dispatch(cellHoverInlineLeft(drag, hover))\n *\n * @param {PartialCell} drag The cell that is currently being dragged.\n * @param {Cell} hover The cell that is being hovered by the dragged cell.\n * @return {Action}\n */\nexport var cellHoverInlineLeft = function (drag, hover) {\n    return cellHover(drag, hover, 0, PositionEnum.INLINE_LEFT);\n};\n/**\n * Creates a redux action for when a cell is hovering another cell on the right, but inline (css floating).\n *\n * @example\n * // const store = redux.createStore()\n * store.dispatch(cellHoverInlineRight(drag, hover))\n *\n * @param {PartialCell} drag The cell that is currently being dragged.\n * @param {Cell} hover The cell that is being hovered by the dragged cell.\n * @return {Action}\n */\nexport var cellHoverInlineRight = function (drag, hover) {\n    return cellHover(drag, hover, 0, PositionEnum.INLINE_RIGHT);\n};\n/**\n * Creates a redux action for when a cell is being dragged.\n *\n * @example\n * // const store = redux.createStore()\n * // const cell = { id: '1', ... }\n * store.dispatch(dragCell(cell.id))\n *\n * @param {string} id The id of the cell that is being dragged.\n * @return {Action}\n */\nexport var dragCell = function (id) { return ({\n    type: CELL_DRAG,\n    ts: new Date(),\n    id: id,\n}); };\n/**\n * Creates a redux action to clear hover state of all cells.\n *\n * @return {Action}\n */\nexport var clearHover = function () { return ({\n    type: CLEAR_CLEAR_HOVER,\n    ts: new Date(),\n}); };\n/**\n * Creates a redux action for when cell dragging ends.\n *\n * @example\n * // const store = redux.createStore()\n * // const cell = { id: '1', ... }\n * store.dispatch(cancelCellDrag(cell.id))\n *\n * @param {string} id\n * @return {Action}\n */\nexport var cancelCellDrag = function () { return ({\n    type: CELL_DRAG_CANCEL,\n    ts: new Date(),\n}); };\nexport var dragActions = {\n    cancelCellDrag: cancelCellDrag,\n    clearHover: clearHover,\n    dragCell: dragCell,\n    cellHoverInlineRight: cellHoverInlineRight,\n    cellHoverInlineLeft: cellHoverInlineLeft,\n    cellHoverBelow: cellHoverBelow,\n    cellHoverAbove: cellHoverAbove,\n    cellHoverRightOf: cellHoverRightOf,\n    cellHoverLeftOf: cellHoverLeftOf,\n    cellHover: cellHover,\n};\n//# sourceMappingURL=drag.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport React from 'react';\nimport { createDispatchHook, createSelectorHook, createStoreHook, Provider, } from 'react-redux';\nexport var ReduxContext = React.createContext(null);\nexport var ReduxProvider = function (_a) {\n    var store = _a.store, props = __rest(_a, [\"store\"]);\n    return (React.createElement(Provider, __assign({ store: store, context: ReduxContext }, props)));\n};\nexport var useStore = createStoreHook(ReduxContext);\nexport var useDispatch = createDispatchHook(ReduxContext\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\n);\nexport var useSelector = createSelectorHook(ReduxContext);\n//# sourceMappingURL=reduxConnect.js.map","export var SET_DISPLAY_REFERENCE_NODE_ID = 'SET_DISPLAY_REFERENCE_NODE_ID';\nexport var SET_DISPLAY_MODE = 'SET_DISPLAY_MODE';\nexport var SET_PREVIOUS_DISPLAY_MODE = 'SET_PREVIOUS_DISPLAY_MODE';\nexport var DISPLAY_MODE_PREVIEW = 'preview';\nexport var DISPLAY_MODE_LAYOUT = 'layout';\nexport var DISPLAY_MODE_EDIT = 'edit';\nexport var DISPLAY_MODE_INSERT = 'insert';\nexport var DISPLAY_MODE_RESIZING = 'resizing';\nexport var DISPLAY_SET_ZOOM = 'DISPLAY_SET_ZOOM';\nexport var DEFAULT_DISPLAY_MODE = DISPLAY_MODE_EDIT;\nvar setDisplayMode = function (mode, referenceNodeId) {\n    return function () { return ({\n        type: SET_DISPLAY_MODE,\n        ts: new Date(),\n        mode: mode,\n        referenceNodeId: referenceNodeId,\n    }); };\n};\nexport var setDisplayReferenceNodeId = function (referenceNodeId) { return ({\n    type: SET_DISPLAY_REFERENCE_NODE_ID,\n    ts: new Date(),\n    referenceNodeId: referenceNodeId,\n}); };\n/**\n * Dispatch to switch to arbitrary mode.\n */\nexport var setMode = function (mode, referenceNodeId) { return ({\n    type: SET_DISPLAY_MODE,\n    ts: new Date(),\n    mode: mode,\n    referenceNodeId: referenceNodeId,\n}); };\n/**\n * Dispatch to switch to insert display mode.\n */\nexport var insertMode = setDisplayMode(DISPLAY_MODE_INSERT);\n/**\n * Dispatch to switch to edit display mode.\n */\nexport var editMode = setDisplayMode(DISPLAY_MODE_EDIT);\n/**\n * Dispatch to switch to preview display mode.\n */\nexport var previewMode = setDisplayMode(DISPLAY_MODE_PREVIEW);\n/**\n * Dispatch to switch to layout display mode.\n */\nexport var layoutMode = setDisplayMode(DISPLAY_MODE_LAYOUT);\n/**\n * Dispatch to switch to resize display mode.\n */\nexport var resizeMode = setDisplayMode(DISPLAY_MODE_RESIZING);\n/**\n * Dispatch Zoom the content\n */\nexport var setZoom = function (zoom) { return ({\n    type: DISPLAY_SET_ZOOM,\n    zoom: zoom,\n}); };\n//# sourceMappingURL=display.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { isRow } from '../../types/node';\n/** */\nvar findNode = function (nodes, nodeId, ancestors) {\n    var e_1, _a;\n    if (ancestors === void 0) { ancestors = []; }\n    try {\n        for (var nodes_1 = __values(nodes), nodes_1_1 = nodes_1.next(); !nodes_1_1.done; nodes_1_1 = nodes_1.next()) {\n            var node = nodes_1_1.value;\n            if (node.id === nodeId) {\n                return {\n                    node: node,\n                    ancestors: ancestors,\n                };\n            }\n            // else search children\n            if (isRow(node) && node.cells) {\n                var found = findNode(node.cells, nodeId, __spreadArray([node], __read(ancestors), false));\n                if (found) {\n                    return found;\n                }\n            }\n            else if (!isRow(node) && node.rows) {\n                var found = findNode(node.rows, nodeId, __spreadArray([node], __read(ancestors), false));\n                if (found) {\n                    return found;\n                }\n            }\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (nodes_1_1 && !nodes_1_1.done && (_a = nodes_1.return)) _a.call(nodes_1);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    return null;\n};\n/*\nlet sum = 0;\nlet missum = 0;\nconst end = (start, hit) => {\n  const now = performance.now();\n  const diff = now - start;\n  sum += diff;\n  if (!hit) missum++;\n  console.log('time', hit ? '!' : '?', missum, diff, sum);\n};\n*/\nexport var findNodeInState = function (state, nodeId) {\n    var _a;\n    // const now = performance.now();\n    // POOR mans node cache\n    // it gets removed every reduce, so we don't have to clear it manually\n    if (!state.reactPage.__nodeCache) {\n        state.reactPage.__nodeCache = {};\n    }\n    if (state.reactPage.__nodeCache[nodeId]) {\n        //end(now, true);\n        return state.reactPage.__nodeCache[nodeId];\n    }\n    var result = findNode([\n        __assign(__assign({}, (_a = state.reactPage.values) === null || _a === void 0 ? void 0 : _a.present), { isRoot: true }),\n    ], nodeId);\n    state.reactPage.__nodeCache[nodeId] = result;\n    //end(now, false);\n    return result;\n};\nexport var currentValue = function (state) { var _a, _b; return (_b = (_a = state === null || state === void 0 ? void 0 : state.reactPage) === null || _a === void 0 ? void 0 : _a.values) === null || _b === void 0 ? void 0 : _b.present; };\nexport var selectNode = function (state, nodeId) {\n    var found = findNodeInState(state, nodeId);\n    return found;\n};\n//# sourceMappingURL=index.js.map","/**\n * A list of positions in the layout space.\n */\nexport var PositionEnum;\n(function (PositionEnum) {\n    PositionEnum[\"LEFT_OF\"] = \"left-of\";\n    PositionEnum[\"RIGHT_OF\"] = \"right-of\";\n    PositionEnum[\"ABOVE\"] = \"above\";\n    PositionEnum[\"BELOW\"] = \"below\";\n    PositionEnum[\"INLINE_LEFT\"] = \"inline-left\";\n    PositionEnum[\"INLINE_RIGHT\"] = \"inline-right\";\n})(PositionEnum || (PositionEnum = {}));\n/**\n * Is true if built in production mode.\n */\nexport var isProduction = process.env.NODE_ENV === 'production';\n//# sourceMappingURL=const.js.map","// cheap lodash replacements\nexport function memoize(fn) {\n  var result = null;\n\n  var memoized = function memoized() {\n    if (result == null) {\n      result = fn();\n    }\n\n    return result;\n  };\n\n  return memoized;\n}\n/**\n * drop-in replacement for _.without\n */\n\nexport function without(items, item) {\n  return items.filter(function (i) {\n    return i !== item;\n  });\n}\nexport function union(itemsA, itemsB) {\n  var set = new Set();\n\n  var insertItem = function insertItem(item) {\n    return set.add(item);\n  };\n\n  itemsA.forEach(insertItem);\n  itemsB.forEach(insertItem);\n  var result = [];\n  set.forEach(function (key) {\n    return result.push(key);\n  });\n  return result;\n}","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { union, without } from './utils/js_utils';\nexport var EnterLeaveCounter = /*#__PURE__*/function () {\n  function EnterLeaveCounter(isNodeInDocument) {\n    _classCallCheck(this, EnterLeaveCounter);\n\n    _defineProperty(this, \"entered\", []);\n\n    _defineProperty(this, \"isNodeInDocument\", void 0);\n\n    this.isNodeInDocument = isNodeInDocument;\n  }\n\n  _createClass(EnterLeaveCounter, [{\n    key: \"enter\",\n    value: function enter(enteringNode) {\n      var _this = this;\n\n      var previousLength = this.entered.length;\n\n      var isNodeEntered = function isNodeEntered(node) {\n        return _this.isNodeInDocument(node) && (!node.contains || node.contains(enteringNode));\n      };\n\n      this.entered = union(this.entered.filter(isNodeEntered), [enteringNode]);\n      return previousLength === 0 && this.entered.length > 0;\n    }\n  }, {\n    key: \"leave\",\n    value: function leave(leavingNode) {\n      var previousLength = this.entered.length;\n      this.entered = without(this.entered.filter(this.isNodeInDocument), leavingNode);\n      return previousLength > 0 && this.entered.length === 0;\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      this.entered = [];\n    }\n  }]);\n\n  return EnterLeaveCounter;\n}();","import { memoize } from './utils/js_utils';\nexport var isFirefox = memoize(function () {\n  return /firefox/i.test(navigator.userAgent);\n});\nexport var isSafari = memoize(function () {\n  return Boolean(window.safari);\n});","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nexport var MonotonicInterpolant = /*#__PURE__*/function () {\n  function MonotonicInterpolant(xs, ys) {\n    _classCallCheck(this, MonotonicInterpolant);\n\n    _defineProperty(this, \"xs\", void 0);\n\n    _defineProperty(this, \"ys\", void 0);\n\n    _defineProperty(this, \"c1s\", void 0);\n\n    _defineProperty(this, \"c2s\", void 0);\n\n    _defineProperty(this, \"c3s\", void 0);\n\n    var length = xs.length; // Rearrange xs and ys so that xs is sorted\n\n    var indexes = [];\n\n    for (var i = 0; i < length; i++) {\n      indexes.push(i);\n    }\n\n    indexes.sort(function (a, b) {\n      return xs[a] < xs[b] ? -1 : 1;\n    }); // Get consecutive differences and slopes\n\n    var dys = [];\n    var dxs = [];\n    var ms = [];\n    var dx;\n    var dy;\n\n    for (var _i = 0; _i < length - 1; _i++) {\n      dx = xs[_i + 1] - xs[_i];\n      dy = ys[_i + 1] - ys[_i];\n      dxs.push(dx);\n      dys.push(dy);\n      ms.push(dy / dx);\n    } // Get degree-1 coefficients\n\n\n    var c1s = [ms[0]];\n\n    for (var _i2 = 0; _i2 < dxs.length - 1; _i2++) {\n      var m2 = ms[_i2];\n      var mNext = ms[_i2 + 1];\n\n      if (m2 * mNext <= 0) {\n        c1s.push(0);\n      } else {\n        dx = dxs[_i2];\n        var dxNext = dxs[_i2 + 1];\n        var common = dx + dxNext;\n        c1s.push(3 * common / ((common + dxNext) / m2 + (common + dx) / mNext));\n      }\n    }\n\n    c1s.push(ms[ms.length - 1]); // Get degree-2 and degree-3 coefficients\n\n    var c2s = [];\n    var c3s = [];\n    var m;\n\n    for (var _i3 = 0; _i3 < c1s.length - 1; _i3++) {\n      m = ms[_i3];\n      var c1 = c1s[_i3];\n      var invDx = 1 / dxs[_i3];\n\n      var _common = c1 + c1s[_i3 + 1] - m - m;\n\n      c2s.push((m - c1 - _common) * invDx);\n      c3s.push(_common * invDx * invDx);\n    }\n\n    this.xs = xs;\n    this.ys = ys;\n    this.c1s = c1s;\n    this.c2s = c2s;\n    this.c3s = c3s;\n  }\n\n  _createClass(MonotonicInterpolant, [{\n    key: \"interpolate\",\n    value: function interpolate(x) {\n      var xs = this.xs,\n          ys = this.ys,\n          c1s = this.c1s,\n          c2s = this.c2s,\n          c3s = this.c3s; // The rightmost point in the dataset should give an exact result\n\n      var i = xs.length - 1;\n\n      if (x === xs[i]) {\n        return ys[i];\n      } // Search for the interval x is in, returning the corresponding y if x is one of the original xs\n\n\n      var low = 0;\n      var high = c3s.length - 1;\n      var mid;\n\n      while (low <= high) {\n        mid = Math.floor(0.5 * (low + high));\n        var xHere = xs[mid];\n\n        if (xHere < x) {\n          low = mid + 1;\n        } else if (xHere > x) {\n          high = mid - 1;\n        } else {\n          return ys[mid];\n        }\n      }\n\n      i = Math.max(0, high); // Interpolate\n\n      var diff = x - xs[i];\n      var diffSq = diff * diff;\n      return ys[i] + c1s[i] * diff + c2s[i] * diffSq + c3s[i] * diff * diffSq;\n    }\n  }]);\n\n  return MonotonicInterpolant;\n}();","import { isSafari, isFirefox } from './BrowserDetector';\nimport { MonotonicInterpolant } from './MonotonicInterpolant';\nvar ELEMENT_NODE = 1;\nexport function getNodeClientOffset(node) {\n  var el = node.nodeType === ELEMENT_NODE ? node : node.parentElement;\n\n  if (!el) {\n    return null;\n  }\n\n  var _el$getBoundingClient = el.getBoundingClientRect(),\n      top = _el$getBoundingClient.top,\n      left = _el$getBoundingClient.left;\n\n  return {\n    x: left,\n    y: top\n  };\n}\nexport function getEventClientOffset(e) {\n  return {\n    x: e.clientX,\n    y: e.clientY\n  };\n}\n\nfunction isImageNode(node) {\n  var _document$documentEle;\n\n  return node.nodeName === 'IMG' && (isFirefox() || !((_document$documentEle = document.documentElement) !== null && _document$documentEle !== void 0 && _document$documentEle.contains(node)));\n}\n\nfunction getDragPreviewSize(isImage, dragPreview, sourceWidth, sourceHeight) {\n  var dragPreviewWidth = isImage ? dragPreview.width : sourceWidth;\n  var dragPreviewHeight = isImage ? dragPreview.height : sourceHeight; // Work around @2x coordinate discrepancies in browsers\n\n  if (isSafari() && isImage) {\n    dragPreviewHeight /= window.devicePixelRatio;\n    dragPreviewWidth /= window.devicePixelRatio;\n  }\n\n  return {\n    dragPreviewWidth: dragPreviewWidth,\n    dragPreviewHeight: dragPreviewHeight\n  };\n}\n\nexport function getDragPreviewOffset(sourceNode, dragPreview, clientOffset, anchorPoint, offsetPoint) {\n  // The browsers will use the image intrinsic size under different conditions.\n  // Firefox only cares if it's an image, but WebKit also wants it to be detached.\n  var isImage = isImageNode(dragPreview);\n  var dragPreviewNode = isImage ? sourceNode : dragPreview;\n  var dragPreviewNodeOffsetFromClient = getNodeClientOffset(dragPreviewNode);\n  var offsetFromDragPreview = {\n    x: clientOffset.x - dragPreviewNodeOffsetFromClient.x,\n    y: clientOffset.y - dragPreviewNodeOffsetFromClient.y\n  };\n  var sourceWidth = sourceNode.offsetWidth,\n      sourceHeight = sourceNode.offsetHeight;\n  var anchorX = anchorPoint.anchorX,\n      anchorY = anchorPoint.anchorY;\n\n  var _getDragPreviewSize = getDragPreviewSize(isImage, dragPreview, sourceWidth, sourceHeight),\n      dragPreviewWidth = _getDragPreviewSize.dragPreviewWidth,\n      dragPreviewHeight = _getDragPreviewSize.dragPreviewHeight;\n\n  var calculateYOffset = function calculateYOffset() {\n    var interpolantY = new MonotonicInterpolant([0, 0.5, 1], [// Dock to the top\n    offsetFromDragPreview.y, // Align at the center\n    offsetFromDragPreview.y / sourceHeight * dragPreviewHeight, // Dock to the bottom\n    offsetFromDragPreview.y + dragPreviewHeight - sourceHeight]);\n    var y = interpolantY.interpolate(anchorY); // Work around Safari 8 positioning bug\n\n    if (isSafari() && isImage) {\n      // We'll have to wait for @3x to see if this is entirely correct\n      y += (window.devicePixelRatio - 1) * dragPreviewHeight;\n    }\n\n    return y;\n  };\n\n  var calculateXOffset = function calculateXOffset() {\n    // Interpolate coordinates depending on anchor point\n    // If you know a simpler way to do this, let me know\n    var interpolantX = new MonotonicInterpolant([0, 0.5, 1], [// Dock to the left\n    offsetFromDragPreview.x, // Align at the center\n    offsetFromDragPreview.x / sourceWidth * dragPreviewWidth, // Dock to the right\n    offsetFromDragPreview.x + dragPreviewWidth - sourceWidth]);\n    return interpolantX.interpolate(anchorX);\n  }; // Force offsets if specified in the options.\n\n\n  var offsetX = offsetPoint.offsetX,\n      offsetY = offsetPoint.offsetY;\n  var isManualOffsetX = offsetX === 0 || offsetX;\n  var isManualOffsetY = offsetY === 0 || offsetY;\n  return {\n    x: isManualOffsetX ? offsetX : calculateXOffset(),\n    y: isManualOffsetY ? offsetY : calculateYOffset()\n  };\n}","export var FILE = '__NATIVE_FILE__';\nexport var URL = '__NATIVE_URL__';\nexport var TEXT = '__NATIVE_TEXT__';\nexport var HTML = '__NATIVE_HTML__';","var _nativeTypesConfig;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport * as NativeTypes from '../NativeTypes';\nimport { getDataFromDataTransfer } from './getDataFromDataTransfer';\nexport var nativeTypesConfig = (_nativeTypesConfig = {}, _defineProperty(_nativeTypesConfig, NativeTypes.FILE, {\n  exposeProperties: {\n    files: function files(dataTransfer) {\n      return Array.prototype.slice.call(dataTransfer.files);\n    },\n    items: function items(dataTransfer) {\n      return dataTransfer.items;\n    },\n    dataTransfer: function dataTransfer(_dataTransfer) {\n      return _dataTransfer;\n    }\n  },\n  matchesTypes: ['Files']\n}), _defineProperty(_nativeTypesConfig, NativeTypes.HTML, {\n  exposeProperties: {\n    html: function html(dataTransfer, matchesTypes) {\n      return getDataFromDataTransfer(dataTransfer, matchesTypes, '');\n    },\n    dataTransfer: function dataTransfer(_dataTransfer2) {\n      return _dataTransfer2;\n    }\n  },\n  matchesTypes: ['Html', 'text/html']\n}), _defineProperty(_nativeTypesConfig, NativeTypes.URL, {\n  exposeProperties: {\n    urls: function urls(dataTransfer, matchesTypes) {\n      return getDataFromDataTransfer(dataTransfer, matchesTypes, '').split('\\n');\n    },\n    dataTransfer: function dataTransfer(_dataTransfer3) {\n      return _dataTransfer3;\n    }\n  },\n  matchesTypes: ['Url', 'text/uri-list']\n}), _defineProperty(_nativeTypesConfig, NativeTypes.TEXT, {\n  exposeProperties: {\n    text: function text(dataTransfer, matchesTypes) {\n      return getDataFromDataTransfer(dataTransfer, matchesTypes, '');\n    },\n    dataTransfer: function dataTransfer(_dataTransfer4) {\n      return _dataTransfer4;\n    }\n  },\n  matchesTypes: ['Text', 'text/plain']\n}), _nativeTypesConfig);","export function getDataFromDataTransfer(dataTransfer, typesToTry, defaultValue) {\n  var result = typesToTry.reduce(function (resultSoFar, typeToTry) {\n    return resultSoFar || dataTransfer.getData(typeToTry);\n  }, '');\n  return result != null ? result : defaultValue;\n}","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nexport var NativeDragSource = /*#__PURE__*/function () {\n  function NativeDragSource(config) {\n    _classCallCheck(this, NativeDragSource);\n\n    _defineProperty(this, \"item\", void 0);\n\n    _defineProperty(this, \"config\", void 0);\n\n    this.config = config;\n    this.item = {};\n    this.initializeExposedProperties();\n  }\n\n  _createClass(NativeDragSource, [{\n    key: \"initializeExposedProperties\",\n    value: function initializeExposedProperties() {\n      var _this = this;\n\n      Object.keys(this.config.exposeProperties).forEach(function (property) {\n        Object.defineProperty(_this.item, property, {\n          configurable: true,\n          enumerable: true,\n          get: function get() {\n            // eslint-disable-next-line no-console\n            console.warn(\"Browser doesn't allow reading \\\"\".concat(property, \"\\\" until the drop event.\"));\n            return null;\n          }\n        });\n      });\n    }\n  }, {\n    key: \"loadDataTransfer\",\n    value: function loadDataTransfer(dataTransfer) {\n      var _this2 = this;\n\n      if (dataTransfer) {\n        var newProperties = {};\n        Object.keys(this.config.exposeProperties).forEach(function (property) {\n          newProperties[property] = {\n            value: _this2.config.exposeProperties[property](dataTransfer, _this2.config.matchesTypes),\n            configurable: true,\n            enumerable: true\n          };\n        });\n        Object.defineProperties(this.item, newProperties);\n      }\n    }\n  }, {\n    key: \"canDrag\",\n    value: function canDrag() {\n      return true;\n    }\n  }, {\n    key: \"beginDrag\",\n    value: function beginDrag() {\n      return this.item;\n    }\n  }, {\n    key: \"isDragging\",\n    value: function isDragging(monitor, handle) {\n      return handle === monitor.getSourceId();\n    }\n  }, {\n    key: \"endDrag\",\n    value: function endDrag() {// empty\n    }\n  }]);\n\n  return NativeDragSource;\n}();","import { nativeTypesConfig } from './nativeTypesConfig';\nimport { NativeDragSource } from './NativeDragSource';\nexport function createNativeDragSource(type, dataTransfer) {\n  var result = new NativeDragSource(nativeTypesConfig[type]);\n  result.loadDataTransfer(dataTransfer);\n  return result;\n}\nexport function matchNativeItemType(dataTransfer) {\n  if (!dataTransfer) {\n    return null;\n  }\n\n  var dataTransferTypes = Array.prototype.slice.call(dataTransfer.types || []);\n  return Object.keys(nativeTypesConfig).filter(function (nativeItemType) {\n    var matchesTypes = nativeTypesConfig[nativeItemType].matchesTypes;\n    return matchesTypes.some(function (t) {\n      return dataTransferTypes.indexOf(t) > -1;\n    });\n  })[0] || null;\n}","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nexport var OptionsReader = /*#__PURE__*/function () {\n  function OptionsReader(globalContext, options) {\n    _classCallCheck(this, OptionsReader);\n\n    _defineProperty(this, \"ownerDocument\", null);\n\n    _defineProperty(this, \"globalContext\", void 0);\n\n    _defineProperty(this, \"optionsArgs\", void 0);\n\n    this.globalContext = globalContext;\n    this.optionsArgs = options;\n  }\n\n  _createClass(OptionsReader, [{\n    key: \"window\",\n    get: function get() {\n      if (this.globalContext) {\n        return this.globalContext;\n      } else if (typeof window !== 'undefined') {\n        return window;\n      }\n\n      return undefined;\n    }\n  }, {\n    key: \"document\",\n    get: function get() {\n      var _this$globalContext;\n\n      if ((_this$globalContext = this.globalContext) !== null && _this$globalContext !== void 0 && _this$globalContext.document) {\n        return this.globalContext.document;\n      } else if (this.window) {\n        return this.window.document;\n      } else {\n        return undefined;\n      }\n    }\n  }, {\n    key: \"rootElement\",\n    get: function get() {\n      var _this$optionsArgs;\n\n      return ((_this$optionsArgs = this.optionsArgs) === null || _this$optionsArgs === void 0 ? void 0 : _this$optionsArgs.rootElement) || this.window;\n    }\n  }]);\n\n  return OptionsReader;\n}();","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { EnterLeaveCounter } from './EnterLeaveCounter';\nimport { getNodeClientOffset, getEventClientOffset, getDragPreviewOffset } from './OffsetUtils';\nimport { createNativeDragSource, matchNativeItemType } from './NativeDragSources';\nimport * as NativeTypes from './NativeTypes';\nimport { OptionsReader } from './OptionsReader';\nexport var HTML5BackendImpl = /*#__PURE__*/function () {\n  // React-Dnd Components\n  // Internal State\n  function HTML5BackendImpl(manager, globalContext, options) {\n    var _this = this;\n\n    _classCallCheck(this, HTML5BackendImpl);\n\n    _defineProperty(this, \"options\", void 0);\n\n    _defineProperty(this, \"actions\", void 0);\n\n    _defineProperty(this, \"monitor\", void 0);\n\n    _defineProperty(this, \"registry\", void 0);\n\n    _defineProperty(this, \"enterLeaveCounter\", void 0);\n\n    _defineProperty(this, \"sourcePreviewNodes\", new Map());\n\n    _defineProperty(this, \"sourcePreviewNodeOptions\", new Map());\n\n    _defineProperty(this, \"sourceNodes\", new Map());\n\n    _defineProperty(this, \"sourceNodeOptions\", new Map());\n\n    _defineProperty(this, \"dragStartSourceIds\", null);\n\n    _defineProperty(this, \"dropTargetIds\", []);\n\n    _defineProperty(this, \"dragEnterTargetIds\", []);\n\n    _defineProperty(this, \"currentNativeSource\", null);\n\n    _defineProperty(this, \"currentNativeHandle\", null);\n\n    _defineProperty(this, \"currentDragSourceNode\", null);\n\n    _defineProperty(this, \"altKeyPressed\", false);\n\n    _defineProperty(this, \"mouseMoveTimeoutTimer\", null);\n\n    _defineProperty(this, \"asyncEndDragFrameId\", null);\n\n    _defineProperty(this, \"dragOverTargetIds\", null);\n\n    _defineProperty(this, \"lastClientOffset\", null);\n\n    _defineProperty(this, \"hoverRafId\", null);\n\n    _defineProperty(this, \"getSourceClientOffset\", function (sourceId) {\n      var source = _this.sourceNodes.get(sourceId);\n\n      return source && getNodeClientOffset(source) || null;\n    });\n\n    _defineProperty(this, \"endDragNativeItem\", function () {\n      if (!_this.isDraggingNativeItem()) {\n        return;\n      }\n\n      _this.actions.endDrag();\n\n      if (_this.currentNativeHandle) {\n        _this.registry.removeSource(_this.currentNativeHandle);\n      }\n\n      _this.currentNativeHandle = null;\n      _this.currentNativeSource = null;\n    });\n\n    _defineProperty(this, \"isNodeInDocument\", function (node) {\n      // Check the node either in the main document or in the current context\n      return Boolean(node && _this.document && _this.document.body && _this.document.body.contains(node));\n    });\n\n    _defineProperty(this, \"endDragIfSourceWasRemovedFromDOM\", function () {\n      var node = _this.currentDragSourceNode;\n\n      if (node == null || _this.isNodeInDocument(node)) {\n        return;\n      }\n\n      if (_this.clearCurrentDragSourceNode() && _this.monitor.isDragging()) {\n        _this.actions.endDrag();\n      }\n    });\n\n    _defineProperty(this, \"handleTopDragStartCapture\", function () {\n      _this.clearCurrentDragSourceNode();\n\n      _this.dragStartSourceIds = [];\n    });\n\n    _defineProperty(this, \"handleTopDragStart\", function (e) {\n      if (e.defaultPrevented) {\n        return;\n      }\n\n      var dragStartSourceIds = _this.dragStartSourceIds;\n      _this.dragStartSourceIds = null;\n      var clientOffset = getEventClientOffset(e); // Avoid crashing if we missed a drop event or our previous drag died\n\n      if (_this.monitor.isDragging()) {\n        _this.actions.endDrag();\n      } // Don't publish the source just yet (see why below)\n\n\n      _this.actions.beginDrag(dragStartSourceIds || [], {\n        publishSource: false,\n        getSourceClientOffset: _this.getSourceClientOffset,\n        clientOffset: clientOffset\n      });\n\n      var dataTransfer = e.dataTransfer;\n      var nativeType = matchNativeItemType(dataTransfer);\n\n      if (_this.monitor.isDragging()) {\n        if (dataTransfer && typeof dataTransfer.setDragImage === 'function') {\n          // Use custom drag image if user specifies it.\n          // If child drag source refuses drag but parent agrees,\n          // use parent's node as drag image. Neither works in IE though.\n          var sourceId = _this.monitor.getSourceId();\n\n          var sourceNode = _this.sourceNodes.get(sourceId);\n\n          var dragPreview = _this.sourcePreviewNodes.get(sourceId) || sourceNode;\n\n          if (dragPreview) {\n            var _this$getCurrentSourc = _this.getCurrentSourcePreviewNodeOptions(),\n                anchorX = _this$getCurrentSourc.anchorX,\n                anchorY = _this$getCurrentSourc.anchorY,\n                offsetX = _this$getCurrentSourc.offsetX,\n                offsetY = _this$getCurrentSourc.offsetY;\n\n            var anchorPoint = {\n              anchorX: anchorX,\n              anchorY: anchorY\n            };\n            var offsetPoint = {\n              offsetX: offsetX,\n              offsetY: offsetY\n            };\n            var dragPreviewOffset = getDragPreviewOffset(sourceNode, dragPreview, clientOffset, anchorPoint, offsetPoint);\n            dataTransfer.setDragImage(dragPreview, dragPreviewOffset.x, dragPreviewOffset.y);\n          }\n        }\n\n        try {\n          // Firefox won't drag without setting data\n          dataTransfer === null || dataTransfer === void 0 ? void 0 : dataTransfer.setData('application/json', {});\n        } catch (err) {// IE doesn't support MIME types in setData\n        } // Store drag source node so we can check whether\n        // it is removed from DOM and trigger endDrag manually.\n\n\n        _this.setCurrentDragSourceNode(e.target); // Now we are ready to publish the drag source.. or are we not?\n\n\n        var _this$getCurrentSourc2 = _this.getCurrentSourcePreviewNodeOptions(),\n            captureDraggingState = _this$getCurrentSourc2.captureDraggingState;\n\n        if (!captureDraggingState) {\n          // Usually we want to publish it in the next tick so that browser\n          // is able to screenshot the current (not yet dragging) state.\n          //\n          // It also neatly avoids a situation where render() returns null\n          // in the same tick for the source element, and browser freaks out.\n          setTimeout(function () {\n            return _this.actions.publishDragSource();\n          }, 0);\n        } else {\n          // In some cases the user may want to override this behavior, e.g.\n          // to work around IE not supporting custom drag previews.\n          //\n          // When using a custom drag layer, the only way to prevent\n          // the default drag preview from drawing in IE is to screenshot\n          // the dragging state in which the node itself has zero opacity\n          // and height. In this case, though, returning null from render()\n          // will abruptly end the dragging, which is not obvious.\n          //\n          // This is the reason such behavior is strictly opt-in.\n          _this.actions.publishDragSource();\n        }\n      } else if (nativeType) {\n        // A native item (such as URL) dragged from inside the document\n        _this.beginDragNativeItem(nativeType);\n      } else if (dataTransfer && !dataTransfer.types && (e.target && !e.target.hasAttribute || !e.target.hasAttribute('draggable'))) {\n        // Looks like a Safari bug: dataTransfer.types is null, but there was no draggable.\n        // Just let it drag. It's a native type (URL or text) and will be picked up in\n        // dragenter handler.\n        return;\n      } else {\n        // If by this time no drag source reacted, tell browser not to drag.\n        e.preventDefault();\n      }\n    });\n\n    _defineProperty(this, \"handleTopDragEndCapture\", function () {\n      if (_this.clearCurrentDragSourceNode() && _this.monitor.isDragging()) {\n        // Firefox can dispatch this event in an infinite loop\n        // if dragend handler does something like showing an alert.\n        // Only proceed if we have not handled it already.\n        _this.actions.endDrag();\n      }\n    });\n\n    _defineProperty(this, \"handleTopDragEnterCapture\", function (e) {\n      _this.dragEnterTargetIds = [];\n\n      var isFirstEnter = _this.enterLeaveCounter.enter(e.target);\n\n      if (!isFirstEnter || _this.monitor.isDragging()) {\n        return;\n      }\n\n      var dataTransfer = e.dataTransfer;\n      var nativeType = matchNativeItemType(dataTransfer);\n\n      if (nativeType) {\n        // A native item (such as file or URL) dragged from outside the document\n        _this.beginDragNativeItem(nativeType, dataTransfer);\n      }\n    });\n\n    _defineProperty(this, \"handleTopDragEnter\", function (e) {\n      var dragEnterTargetIds = _this.dragEnterTargetIds;\n      _this.dragEnterTargetIds = [];\n\n      if (!_this.monitor.isDragging()) {\n        // This is probably a native item type we don't understand.\n        return;\n      }\n\n      _this.altKeyPressed = e.altKey; // If the target changes position as the result of `dragenter`, `dragover` might still\n      // get dispatched despite target being no longer there. The easy solution is to check\n      // whether there actually is a target before firing `hover`.\n\n      if (dragEnterTargetIds.length > 0) {\n        _this.actions.hover(dragEnterTargetIds, {\n          clientOffset: getEventClientOffset(e)\n        });\n      }\n\n      var canDrop = dragEnterTargetIds.some(function (targetId) {\n        return _this.monitor.canDropOnTarget(targetId);\n      });\n\n      if (canDrop) {\n        // IE requires this to fire dragover events\n        e.preventDefault();\n\n        if (e.dataTransfer) {\n          e.dataTransfer.dropEffect = _this.getCurrentDropEffect();\n        }\n      }\n    });\n\n    _defineProperty(this, \"handleTopDragOverCapture\", function () {\n      _this.dragOverTargetIds = [];\n    });\n\n    _defineProperty(this, \"handleTopDragOver\", function (e) {\n      var dragOverTargetIds = _this.dragOverTargetIds;\n      _this.dragOverTargetIds = [];\n\n      if (!_this.monitor.isDragging()) {\n        // This is probably a native item type we don't understand.\n        // Prevent default \"drop and blow away the whole document\" action.\n        e.preventDefault();\n\n        if (e.dataTransfer) {\n          e.dataTransfer.dropEffect = 'none';\n        }\n\n        return;\n      }\n\n      _this.altKeyPressed = e.altKey;\n      _this.lastClientOffset = getEventClientOffset(e);\n\n      if (_this.hoverRafId === null && typeof requestAnimationFrame !== 'undefined') {\n        _this.hoverRafId = requestAnimationFrame(function () {\n          if (_this.monitor.isDragging()) {\n            _this.actions.hover(dragOverTargetIds || [], {\n              clientOffset: _this.lastClientOffset\n            });\n          }\n\n          _this.hoverRafId = null;\n        });\n      }\n\n      var canDrop = (dragOverTargetIds || []).some(function (targetId) {\n        return _this.monitor.canDropOnTarget(targetId);\n      });\n\n      if (canDrop) {\n        // Show user-specified drop effect.\n        e.preventDefault();\n\n        if (e.dataTransfer) {\n          e.dataTransfer.dropEffect = _this.getCurrentDropEffect();\n        }\n      } else if (_this.isDraggingNativeItem()) {\n        // Don't show a nice cursor but still prevent default\n        // \"drop and blow away the whole document\" action.\n        e.preventDefault();\n      } else {\n        e.preventDefault();\n\n        if (e.dataTransfer) {\n          e.dataTransfer.dropEffect = 'none';\n        }\n      }\n    });\n\n    _defineProperty(this, \"handleTopDragLeaveCapture\", function (e) {\n      if (_this.isDraggingNativeItem()) {\n        e.preventDefault();\n      }\n\n      var isLastLeave = _this.enterLeaveCounter.leave(e.target);\n\n      if (!isLastLeave) {\n        return;\n      }\n\n      if (_this.isDraggingNativeItem()) {\n        setTimeout(function () {\n          return _this.endDragNativeItem();\n        }, 0);\n      }\n    });\n\n    _defineProperty(this, \"handleTopDropCapture\", function (e) {\n      _this.dropTargetIds = [];\n\n      if (_this.isDraggingNativeItem()) {\n        var _this$currentNativeSo;\n\n        e.preventDefault();\n        (_this$currentNativeSo = _this.currentNativeSource) === null || _this$currentNativeSo === void 0 ? void 0 : _this$currentNativeSo.loadDataTransfer(e.dataTransfer);\n      } else if (matchNativeItemType(e.dataTransfer)) {\n        // Dragging some elements, like <a> and <img> may still behave like a native drag event,\n        // even if the current drag event matches a user-defined type.\n        // Stop the default behavior when we're not expecting a native item to be dropped.\n        e.preventDefault();\n      }\n\n      _this.enterLeaveCounter.reset();\n    });\n\n    _defineProperty(this, \"handleTopDrop\", function (e) {\n      var dropTargetIds = _this.dropTargetIds;\n      _this.dropTargetIds = [];\n\n      _this.actions.hover(dropTargetIds, {\n        clientOffset: getEventClientOffset(e)\n      });\n\n      _this.actions.drop({\n        dropEffect: _this.getCurrentDropEffect()\n      });\n\n      if (_this.isDraggingNativeItem()) {\n        _this.endDragNativeItem();\n      } else if (_this.monitor.isDragging()) {\n        _this.actions.endDrag();\n      }\n    });\n\n    _defineProperty(this, \"handleSelectStart\", function (e) {\n      var target = e.target; // Only IE requires us to explicitly say\n      // we want drag drop operation to start\n\n      if (typeof target.dragDrop !== 'function') {\n        return;\n      } // Inputs and textareas should be selectable\n\n\n      if (target.tagName === 'INPUT' || target.tagName === 'SELECT' || target.tagName === 'TEXTAREA' || target.isContentEditable) {\n        return;\n      } // For other targets, ask IE\n      // to enable drag and drop\n\n\n      e.preventDefault();\n      target.dragDrop();\n    });\n\n    this.options = new OptionsReader(globalContext, options);\n    this.actions = manager.getActions();\n    this.monitor = manager.getMonitor();\n    this.registry = manager.getRegistry();\n    this.enterLeaveCounter = new EnterLeaveCounter(this.isNodeInDocument);\n  }\n  /**\n   * Generate profiling statistics for the HTML5Backend.\n   */\n\n\n  _createClass(HTML5BackendImpl, [{\n    key: \"profile\",\n    value: function profile() {\n      var _this$dragStartSource, _this$dragOverTargetI;\n\n      return {\n        sourcePreviewNodes: this.sourcePreviewNodes.size,\n        sourcePreviewNodeOptions: this.sourcePreviewNodeOptions.size,\n        sourceNodeOptions: this.sourceNodeOptions.size,\n        sourceNodes: this.sourceNodes.size,\n        dragStartSourceIds: ((_this$dragStartSource = this.dragStartSourceIds) === null || _this$dragStartSource === void 0 ? void 0 : _this$dragStartSource.length) || 0,\n        dropTargetIds: this.dropTargetIds.length,\n        dragEnterTargetIds: this.dragEnterTargetIds.length,\n        dragOverTargetIds: ((_this$dragOverTargetI = this.dragOverTargetIds) === null || _this$dragOverTargetI === void 0 ? void 0 : _this$dragOverTargetI.length) || 0\n      };\n    } // public for test\n\n  }, {\n    key: \"window\",\n    get: function get() {\n      return this.options.window;\n    }\n  }, {\n    key: \"document\",\n    get: function get() {\n      return this.options.document;\n    }\n    /**\n     * Get the root element to use for event subscriptions\n     */\n\n  }, {\n    key: \"rootElement\",\n    get: function get() {\n      return this.options.rootElement;\n    }\n  }, {\n    key: \"setup\",\n    value: function setup() {\n      var root = this.rootElement;\n\n      if (root === undefined) {\n        return;\n      }\n\n      if (root.__isReactDndBackendSetUp) {\n        throw new Error('Cannot have two HTML5 backends at the same time.');\n      }\n\n      root.__isReactDndBackendSetUp = true;\n      this.addEventListeners(root);\n    }\n  }, {\n    key: \"teardown\",\n    value: function teardown() {\n      var root = this.rootElement;\n\n      if (root === undefined) {\n        return;\n      }\n\n      root.__isReactDndBackendSetUp = false;\n      this.removeEventListeners(this.rootElement);\n      this.clearCurrentDragSourceNode();\n\n      if (this.asyncEndDragFrameId) {\n        var _this$window;\n\n        (_this$window = this.window) === null || _this$window === void 0 ? void 0 : _this$window.cancelAnimationFrame(this.asyncEndDragFrameId);\n      }\n    }\n  }, {\n    key: \"connectDragPreview\",\n    value: function connectDragPreview(sourceId, node, options) {\n      var _this2 = this;\n\n      this.sourcePreviewNodeOptions.set(sourceId, options);\n      this.sourcePreviewNodes.set(sourceId, node);\n      return function () {\n        _this2.sourcePreviewNodes.delete(sourceId);\n\n        _this2.sourcePreviewNodeOptions.delete(sourceId);\n      };\n    }\n  }, {\n    key: \"connectDragSource\",\n    value: function connectDragSource(sourceId, node, options) {\n      var _this3 = this;\n\n      this.sourceNodes.set(sourceId, node);\n      this.sourceNodeOptions.set(sourceId, options);\n\n      var handleDragStart = function handleDragStart(e) {\n        return _this3.handleDragStart(e, sourceId);\n      };\n\n      var handleSelectStart = function handleSelectStart(e) {\n        return _this3.handleSelectStart(e);\n      };\n\n      node.setAttribute('draggable', 'true');\n      node.addEventListener('dragstart', handleDragStart);\n      node.addEventListener('selectstart', handleSelectStart);\n      return function () {\n        _this3.sourceNodes.delete(sourceId);\n\n        _this3.sourceNodeOptions.delete(sourceId);\n\n        node.removeEventListener('dragstart', handleDragStart);\n        node.removeEventListener('selectstart', handleSelectStart);\n        node.setAttribute('draggable', 'false');\n      };\n    }\n  }, {\n    key: \"connectDropTarget\",\n    value: function connectDropTarget(targetId, node) {\n      var _this4 = this;\n\n      var handleDragEnter = function handleDragEnter(e) {\n        return _this4.handleDragEnter(e, targetId);\n      };\n\n      var handleDragOver = function handleDragOver(e) {\n        return _this4.handleDragOver(e, targetId);\n      };\n\n      var handleDrop = function handleDrop(e) {\n        return _this4.handleDrop(e, targetId);\n      };\n\n      node.addEventListener('dragenter', handleDragEnter);\n      node.addEventListener('dragover', handleDragOver);\n      node.addEventListener('drop', handleDrop);\n      return function () {\n        node.removeEventListener('dragenter', handleDragEnter);\n        node.removeEventListener('dragover', handleDragOver);\n        node.removeEventListener('drop', handleDrop);\n      };\n    }\n  }, {\n    key: \"addEventListeners\",\n    value: function addEventListeners(target) {\n      // SSR Fix (https://github.com/react-dnd/react-dnd/pull/813\n      if (!target.addEventListener) {\n        return;\n      }\n\n      target.addEventListener('dragstart', this.handleTopDragStart);\n      target.addEventListener('dragstart', this.handleTopDragStartCapture, true);\n      target.addEventListener('dragend', this.handleTopDragEndCapture, true);\n      target.addEventListener('dragenter', this.handleTopDragEnter);\n      target.addEventListener('dragenter', this.handleTopDragEnterCapture, true);\n      target.addEventListener('dragleave', this.handleTopDragLeaveCapture, true);\n      target.addEventListener('dragover', this.handleTopDragOver);\n      target.addEventListener('dragover', this.handleTopDragOverCapture, true);\n      target.addEventListener('drop', this.handleTopDrop);\n      target.addEventListener('drop', this.handleTopDropCapture, true);\n    }\n  }, {\n    key: \"removeEventListeners\",\n    value: function removeEventListeners(target) {\n      // SSR Fix (https://github.com/react-dnd/react-dnd/pull/813\n      if (!target.removeEventListener) {\n        return;\n      }\n\n      target.removeEventListener('dragstart', this.handleTopDragStart);\n      target.removeEventListener('dragstart', this.handleTopDragStartCapture, true);\n      target.removeEventListener('dragend', this.handleTopDragEndCapture, true);\n      target.removeEventListener('dragenter', this.handleTopDragEnter);\n      target.removeEventListener('dragenter', this.handleTopDragEnterCapture, true);\n      target.removeEventListener('dragleave', this.handleTopDragLeaveCapture, true);\n      target.removeEventListener('dragover', this.handleTopDragOver);\n      target.removeEventListener('dragover', this.handleTopDragOverCapture, true);\n      target.removeEventListener('drop', this.handleTopDrop);\n      target.removeEventListener('drop', this.handleTopDropCapture, true);\n    }\n  }, {\n    key: \"getCurrentSourceNodeOptions\",\n    value: function getCurrentSourceNodeOptions() {\n      var sourceId = this.monitor.getSourceId();\n      var sourceNodeOptions = this.sourceNodeOptions.get(sourceId);\n      return _objectSpread({\n        dropEffect: this.altKeyPressed ? 'copy' : 'move'\n      }, sourceNodeOptions || {});\n    }\n  }, {\n    key: \"getCurrentDropEffect\",\n    value: function getCurrentDropEffect() {\n      if (this.isDraggingNativeItem()) {\n        // It makes more sense to default to 'copy' for native resources\n        return 'copy';\n      }\n\n      return this.getCurrentSourceNodeOptions().dropEffect;\n    }\n  }, {\n    key: \"getCurrentSourcePreviewNodeOptions\",\n    value: function getCurrentSourcePreviewNodeOptions() {\n      var sourceId = this.monitor.getSourceId();\n      var sourcePreviewNodeOptions = this.sourcePreviewNodeOptions.get(sourceId);\n      return _objectSpread({\n        anchorX: 0.5,\n        anchorY: 0.5,\n        captureDraggingState: false\n      }, sourcePreviewNodeOptions || {});\n    }\n  }, {\n    key: \"isDraggingNativeItem\",\n    value: function isDraggingNativeItem() {\n      var itemType = this.monitor.getItemType();\n      return Object.keys(NativeTypes).some(function (key) {\n        return NativeTypes[key] === itemType;\n      });\n    }\n  }, {\n    key: \"beginDragNativeItem\",\n    value: function beginDragNativeItem(type, dataTransfer) {\n      this.clearCurrentDragSourceNode();\n      this.currentNativeSource = createNativeDragSource(type, dataTransfer);\n      this.currentNativeHandle = this.registry.addSource(type, this.currentNativeSource);\n      this.actions.beginDrag([this.currentNativeHandle]);\n    }\n  }, {\n    key: \"setCurrentDragSourceNode\",\n    value: function setCurrentDragSourceNode(node) {\n      var _this5 = this;\n\n      this.clearCurrentDragSourceNode();\n      this.currentDragSourceNode = node; // A timeout of > 0 is necessary to resolve Firefox issue referenced\n      // See:\n      //   * https://github.com/react-dnd/react-dnd/pull/928\n      //   * https://github.com/react-dnd/react-dnd/issues/869\n\n      var MOUSE_MOVE_TIMEOUT = 1000; // Receiving a mouse event in the middle of a dragging operation\n      // means it has ended and the drag source node disappeared from DOM,\n      // so the browser didn't dispatch the dragend event.\n      //\n      // We need to wait before we start listening for mousemove events.\n      // This is needed because the drag preview needs to be drawn or else it fires an 'mousemove' event\n      // immediately in some browsers.\n      //\n      // See:\n      //   * https://github.com/react-dnd/react-dnd/pull/928\n      //   * https://github.com/react-dnd/react-dnd/issues/869\n      //\n\n      this.mouseMoveTimeoutTimer = setTimeout(function () {\n        var _this5$rootElement;\n\n        return (_this5$rootElement = _this5.rootElement) === null || _this5$rootElement === void 0 ? void 0 : _this5$rootElement.addEventListener('mousemove', _this5.endDragIfSourceWasRemovedFromDOM, true);\n      }, MOUSE_MOVE_TIMEOUT);\n    }\n  }, {\n    key: \"clearCurrentDragSourceNode\",\n    value: function clearCurrentDragSourceNode() {\n      if (this.currentDragSourceNode) {\n        this.currentDragSourceNode = null;\n\n        if (this.rootElement) {\n          var _this$window2;\n\n          (_this$window2 = this.window) === null || _this$window2 === void 0 ? void 0 : _this$window2.clearTimeout(this.mouseMoveTimeoutTimer || undefined);\n          this.rootElement.removeEventListener('mousemove', this.endDragIfSourceWasRemovedFromDOM, true);\n        }\n\n        this.mouseMoveTimeoutTimer = null;\n        return true;\n      }\n\n      return false;\n    }\n  }, {\n    key: \"handleDragStart\",\n    value: function handleDragStart(e, sourceId) {\n      if (e.defaultPrevented) {\n        return;\n      }\n\n      if (!this.dragStartSourceIds) {\n        this.dragStartSourceIds = [];\n      }\n\n      this.dragStartSourceIds.unshift(sourceId);\n    }\n  }, {\n    key: \"handleDragEnter\",\n    value: function handleDragEnter(e, targetId) {\n      this.dragEnterTargetIds.unshift(targetId);\n    }\n  }, {\n    key: \"handleDragOver\",\n    value: function handleDragOver(e, targetId) {\n      if (this.dragOverTargetIds === null) {\n        this.dragOverTargetIds = [];\n      }\n\n      this.dragOverTargetIds.unshift(targetId);\n    }\n  }, {\n    key: \"handleDrop\",\n    value: function handleDrop(e, targetId) {\n      this.dropTargetIds.unshift(targetId);\n    }\n  }]);\n\n  return HTML5BackendImpl;\n}();","import { HTML5Backend } from 'react-dnd-html5-backend';\nimport { DISPLAY_MODE_EDIT } from './actions/display';\nexport var DEFAULT_OPTIONS = {\n    allowMoveInEditMode: true,\n    allowResizeInEditMode: true,\n    childConstraints: null,\n    components: {},\n    languages: null,\n    uiTranslator: null,\n    zoomEnabled: true,\n    zoomFactors: [1, 0.75, 0.5, 0.25],\n    undoRedoEnabled: true,\n    editEnabled: true,\n    insertEnabled: true,\n    layoutEnabled: true,\n    resizeEnabled: true,\n    previewEnabled: true,\n    dndBackend: HTML5Backend,\n    blurGateDefaultMode: DISPLAY_MODE_EDIT,\n    blurGateDisabled: false,\n    middleware: [],\n    store: null,\n    hideEditorSidebar: false,\n    showMoveButtonsInBottomToolbar: true,\n    showMoveButtonsInLayoutMode: true,\n    sidebarPosition: 'rightAbsolute',\n    customOptions: [],\n};\nexport var DEFAULT_RENDER_OPTIONS = {\n    cellPlugins: [],\n    cellSpacing: null,\n};\n//# sourceMappingURL=defaultOptions.js.map","import { HTML5BackendImpl } from './HTML5BackendImpl';\nimport * as NativeTypes from './NativeTypes';\nexport { getEmptyImage } from './getEmptyImage';\nexport { NativeTypes };\nexport var HTML5Backend = function createBackend(manager, context, options) {\n  return new HTML5BackendImpl(manager, context, options);\n};","export var getLang = function (_a) {\n    var settings = _a.reactPage.settings;\n    return settings.lang;\n};\n//# sourceMappingURL=setting.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport React, { createContext, useContext, useRef } from 'react';\nimport deepEquals from '../../utils/deepEquals';\nimport { DEFAULT_OPTIONS } from '../../defaultOptions';\nimport { EditorContext } from '../../EditorStore';\nimport { useSelector } from '../../reduxConnect';\nimport { getLang } from '../../selector/setting';\nimport { normalizeCellSpacing } from '../../utils/getCellSpacing';\nimport NoopProvider from '../Cell/NoopProvider';\nimport { RenderOptionsContext, useRenderOption, useRenderOptions, } from './renderOptions';\n/**\n * @returns the store object of the current editor. Contains the redux store.\n */\nexport var useEditorStore = function () { return useContext(EditorContext); };\nexport var OptionsContext = createContext(DEFAULT_OPTIONS);\n/**\n * @returns the options object of the current Editor.\n *\n * this object is memoized, alltough its better to use `useOption` instead if you want to use a single option\n */\nexport var useOptions = function () { return useContext(OptionsContext); };\n/**\n * get a single (memoized) option value\n * @param key the option key\n * @returns the option value\n */\nexport var useOption = function (key) {\n    var options = useOptions();\n    var option = options[key];\n    var lastOption = useRef(option);\n    if (!deepEquals(lastOption.current, option)) {\n        lastOption.current = option;\n    }\n    return lastOption.current;\n};\n/**\n * @returns the an object with a single `t` function for ui translations\n */\nexport var useUiTranslator = function () {\n    var uiTranslator = useOption('uiTranslator');\n    return {\n        t: function (key) {\n            var _a;\n            return (_a = uiTranslator === null || uiTranslator === void 0 ? void 0 : uiTranslator(key)) !== null && _a !== void 0 ? _a : key;\n        },\n    };\n};\n/**\n * @returns the current language\n */\nexport var useLang = function () {\n    return useSelector(getLang);\n};\n/**\n * @returns cell spacing for the current cell sub-tree\n */\nexport var useCellSpacing = function () {\n    return normalizeCellSpacing(useRenderOption('cellSpacing'));\n};\n/**\n * @returns a Provider/value tuple that can be used to override cell spacing for a subtree of cells\n */\nexport var useCellSpacingProvider = function (cellSpacing) {\n    var renderOptions = useRenderOptions();\n    var value = React.useMemo(function () { return (__assign(__assign({}, renderOptions), { cellSpacing: normalizeCellSpacing(cellSpacing) })); }, [renderOptions, JSON.stringify(cellSpacing)]);\n    if (typeof cellSpacing === 'undefined' || cellSpacing == null) {\n        return [NoopProvider, undefined];\n    }\n    else {\n        return [RenderOptionsContext.Provider, value];\n    }\n};\n//# sourceMappingURL=options.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nexport var CELL_UPDATE_IS_DRAFT = 'CELL_UPDATE_IS_DRAFT';\nexport var CELL_UPDATE_DATA = 'CELL_UPDATE_DATA';\nexport var CELL_REMOVE = 'CELL_REMOVE';\nexport var CELL_RESIZE = 'CELL_RESIZE';\nexport var CELL_FOCUS = 'CELL_FOCUS';\nexport var CELL_BLUR = 'CELL_BLUR';\nexport var CELL_BLUR_ALL = 'CELL_BLUR_ALL';\nexport var updateCellIsDraft = function (id, isDraft, lang) {\n    if (isDraft === void 0) { isDraft = false; }\n    if (lang === void 0) { lang = null; }\n    return ({\n        type: CELL_UPDATE_IS_DRAFT,\n        ts: new Date(),\n        id: id,\n        isDraft: isDraft,\n        lang: lang,\n    });\n};\nexport var updateCellData = function (id) {\n    return function (data, options) { return (__assign({ type: CELL_UPDATE_DATA, ts: new Date(), id: id, data: data }, options)); };\n};\nexport var removeCells = function (ids) { return ({\n    type: CELL_REMOVE,\n    ts: new Date(),\n    ids: ids,\n}); };\nexport var resizeCell = function (id) {\n    return function (size) {\n        if (size === void 0) { size = 1; }\n        return ({\n            type: CELL_RESIZE,\n            ts: new Date(),\n            id: id,\n            size: size,\n        });\n    };\n};\n/**\n * Dispatch to focus a cell.\n */\nexport var focusCell = function (id, scrollToCell, mode) {\n    if (scrollToCell === void 0) { scrollToCell = false; }\n    if (mode === void 0) { mode = 'replace'; }\n    return ({\n        type: CELL_FOCUS,\n        ts: new Date(),\n        id: id,\n        scrollToCell: scrollToCell,\n        mode: mode,\n    });\n};\n/**\n * Dispatch to blur a cell.\n */\nexport var blurCell = function (id) { return ({\n    type: CELL_BLUR,\n    ts: new Date(),\n    id: id,\n}); };\n/**\n * Dispatch to blur all cells. For example when clicking on document body.\n */\nexport var blurAllCells = function () { return ({\n    type: CELL_BLUR_ALL,\n    ts: new Date(),\n}); };\nexport var coreActions = {\n    blurAllCells: blurAllCells,\n    blurCell: blurCell,\n    focusCell: focusCell,\n    resizeCell: resizeCell,\n    removeCells: removeCells,\n    updateCellData: updateCellData,\n    updateCellIsDraft: updateCellIsDraft,\n};\n//# sourceMappingURL=core.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { cloneWithNewIds } from '../../../core/utils/cloneWithNewIds';\nimport { isRow } from '../../types';\nimport { createId } from '../../utils/createId';\nimport { getChildCellPlugins } from '../../utils/getAvailablePlugins';\nimport { getCellData } from '../../utils/getCellData';\nimport { removeUndefinedProps } from '../../utils/removeUndefinedProps';\nimport { editMode } from '../display';\nimport { generateIds } from '../helpers';\nimport { focusCell } from './core';\nexport var CELL_INSERT_ABOVE = 'CELL_INSERT_ABOVE';\nexport var CELL_INSERT_BELOW = 'CELL_INSERT_BELOW';\nexport var CELL_INSERT_LEFT_OF = 'CELL_INSERT_LEFT_OF';\nexport var CELL_INSERT_RIGHT_OF = 'CELL_INSERT_RIGHT_OF';\nexport var CELL_INSERT_INLINE_LEFT = 'CELL_INSERT_INLINE_LEFT';\nexport var CELL_INSERT_INLINE_RIGHT = 'CELL_INSERT_INLINE_RIGHT';\nexport var CELL_INSERT_AT_END = 'CELL_INSERT_AT_END';\nexport var CELL_INSERT_AS_NEW_ROW = 'CELL_INSERT_AS_NEW_ROW';\nexport var createRow = function (partialRow, options) {\n    var _a;\n    if (Array.isArray(partialRow)) {\n        return {\n            id: createId(),\n            cells: partialRow.map(function (c) { return createCell(c, options); }),\n        };\n    }\n    return removeUndefinedProps(__assign(__assign({ id: createId() }, partialRow), { cells: (_a = partialRow.cells) === null || _a === void 0 ? void 0 : _a.map(function (c) { return createCell(c, options); }) }));\n};\nexport var createCell = function (partialCell, options) {\n    var _a;\n    var _b, _c, _d, _e, _f, _g, _h, _j, _k, _l;\n    var cellPlugins = options.cellPlugins, lang = options.lang;\n    var pluginId = partialCell.plugin &&\n        (typeof partialCell.plugin == 'string'\n            ? partialCell.plugin\n            : partialCell.plugin.id);\n    var plugin = pluginId && cellPlugins.find(function (p) { return p.id === pluginId; });\n    var partialRows = ((_b = partialCell.rows) === null || _b === void 0 ? void 0 : _b.length) > 0\n        ? partialCell.rows\n        : (_d = (_c = plugin === null || plugin === void 0 ? void 0 : plugin.createInitialChildren) === null || _c === void 0 ? void 0 : _c.call(plugin)) !== null && _d !== void 0 ? _d : [];\n    var dataI18n = __assign((_a = {}, _a[lang] = (_j = (_g = (_e = partialCell === null || partialCell === void 0 ? void 0 : partialCell.data) !== null && _e !== void 0 ? _e : (_f = plugin === null || plugin === void 0 ? void 0 : plugin.createInitialData) === null || _f === void 0 ? void 0 : _f.call(plugin, partialCell)) !== null && _g !== void 0 ? _g : (_h = plugin === null || plugin === void 0 ? void 0 : plugin.createInitialState) === null || _h === void 0 ? void 0 : _h.call(plugin, partialCell)) !== null && _j !== void 0 ? _j : null, _a), ((_k = partialCell.dataI18n) !== null && _k !== void 0 ? _k : {}));\n    return removeUndefinedProps({\n        id: (_l = partialCell.id) !== null && _l !== void 0 ? _l : createId(),\n        isDraft: partialCell.isDraft,\n        isDraftI18n: partialCell.isDraftI18n,\n        inline: partialCell.inline,\n        size: partialCell.size || 12,\n        hasInlineNeighbour: partialCell.hasInlineNeighbour,\n        plugin: plugin\n            ? {\n                id: plugin.id,\n                version: plugin.version,\n            }\n            : undefined,\n        rows: partialRows === null || partialRows === void 0 ? void 0 : partialRows.map(function (r) {\n            return createRow(r, {\n                lang: lang,\n                cellPlugins: getChildCellPlugins(cellPlugins, {\n                    pluginId: pluginId,\n                    data: getCellData({\n                        dataI18n: dataI18n,\n                    }, lang),\n                }),\n            });\n        }),\n        dataI18n: dataI18n,\n    });\n};\nvar insert = function (type) {\n    return function (options) {\n        return function (partialCell, target, insertOptions, ids) {\n            if (ids === void 0) { ids = generateIds(); }\n            var cell = createCell(partialCell, options);\n            var isNew = !partialCell.id;\n            return insertFullCell(type)(cell, target, __assign(__assign({}, insertOptions), { focusAfter: (insertOptions === null || insertOptions === void 0 ? void 0 : insertOptions.focusAfter) || isNew }), ids);\n        };\n    };\n};\nvar insertFullCell = function (type) {\n    return function (cell, _a, insertOptions, ids) {\n        var _b, _c;\n        var hoverId = _a.id, inline = _a.inline, hasInlineNeighbour = _a.hasInlineNeighbour, ancestorIds = _a.ancestorIds;\n        if (ids === void 0) { ids = generateIds(); }\n        var level = (_b = insertOptions === null || insertOptions === void 0 ? void 0 : insertOptions.level) !== null && _b !== void 0 ? _b : 0;\n        var l = level;\n        switch (type) {\n            case CELL_INSERT_ABOVE:\n            case CELL_INSERT_BELOW: {\n                if ((inline || hasInlineNeighbour) && level < 1) {\n                    l = 1;\n                }\n                break;\n            }\n            case CELL_INSERT_LEFT_OF:\n            case CELL_INSERT_RIGHT_OF: {\n                if ((inline || hasInlineNeighbour) && level < 1) {\n                    l = 1;\n                }\n                break;\n            }\n            default:\n        }\n        var insertAction = {\n            type: type,\n            ts: new Date(),\n            item: cell,\n            hoverId: level === 0 ? hoverId : (_c = ancestorIds[Math.max(level - 1)]) !== null && _c !== void 0 ? _c : hoverId,\n            level: l,\n            // FIXME: item handling is a bit confusing,\n            // we now give some of them a name like \"cell\" or \"item\",\n            // but the purpose of the others is unclear\n            ids: ids,\n            notUndoable: insertOptions.notUndoable,\n        };\n        return function (dispatch) {\n            dispatch(insertAction);\n            if (insertOptions === null || insertOptions === void 0 ? void 0 : insertOptions.focusAfter) {\n                dispatch(editMode());\n                setTimeout(function () {\n                    var _a, _b, _c, _d, _e;\n                    dispatch(focusCell(\n                    // first condition is for pasted cells. I know its a bit weird\n                    (_e = (_d = (_c = (_b = (_a = cell.rows) === null || _a === void 0 ? void 0 : _a[0]) === null || _b === void 0 ? void 0 : _b.cells) === null || _c === void 0 ? void 0 : _c[0]) === null || _d === void 0 ? void 0 : _d.id) !== null && _e !== void 0 ? _e : insertAction.ids.item, true));\n                }, 0);\n            }\n        };\n    };\n};\n/**\n * Insert a cell below of the hovering cell.\n */\nexport var insertCellBelow = insert(CELL_INSERT_BELOW);\n/**\n * Insert a cell above of the hovering cell.\n */\nexport var insertCellAbove = insert(CELL_INSERT_ABOVE);\n/**\n * Insert a cell right of the hovering cell.\n */\nexport var insertCellRightOf = insert(CELL_INSERT_RIGHT_OF);\n/**\n * Insert a cell left of the hovering cell.\n */\nexport var insertCellLeftOf = insert(CELL_INSERT_LEFT_OF);\n/**\n * Insert a cell inside the hovering cell, on the left.\n */\nexport var insertCellLeftInline = insert(CELL_INSERT_INLINE_LEFT);\n/**\n * Insert a cell inside the hovering cell, on the right.\n */\nexport var insertCellRightInline = insert(CELL_INSERT_INLINE_RIGHT);\nexport var insertCellAtTheEnd = insert(CELL_INSERT_AT_END);\nexport var insertCellNewAsNewRow = insert(CELL_INSERT_AS_NEW_ROW);\nexport var duplicateNode = function (node, options) {\n    var cell = isRow(node)\n        ? {\n            id: createId(),\n            rows: [node],\n        }\n        : node;\n    return duplicateCell(cell, options);\n};\nexport var duplicateCell = function (item, options) {\n    var _a, _b;\n    var cellWithNewIds = cloneWithNewIds(item);\n    var action = insertFullCell(CELL_INSERT_BELOW)(cellWithNewIds, {\n        ancestorIds: [],\n        id: (_a = options === null || options === void 0 ? void 0 : options.insertAfterNodeId) !== null && _a !== void 0 ? _a : item.id,\n        hasInlineNeighbour: item.hasInlineNeighbour,\n        inline: item.inline,\n        levels: null,\n        pluginId: (_b = item.plugin) === null || _b === void 0 ? void 0 : _b.id,\n    }, {\n        level: 0,\n        focusAfter: true,\n    });\n    return action;\n};\nexport var insertActions = {\n    insertCellRightInline: insertCellRightInline,\n    insertCellLeftInline: insertCellLeftInline,\n    insertCellLeftOf: insertCellLeftOf,\n    insertCellRightOf: insertCellRightOf,\n    insertCellAbove: insertCellAbove,\n    insertCellBelow: insertCellBelow,\n    duplicateCell: duplicateCell,\n    insertCellAtTheEnd: insertCellAtTheEnd,\n    insert: insert,\n};\n//# sourceMappingURL=insert.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { isRow } from '../types';\nimport { createId } from './createId';\nimport { mapNode } from './mapNode';\nexport var cloneWithNewIds = function (node) {\n    return mapNode(node, {\n        mapCell: function (n) { return (__assign(__assign({}, n), { \n            // clone data as well\n            dataI18n: (n === null || n === void 0 ? void 0 : n.dataI18n) ? JSON.parse(JSON.stringify(n.dataI18n)) : {}, id: createId() })); },\n        mapRow: function (n) { return (__assign(__assign({}, n), { id: createId() })); },\n    });\n};\nexport var cloneAsCell = function (node) {\n    var cell = isRow(node)\n        ? {\n            id: createId(),\n            rows: [node],\n        }\n        : node;\n    return cloneWithNewIds(cell);\n};\n//# sourceMappingURL=cloneWithNewIds.js.map","export var SET_LANG = 'SET_LANG';\nexport var setLang = function (lang) { return ({\n    type: SET_LANG,\n    lang: lang,\n}); };\n//# sourceMappingURL=setting.js.map","import createStore from './store';\nimport { setLang } from './actions/setting';\nimport { findNodeInState } from './selector/editable';\nimport { createContext } from 'react';\nimport { createId } from './utils/createId';\nexport var EditorContext = createContext(null);\nvar EditorStore = /** @class */ (function () {\n    function EditorStore(_a) {\n        var _this = this;\n        var _b = _a.middleware, middleware = _b === void 0 ? [] : _b, store = _a.store, initialState = _a.initialState;\n        this.getNodeWithAncestors = function (nodeId) {\n            return findNodeInState(_this.store.getState(), nodeId);\n        };\n        this.getNode = function (nodeId) {\n            var _a;\n            return (_a = findNodeInState(_this.store.getState(), nodeId)) === null || _a === void 0 ? void 0 : _a.node;\n        };\n        this.store = store || createStore(initialState, middleware);\n        this.middleware = middleware;\n    }\n    EditorStore.prototype.setLang = function (lang) {\n        this.store.dispatch(setLang(lang));\n    };\n    return EditorStore;\n}());\nexport var createEmptyState = function () {\n    return ({ id: createId(), rows: [] });\n};\nexport default EditorStore;\n//# sourceMappingURL=EditorStore.js.map","var __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { createStore, applyMiddleware, compose } from 'redux';\nimport thunk from 'redux-thunk';\nimport rootReducer from './reducer';\nimport { isProduction } from './const';\n/**\n * Returns a new redux store.\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport default (function (initialState, middleware) {\n    if (middleware === void 0) { middleware = []; }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    var v = !isProduction &&\n        typeof window === 'object' &&\n        window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__\n        ? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({})\n        : compose;\n    return createStore(rootReducer, initialState, v(applyMiddleware.apply(void 0, __spreadArray(__spreadArray([], __read(middleware), false), [thunk], false))));\n});\n//# sourceMappingURL=store.js.map"],"sourceRoot":""}